!function(e,n){"use strict";n.filemanager=e.module("crip.file-manager",["crip.core","crip.transparent-progressbar","angular-loading-bar","ngFileUpload","ngCookies","ngResource","ngSanitize","ngMaterial"])}(angular,window.crip||(window.crip={})),function(e,n){"use strict";function t(){}n.filemanager.config(t),t.$inject=[]}(angular,window.crip||(window.crip={})),function(e,n,t){"use strict";function r(t){function r(e,n){t.$broadcast(e,n)}function i(n,t,r){var i=n+"/";return e.isDefined(r)&&(i+=r+"/"),i+=t,a(i)}function a(e){return s+e}function o(){return f}function c(){return d}function u(e,n){var t={url:c(),name:e,ext:n||"html"};return"{url}/templates/{name}.{ext}".supplant(t)}var l=n("#settings"),s=l.data("base-url"),d=l.data("public-url"),f=JSON.parse(l.data("sizes").replaceAll("'",'"'));t.fireBroadcast=r,t.baseUrl=a,t.publicUrl=c,t.imgSizes=o,t.templatePath=u,t.dirUrl=function(e,n){return i("dir",e,n)},t.fileUrl=function(e,n){return i("file",e,n)}}t.filemanager.run(r),r.$inject=["$rootScope"]}(angular,jQuery,window.crip||(window.crip={})),function(e,n,t){"use strict";function r(n,t,r,i,a,o,c,u,l){function s(){n.canDeleteSelected=d,n.deleteSelected=f,n.canCreateFolder=p,n.createFolder=m,n.canRenameSelected=g,n.enableRenameSelected=h,n.canOpenSelected=v,n.openSelected=_,n.hasProperties=w,n.openProperties=C,n.canUpload=$,n.hasUploads=S,n.addFiles=M,n.upload=D,n.cancelUpload=b,n.order=l}function d(){return i.canDelete(a.getSelectedItem())}function f(n){e.isDefined(n)&&e.isDefined(n.stopPropagation)&&n.stopPropagation(),i["delete"](a.getSelectedItem()),a.deselect()}function p(){return i.canCreateFolder()}function m(e){i.createFolder(e,h)}function g(){return i.canRename(a.getSelectedItem())}function h(n){t.hide();var o=a.getSelectedItem();e.isDefined(n)&&e.isDefined(n.stopPropagation)&&n.stopPropagation(),o&&(i.enableRename(o),r('#{identifier} input[name="name"]'.supplant(o)))}function v(){return a.getSelectedItem().isDir}function _(){v()&&o.change(a.getSelectedItem())}function w(){return a.hasProperties(a.getSelectedItem())}function C(e){w()&&(e.stopPropagation(),u.open(a.getSelectedItem()))}function $(){return!0}function S(){return c.hasFiles()}function M(e){c.add(e)}function D(){c.start()}function b(){c.clean()}s()}t.filemanager.controller("ActionsController",r),r.$inject=["$scope","$mdMenu","focus","CripManagerActions","CripManagerContent","CripManagerLocation","CripManagerUploader","CripPropertiesModal","CripManagerContentOrder"]}(angular,jQuery,window.crip||(window.crip={})),function(e,n){"use strict";function t(e,n,t){function r(){e.goTo=i,e.goToRoot=a,e.breadcrumbHasItems=o,e.getBreadcrumbItems=c}function i(e){t.change(e)}function a(){i()}function o(){return n.hasItems()}function c(){return n.items}r()}n.filemanager.controller("BreadcrumbController",t),t.$inject=["$scope","CripManagerBreadcrumb","CripManagerLocation"]}(angular,window.crip),function(e,n){"use strict";function t(e,n,t,r){function i(){n.folderFilter=a,n.order=r,n.filters={image:!0,media:!0,document:!0,file:!0},n.getContent=function(){return t.get()}}function a(e,t,r){return e.isDir?!0:n.filters[e.type]}i()}n.filemanager.controller("DirContentController",t),t.$inject=["$log","$scope","CripManagerContent","CripManagerContentOrder"]}(angular,window.crip||(window.crip={})),function(e,n){"use strict";function t(e,n){function t(){e.hasUploads=r,e.files=i}function r(){return n.hasFiles()}function i(){return n.files}t()}n.filemanager.controller("FileUploadController",t),t.$inject=["$scope","CripManagerUploader"]}(angular,window.crip),function(e,n){"use strict";function t(e,n,t,r,i,a,o,c){function u(){n.click=l,n.dblclick=s,n.isSelected=d,n.enableRename=f,n.canDelete=p,n.deleteItem=m,n.hasProperties=g,n.openProperties=h,n.openMenu=v,n.canOpen=_,n.openDir=w,n.canRename=C}function l(e,n){e.stopPropagation(),i.updateSelected(),i.deselect(),i.selectSingle(n),t.hide()}function s(e,n){e.stopPropagation(),n.isDir&&a.change(n)}function d(e){return i.isSelected(e)}function f(e){e.stopPropagation&&e.stopPropagation(),t.hide();var n;e.is_extended?(n=e,i.selectSingle(n)):n=i.getSelectedItem(),o.enableRename(n),r('#{identifier} input[name="name"]'.supplant(n))}function p(e){return o.canDelete(e)}function m(e){o["delete"](e)}function g(e){return i.hasProperties(e)}function h(e){c.open(e)}function v(e,n){t.hide().then(function(){e.menu.$mdOpenMenu(n)})}function _(e){return e.isDir}function w(e){_(e)&&a.change(e)}function C(e){return!e.isDirUp}u()}n.filemanager.controller("ItemController",t),t.$inject=["$log","$scope","$mdMenu","focus","CripManagerContent","CripManagerLocation","CripManagerActions","CripPropertiesModal"]}(angular,window.crip||(window.crip={})),function(e,n){"use strict";function t(n,t,r,i,a){function o(){n.info(a),t.item=u(a),t.thumb=a.thumb,t.name=a.full_name,t.close=c}function c(){r.hide()}function u(e){return e.isDir?s(e):d(e)}function l(e,t){n.log("item_properties_modal_file_type_"+t.type),e.push({name:i("item_properties_modal_item_type"),value:i("item_properties_modal_file_type_"+t.type)},{name:i("item_properties_modal_name"),value:t.full_name},{name:i("item_properties_modal_date"),value:t.updated_at},{name:i("item_properties_modal_size"),value:t.getSize()})}function s(e){var n=[];return l(n,e),n}function d(n){var t=[];return l(t,n),""!==n.dir&&t.push({name:i("item_properties_modal_item_dir"),value:n.dir}),t.push({name:i("item_properties_modal_item_extension"),value:n.extension}),"image"===n.type&&e.hasValue(n.thumbs)?(t.push({name:i("item_properties_modal_item_url"),value:'<a href="{url}" target="_blank">{title}</a>'.supplant({url:n.url,title:i("item_properties_modal_size_dim").supplant(n.size)})}),e.forEach(n.thumbs,function(e,n){t.push({name:i("item_properties_modal_size_url_title").supplant({size:i("item_properties_modal_size_key_"+n)}),value:'<a href="{url}" target="_blank">{title}</a>'.supplant({url:e.url,title:i("item_properties_modal_size_dim").supplant(e.size)})})})):t.push({name:i("item_properties_modal_item_url"),value:'<a href="{url}" target="_blank">{full_name}</a>'.supplant(n)}),t}o()}n.filemanager.controller("ItemPropertiesController",t),t.$inject=["$log","$scope","$mdDialog","CripManagerTrans","item"]}(angular,window.crip),function(e,n){"use strict";function t(e,n,t,r,i,a){function o(){i().init(),t.init(),e.deselect=c,e.refreshContent=u}function c(){r.deselect(),n.hide()}function u(){t.change(a.current())}o()}n.filemanager.controller("RootController",t),t.$inject=["$scope","$mdMenu","CripManagerLocation","CripManagerContent","CripManagerTrans","CripManagerBreadcrumb"]}(angular,window.crip||(window.crip={})),function(e){"use strict";function n(e,n){return e(n.dirUrl(":dir/:name"),{dir:"@dir",name:"@name"},{create:{url:n.dirUrl(":dir/:name","create"),method:"POST"},deleteDir:{url:n.dirUrl(":dir","delete"),method:"GET"},deleteFile:{url:n.fileUrl(":dir/:name","delete"),method:"GET"},renameDir:{url:n.dirUrl(":dir","rename"),method:"GET"},renameFile:{url:n.fileUrl(":dir","rename"),method:"GET"}})}e.filemanager.service("Dir",n),n.$inject=["$resource","$rootScope"]}(window.crip||(window.crip={})),function(e,n){"use strict";function t(e,n){return e(n.baseUrl("translations"))}n.filemanager.service("CripManagerTranslations",t),t.$inject=["$resource","$rootScope"]}(angular,window.crip),function(e,n){"use strict";function t(n,t,r){var i={};return e.extend(i,n,t,r),i}n.filemanager.service("CripManagerActions",t),t.$inject=["CreateFolderService","DeleteService","RenameService"]}(angular,window.crip),function(e,n){"use strict";function t(n,t){function r(){return 0===f.items.length?{dir:"",name:""}:f.items[f.items.length-1]}function i(){return!!f.items.length}function a(e){o({dir:e.dir,name:e.name})}function o(n){var t=d.apply(n);f.items.splice(0,f.items.length),c(t),e.forEach(t.split("/").clean("",null),function(e){var n="";f.items.length>0&&(n=1===f.items.length?f.items[0].name:"{dir}/{name}".supplant(f.items[f.items.length-1])),f.items.push({name:e,dir:n,isActive:!1})}),f.items.length>0&&(f.items[f.items.length-1].isActive=!0)}function c(t){f.urlChangeIgnore=!0;var r="string"==typeof t?t.split("/"):t;r.clean(),r.length>0&&e.hasValue(r[0])?n.search("l",r):n.search("l",null),f.urlChangeIgnore=!1}function u(){return n.search()}function l(n,r){f.urlChangeIgnore||e.equals(n,r)||t.fireBroadcast("url-change",[s(n)])}function s(n){var t=null;return e.hasValue(n.l)&&(t=n.l,"object"==typeof t&&(t=t.join("/"))),t}function d(e){return this.dir=this.dir||"",this.name=this.name||"",e="{dir}/{name}".supplant(this),e.split("/").clean().join("/")}var f={items:[],hasItems:i,current:r,set:a,urlChangeIgnore:!1,resolveUrlObject:s,toString:d};return t.$watch(u,l),f}n.filemanager.service("CripManagerBreadcrumb",t),t.$inject=["$location","$rootScope"]}(angular,window.crip),function(e,n){"use strict";function t(n,t,r){function i(){return l.items}function a(){l.items.splice(0,l.items.length)}function o(t){return e.isDefined(t.is_extended)||n.extendItem(t),"Dir"!=typeof t&&(t=new r(t)),l.items.push(t),t}function c(e){l.items.splice(l.items.indexOf(e),1)}function u(e){return e?!e.isDirUp:!1}var l={items:[],get:i,add:o,remove:c,removeItems:a,hasProperties:u};return e.extend(l,t),l}n.filemanager.service("CripManagerContent",t),t.$inject=["ItemService","SelectService","Dir"]}(angular,window.crip),function(e,n){"use strict";function t(e){function n(e){var n="z {field}";if(e.isDir){if(e.isDirUp)return-1;n="0 {field}"}return n.supplant({field:e[i.field]})}function t(e){return-1!==a.indexOf(e)?!!i[e]:!1}function r(e){if(-1!==a.indexOf(e)){for(var n in a)a.hasOwnProperty(n)&&a[n]!=e&&(i[a[n]]=!1);i.field=e,i[e]?i.isReverse=!i.isReverse:i[e]=!0}}var i={by:n,isBy:t,set:r,field:"full_name",isReverse:!1,full_name:!0,bytes:!1,updated_at:!1},a=["full_name","bytes","updated_at"];return i}n.filemanager.service("CripManagerContentOrder",t),t.$inject=["$log"]}(angular,window.crip),function(e,n){"use strict";function t(n,t,r){function i(n){e.extend(n,{getItems:function(){var t=[];return e.forEach(n,function(e,n){l(e,n),this.push(e)},t),t}})}function a(e){return"list-item-"+e}function o(e){return e.substring(10)}function c(n){return n&&e.isDefined(n.type)&&"dir"===n.type}function u(e){return c(e)&&(""==e.name||null==e.name)}function l(n,t){e.extend(n,{is_extended:!0,rename:!1,identifier:a(t),isDir:c(n),isDirUp:u(n),update:s,"delete":p,getFullName:d,saveNewName:f,getSize:m})}function s(){return this.rename&&this.saveNewName(),this}function d(){return this.isDir||""===this.extension?this.name:"{name}.{extension}".supplant(this)}function f(){var n=this,t=o(n.identifier),r=n.menu;if(n.rename=!1,n.full_name!==n.getFullName()){var i=n.isDir?"$renameDir":"$renameFile";n[i]({old:n.full_name,"new":n.getFullName()},function(i){e.extend(n,l(i,t),{menu:r})})}}function p(){var e=this.isDir?"$deleteDir":"$deleteFile";this[e]({name:this.full_name})}function m(){return this.bytes.toBytes()}return{extend:i,extendItem:l}}n.filemanager.service("ItemService",t),t.$inject=["$log","$rootScope","CripManagerTrans"]}(angular,window.crip||(window.crip={})),function(e,n){"use strict";function t(n,t,r,i,a,o,c){function u(){l(s())}function l(n){var t={dir:null,name:null};e.isDefined(n)&&(t.dir=e.isEmpty(n.dir)?null:n.dir,t.name=e.isEmpty(n.name)?null:n.name),i.query(t,function(n){d(t),a.extend(n),c.removeItems(),c.deselect(),o.set(t),e.forEach(n.getItems(),function(e){c.add(e)})})}function s(){var r={dir:null,name:null},i=o.resolveUrlObject(t.search());if(e.hasValue(i))return r.dir=i,r;var a=n.get("location-dir"),c=n.get("location-dir-name");return(e.hasValue(a)||e.hasValue(c))&&(r.dir=a,e.isEmpty(c)&&(c=""),r.name=c),r}function d(e){n.put("location-dir",e.dir||""),n.put("location-dir-name",e.name||"")}return r.$on("url-change",function(e,n){l({dir:n[0]})}),{init:u,change:l,current:{}}}n.filemanager.service("CripManagerLocation",t),t.$inject=["$cookies","$location","$rootScope","Dir","ItemService","CripManagerBreadcrumb","CripManagerContent"]}(angular,window.crip),function(e,n){"use strict";function t(e,n,t){function r(r){return t.hasProperties(r)?void e.show({clickOutsideToClose:!0,openFrom:"#"+r.identifier,closeTo:"#"+r.identifier,templateUrl:n.templatePath("item-properties-modal"),controller:"ItemPropertiesController",locals:{item:r}}):!1}return{open:r}}n.filemanager.service("CripPropertiesModal",t),t.$inject=["$mdDialog","$rootScope","CripManagerContent"]}(angular,window.crip),function(e,n){"use strict";function t(e){var n={};return function(t){return t?n[t]:{init:function(){n=e.get()}}}}n.filemanager.service("CripManagerTrans",t),t.$inject=["CripManagerTranslations"]}(angular,window.crip),function(e,n){"use strict";function t(n,t,r,i){function a(n){e.forEach(n,function(n){n.progress=0,n.id=s.files.length,n.isHtml5=e.isHtml5,n.error=!1,s.files.push(n)})}function o(){return s.files.length>0}function c(){return o()?(s.settings.url.dir=t.toString.apply(t.current()),void e.forEach(s.files,u)):!1}function u(e){var n=i.upload({url:"{root}/{dir}".supplant(s.settings.url),data:{file:e}});n.then(function(n){e.progress=100,s.files.removeItem(e.id,"id"),r.add(n.data)},function(n){e.error=!0,e.progress=100},function(n){e.progress=Math.min(100,parseInt(90*n.loaded/n.total))})}function l(){s.files=[]}var s={files:[],add:a,hasFiles:o,start:c,clean:l,settings:{status:200,error:"",url:{root:n.fileUrl("upload"),dir:""}}};return s}n.filemanager.service("CripManagerUploader",t),t.$inject=["$rootScope","CripManagerBreadcrumb","CripManagerContent","Upload"]}(angular,window.crip),function(e,n){"use strict";function t(n,t,r,i){function a(){return!c._createInProgress}function o(i,o){return a()?(c._createInProgress=!0,void n.create(t.current(),{name:i},function(n){c._createInProgress=!1;var t=r.add(n);r.selectSingle(t),e.isFunction(o)&&o(t)})):!1}var c={_createInProgress:!1,canCreateFolder:a,createFolder:o};return c}n.filemanager.service("CreateFolderService",t),t.$inject=["Dir","CripManagerBreadcrumb","CripManagerContent","RenameService"]}(angular,window.crip),function(e,n){"use strict";function t(){function e(e){return e?!e.isDirUp:!1}function n(n){return e(n)?n["delete"]():!1}return{canDelete:e,"delete":n}}n.filemanager.service("DeleteService",t)}(angular,window.crip||(window.crip={})),function(e,n){"use strict";function t(){function e(e){return e?!e.isDirUp:!1}function n(n){return e(n)?n.rename=!0:!1}function t(n){return e(n)?n.update():!1}return{canRename:e,enableRename:n,rename:t}}n.filemanager.service("RenameService",t)}(angular,window.crip),function(e,n){"use strict";function t(){function n(){return!!s.selected.length}function t(t){if(!n())return!1;var r=!1;return e.forEach(s.selected,function(n){e.equals(t,n)&&(r=!0)}),r}function r(){return 1===s.selected.length}function i(){return r()?s.selected[0]:!1}function a(){return s.selected}function o(e){s.selected.push(e)}function c(){l(),s.selected.splice(0,s.selected.length)}function u(e){c(),o(e)}function l(){e.forEach(a(),function(e){e.update()})}var s={selected:[],select:o,selectSingle:u,deselect:c,isSelected:t,isSelectedOne:r,isSelectedAny:n,getSelectedItem:i,getSelectedItems:a,updateSelected:l};return s}n.filemanager.service("SelectService",t)}(angular,window.crip);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9zb3VyY2UvbW9kdWxlLmpzIiwiL3NvdXJjZS9jb25maWcuanMiLCIvc291cmNlL3J1bi5qcyIsIi9zb3VyY2UvY29udHJvbGxlcnMvQWN0aW9uc0NvbnRyb2xsZXIuanMiLCIvc291cmNlL2NvbnRyb2xsZXJzL0JyZWFkY3J1bWJDb250cm9sbGVyLmpzIiwiL3NvdXJjZS9jb250cm9sbGVycy9EaXJDb250ZW50Q29udHJvbGxlci5qcyIsIi9zb3VyY2UvY29udHJvbGxlcnMvRmlsZVVwbG9hZENvbnRyb2xsZXIuanMiLCIvc291cmNlL2NvbnRyb2xsZXJzL0l0ZW1Db250cm9sbGVyLmpzIiwiL3NvdXJjZS9jb250cm9sbGVycy9JdGVtUHJvcGVydGllc0NvbnRyb2xsZXIuanMiLCIvc291cmNlL2NvbnRyb2xsZXJzL1Jvb3RDb250cm9sbGVyLmpzIiwiL3NvdXJjZS9yZXNvdXJjZXMvRGlyLmpzIiwiL3NvdXJjZS9yZXNvdXJjZXMvVHJhbnNsYXRpb25zLmpzIiwiL3NvdXJjZS9zZXJ2aWNlcy9BY3Rpb25zLmpzIiwiL3NvdXJjZS9zZXJ2aWNlcy9CcmVhZGNydW1iLmpzIiwiL3NvdXJjZS9zZXJ2aWNlcy9Db250ZW50LmpzIiwiL3NvdXJjZS9zZXJ2aWNlcy9Db250ZW50T3JkZXIuanMiLCIvc291cmNlL3NlcnZpY2VzL0l0ZW1TZXJ2aWNlLmpzIiwiL3NvdXJjZS9zZXJ2aWNlcy9Mb2NhdGlvbi5qcyIsIi9zb3VyY2Uvc2VydmljZXMvUHJvcGVydGllc01vZGFsLmpzIiwiL3NvdXJjZS9zZXJ2aWNlcy9UcmFucy5qcyIsIi9zb3VyY2Uvc2VydmljZXMvVXBsb2FkZXIuanMiLCIvc291cmNlL3NlcnZpY2VzL2FjdGlvbnMvQ3JlYXRlRm9sZGVyU2VydmljZS5qcyIsIi9zb3VyY2Uvc2VydmljZXMvYWN0aW9ucy9EZWxldGVTZXJ2aWNlLmpzIiwiL3NvdXJjZS9zZXJ2aWNlcy9hY3Rpb25zL1JlbmFtZVNlcnZpY2UuanMiLCIvc291cmNlL3NlcnZpY2VzL2NvbnRlbnQvU2VsZWN0U2VydmljZS5qcyJdLCJuYW1lcyI6WyJuZyIsImNyaXAiLCJmaWxlbWFuYWdlciIsIm1vZHVsZSIsImFuZ3VsYXIiLCJ3aW5kb3ciLCJNYW5hZ2VyR3JpZENvbmZpZyIsImNvbmZpZyIsIiRpbmplY3QiLCIkIiwiUnVuIiwiJHJvb3RTY29wZSIsImJyb2FkY2FzdCIsImV2ZW50TmFtZSIsImFyZ3MiLCIkYnJvYWRjYXN0IiwiYWN0aW9uVXJsIiwicm9vdCIsImRpciIsImFjdGlvbiIsInBhdGgiLCJpc0RlZmluZWQiLCJiYXNlVXJsIiwiYmFzZV91cmwiLCJpbWdTaXplcyIsImltZ19zaXplcyIsInB1YmxpY1VybCIsInB1YmxpY191cmwiLCJ0ZW1wbGF0ZVBhdGgiLCJ0ZW1wbGF0ZV9uYW1lIiwiZXh0ZW5zaW9uIiwidG1wIiwidXJsIiwibmFtZSIsImV4dCIsInN1cHBsYW50IiwiJHNldHRpbmdzIiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsInJlcGxhY2VBbGwiLCJmaXJlQnJvYWRjYXN0IiwiZGlyVXJsIiwiZmlsZVVybCIsInJ1biIsImpRdWVyeSIsIkFjdGlvbnNDb250cm9sbGVyIiwiJHNjb3BlIiwiJG1kTWVudSIsImZvY3VzIiwiQWN0aW9ucyIsIkNvbnRlbnQiLCJMb2NhdGlvbiIsIlVwbG9hZGVyIiwiUHJvcGVydGllc01vZGFsIiwiQ29udGVudE9yZGVyIiwiYWN0aXZhdGUiLCJjYW5EZWxldGVTZWxlY3RlZCIsImRlbGV0ZVNlbGVjdGVkIiwiY2FuQ3JlYXRlRm9sZGVyIiwiY3JlYXRlRm9sZGVyIiwiY2FuUmVuYW1lU2VsZWN0ZWQiLCJlbmFibGVSZW5hbWVTZWxlY3RlZCIsImNhbk9wZW5TZWxlY3RlZCIsIm9wZW5TZWxlY3RlZCIsImhhc1Byb3BlcnRpZXMiLCJvcGVuUHJvcGVydGllcyIsImNhblVwbG9hZCIsImhhc1VwbG9hZHMiLCJhZGRGaWxlcyIsInVwbG9hZCIsImNhbmNlbFVwbG9hZCIsIm9yZGVyIiwiY2FuRGVsZXRlIiwiZ2V0U2VsZWN0ZWRJdGVtIiwiJGV2ZW50Iiwic3RvcFByb3BhZ2F0aW9uIiwiZGVzZWxlY3QiLCJjYW5SZW5hbWUiLCJoaWRlIiwiaXRlbSIsImVuYWJsZVJlbmFtZSIsImlzRGlyIiwiY2hhbmdlIiwib3BlbiIsImhhc0ZpbGVzIiwiZmlsZXMiLCJhZGQiLCJzdGFydCIsImNsZWFuIiwiY29udHJvbGxlciIsIkJyZWFkY3J1bWJDb250cm9sbGVyIiwiQnJlYWRjcnVtYiIsImdvVG8iLCJnb1RvUm9vdCIsImJyZWFkY3J1bWJIYXNJdGVtcyIsImdldEJyZWFkY3J1bWJJdGVtcyIsImZvbGRlciIsImhhc0l0ZW1zIiwiaXRlbXMiLCJEaXJDb250ZW50Q29udHJvbGxlciIsIiRsb2ciLCJmb2xkZXJGaWx0ZXIiLCJmaWx0ZXJzIiwiaW1hZ2UiLCJtZWRpYSIsImRvY3VtZW50IiwiZmlsZSIsImdldENvbnRlbnQiLCJnZXQiLCJ2YWx1ZSIsImluZGV4IiwiYXJyYXkiLCJ0eXBlIiwiRmlsZVVwbG9hZENvbnRyb2xsZXIiLCJJdGVtQ29udHJvbGxlciIsImNsaWNrIiwiZGJsY2xpY2siLCJpc1NlbGVjdGVkIiwiZGVsZXRlSXRlbSIsIm9wZW5NZW51IiwiY2FuT3BlbiIsIm9wZW5EaXIiLCJlIiwidXBkYXRlU2VsZWN0ZWQiLCJzZWxlY3RTaW5nbGUiLCJpc19leHRlbmRlZCIsInRoZW4iLCJtZW51IiwiJG1kT3Blbk1lbnUiLCJpc0RpclVwIiwiSXRlbVByb3BlcnRpZXNDb250cm9sbGVyIiwiJG1kRGlhbG9nIiwiVHJhbnMiLCJpbmZvIiwicmVzb2x2ZUl0ZW1EZXRhaWxzIiwidGh1bWIiLCJmdWxsX25hbWUiLCJjbG9zZSIsInJlc29sdmVEaXJEZXRhaWxzIiwicmVzb2x2ZUZpbGVEZXRhaWxzIiwiZGVmYXVsdERldGFpbHMiLCJkZXRhaWxzIiwibG9nIiwicHVzaCIsInVwZGF0ZWRfYXQiLCJnZXRTaXplIiwiaGFzVmFsdWUiLCJ0aHVtYnMiLCJ0aXRsZSIsInNpemUiLCJmb3JFYWNoIiwidmFsIiwiUm9vdENvbnRyb2xsZXIiLCJpbml0IiwicmVmcmVzaENvbnRlbnQiLCJjdXJyZW50IiwiRGlyIiwiJHJlc291cmNlIiwiY3JlYXRlIiwibWV0aG9kIiwiZGVsZXRlRGlyIiwiZGVsZXRlRmlsZSIsInJlbmFtZURpciIsInJlbmFtZUZpbGUiLCJzZXJ2aWNlIiwiVHJhbnNsYXRpb25zIiwiQ3JlYXRlRm9sZGVyIiwiRGVsZXRlIiwiUmVuYW1lIiwic2NvcGUiLCJleHRlbmQiLCIkbG9jYXRpb24iLCJicmVhZGNydW1iIiwibGVuZ3RoIiwic2V0TG9jYXRpb24iLCJvbkxvY2F0aW9uQ2hhbmdlIiwic3RyaW5nX3ZhbHVlIiwidG9TdHJpbmciLCJhcHBseSIsInNwbGljZSIsInNldFVybExvY2F0aW9uIiwic3BsaXQiLCJ2IiwiaXNBY3RpdmUiLCJwYXJ0cyIsInVybENoYW5nZUlnbm9yZSIsImxvY2F0aW9uIiwic2VhcmNoIiwib25VcmxMb2NhdGlvbkNoYW5nZSIsIm4iLCJvIiwiZXF1YWxzIiwicmVzb2x2ZVVybE9iamVjdCIsImwiLCJqb2luIiwidGhpcyIsInNldCIsIiR3YXRjaCIsIkl0ZW1TZXJ2aWNlIiwiU2VsZWN0U2VydmljZSIsImdldEl0ZW1zIiwiY29udGVudCIsInJlbW92ZUl0ZW1zIiwiZXh0ZW5kSXRlbSIsInJlbW92ZSIsImluZGV4T2YiLCJvcmRlckJ5IiwidGV4dCIsImZpZWxkIiwiaXNCeSIsImFsbG93ZWQiLCJzZXRGaWVsZCIsInAiLCJoYXNPd25Qcm9wZXJ0eSIsImlzUmV2ZXJzZSIsImJ5IiwiYnl0ZXMiLCJyZXNvdXJjZURhdGEiLCJrIiwiaWRHZW4iLCJrZXkiLCJnZXRLZXkiLCJpZGVudGlmaWVyIiwic3Vic3RyaW5nIiwicmVuYW1lIiwidXBkYXRlIiwiZGVsZXRlIiwiZ2V0RnVsbE5hbWUiLCJzYXZlTmV3TmFtZSIsInNlbGYiLCJvbGQiLCJuZXciLCJyZXNwb25zZSIsInRvQnl0ZXMiLCJDaGFuZ2VMb2NhdGlvblNlcnZpY2UiLCIkY29va2llcyIsImluaXRpYWxMb2FkIiwiZ2V0TG9jYXRpb25Gcm9tQ29va2llIiwiaXNFbXB0eSIsInF1ZXJ5IiwiciIsInVwZGF0ZUNvb2tpZSIsImNvb2tpZURpciIsInB1dCIsIiRvbiIsImV2ZW50Iiwic2hvdyIsImNsaWNrT3V0c2lkZVRvQ2xvc2UiLCJvcGVuRnJvbSIsImNsb3NlVG8iLCJ0ZW1wbGF0ZVVybCIsImxvY2FscyIsInRyYW5zbGF0aW9ucyIsIlVwbG9hZCIsImFkZEZpbGUiLCJwcm9ncmVzcyIsImlkIiwidXBsb2FkZXIiLCJpc0h0bWw1IiwiZXJyb3IiLCJzZXR0aW5ncyIsIm9uU2luZ2xlRmlsZSIsInJlbW92ZUl0ZW0iLCJldnQiLCJNYXRoIiwibWluIiwicGFyc2VJbnQiLCJsb2FkZWQiLCJ0b3RhbCIsInN0YXR1cyIsIkNyZWF0ZUZvbGRlclNlcnZpY2UiLCJfY3JlYXRlSW5Qcm9ncmVzcyIsImNhbGxiYWNrIiwiaXNGdW5jdGlvbiIsIkRlbGV0ZVNlcnZpY2UiLCJSZW5hbWVTZXJ2aWNlIiwiaXNTZWxlY3RlZEFueUl0ZW0iLCJzZWxlY3QiLCJzZWxlY3RlZCIsImlzU2VsZWN0ZWRJdGVtIiwic2VsZWN0ZWRfaXRlbSIsImlzU2VsZWN0ZWRPbmVJdGVtIiwiZ2V0U2VsZWN0ZWRJdGVtcyIsInNlbGVjdEl0ZW0iLCJkZXNlbGVjdFNlbGVjdGVkSXRlbXMiLCJ1cGRhdGVTZWxlY3RlZEl0ZW1zIiwic2VsZWN0U2luZ2xlSXRlbSIsImlzU2VsZWN0ZWRPbmUiLCJpc1NlbGVjdGVkQW55Il0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLFlBRUFBLEdBQUFDLFlBQUFGLEVBQUFHLE9BQUEscUJBQ0EsWUFDQSwrQkFDQSxzQkFDQSxlQUNBLFlBQ0EsYUFDQSxhQUNBLGdCQUVBQyxRQUFBQyxPQUFBSixPQUFBSSxPQUFBSixVQ2JBLFNBQUFELEVBQUFDLEdBQ0EsWUFPQSxTQUFBSyxNQUxBTCxFQUFBQyxZQUNBSyxPQUFBRCxHQUVBQSxFQUFBRSxZQU9BSixRQUFBQyxPQUFBSixPQUFBSSxPQUFBSixVQ2JBLFNBQUFE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bi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyID0gbmcubW9kdWxlKCdjcmlwLmZpbGUtbWFuYWdlcicsIFtcclxuICAgICAgICAnY3JpcC5jb3JlJyxcclxuICAgICAgICAnY3JpcC50cmFuc3BhcmVudC1wcm9ncmVzc2JhcicsXHJcbiAgICAgICAgJ2FuZ3VsYXItbG9hZGluZy1iYXInLFxyXG4gICAgICAgICduZ0ZpbGVVcGxvYWQnLFxyXG4gICAgICAgICduZ0Nvb2tpZXMnLFxyXG4gICAgICAgICduZ1Jlc291cmNlJyxcclxuICAgICAgICAnbmdTYW5pdGl6ZScsXHJcbiAgICAgICAgJ25nTWF0ZXJpYWwnXHJcbiAgICBdKVxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCB8fCAod2luZG93LmNyaXAgPSB7fSkpOyIsIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyXHJcbiAgICAgICAgLmNvbmZpZyhNYW5hZ2VyR3JpZENvbmZpZyk7XHJcblxyXG4gICAgTWFuYWdlckdyaWRDb25maWcuJGluamVjdCA9IFtdO1xyXG5cclxuICAgIGZ1bmN0aW9uIE1hbmFnZXJHcmlkQ29uZmlnKCkge1xyXG5cclxuXHJcbiAgICB9XHJcblxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCB8fCAod2luZG93LmNyaXAgPSB7fSkpOyIsIihmdW5jdGlvbiAobmcsICQsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyXHJcbiAgICAgICAgLnJ1bihSdW4pO1xyXG5cclxuICAgIFJ1bi4kaW5qZWN0ID0gW1xyXG4gICAgICAgICckcm9vdFNjb3BlJ1xyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBSdW4oJHJvb3RTY29wZSkge1xyXG4gICAgICAgIHZhciAkc2V0dGluZ3MgPSAkKCcjc2V0dGluZ3MnKSxcclxuICAgICAgICAgICAgYmFzZV91cmwgPSAkc2V0dGluZ3MuZGF0YSgnYmFzZS11cmwnKSxcclxuICAgICAgICAgICAgcHVibGljX3VybCA9ICRzZXR0aW5ncy5kYXRhKCdwdWJsaWMtdXJsJyksXHJcbiAgICAgICAgICAgIGltZ19zaXplcyA9IEpTT04ucGFyc2UoJHNldHRpbmdzLmRhdGEoJ3NpemVzJykucmVwbGFjZUFsbChcIidcIiwgJ1wiJykpO1xyXG5cclxuICAgICAgICAkcm9vdFNjb3BlLmZpcmVCcm9hZGNhc3QgPSBicm9hZGNhc3Q7XHJcbiAgICAgICAgJHJvb3RTY29wZS5iYXNlVXJsID0gYmFzZVVybDtcclxuICAgICAgICAkcm9vdFNjb3BlLnB1YmxpY1VybCA9IHB1YmxpY1VybDtcclxuICAgICAgICAkcm9vdFNjb3BlLmltZ1NpemVzID0gaW1nU2l6ZXM7XHJcbiAgICAgICAgJHJvb3RTY29wZS50ZW1wbGF0ZVBhdGggPSB0ZW1wbGF0ZVBhdGg7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBwbHVnaW4gZGlyIGFjdGlvbiB1cmxcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkaXJcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2FjdGlvbl1cclxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgICRyb290U2NvcGUuZGlyVXJsID0gZnVuY3Rpb24gKGRpciwgYWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhY3Rpb25VcmwoJ2RpcicsIGRpciwgYWN0aW9uKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgcGx1Z2luIGZpbGUgYWN0aW9uIHVybFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGRpclxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbYWN0aW9uXVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgJHJvb3RTY29wZS5maWxlVXJsID0gZnVuY3Rpb24gKGRpciwgYWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhY3Rpb25VcmwoJ2ZpbGUnLCBkaXIsIGFjdGlvbik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRmlyZSBldmVudCBvbiByb290IHNjb3BlIGZvciBhbGwgY29udHJvbGxlcnNcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWVcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBhcmdzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gYnJvYWRjYXN0KGV2ZW50TmFtZSwgYXJncykge1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoZXZlbnROYW1lLCBhcmdzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSByb290XHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGRpclxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbYWN0aW9uXVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gYWN0aW9uVXJsKHJvb3QsIGRpciwgYWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gcm9vdCArICcvJztcclxuICAgICAgICAgICAgaWYgKG5nLmlzRGVmaW5lZChhY3Rpb24pKSB7XHJcbiAgICAgICAgICAgICAgICBwYXRoICs9IGFjdGlvbiArICcvJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBhdGggKz0gZGlyO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGJhc2VVcmwocGF0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgcGx1Z2luIGJhc2UgdXJsXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aFxyXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gYmFzZVVybChwYXRoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBiYXNlX3VybCArIHBhdGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgaW1hZ2Ugc2l6ZXNcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBpbWdTaXplcygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGltZ19zaXplcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBwdWJsaWMgdXJsXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyB7U3RyaW5nfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHB1YmxpY1VybCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHB1YmxpY191cmw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgZnVsbCBwYXRoIHRvIHRlbXBsYXRlXHJcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHRlbXBsYXRlX25hbWVcclxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gW2V4dGVuc2lvbl1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiB0ZW1wbGF0ZVBhdGgodGVtcGxhdGVfbmFtZSwgZXh0ZW5zaW9uKSB7XHJcbiAgICAgICAgICAgIHZhciB0bXAgPSB7XHJcbiAgICAgICAgICAgICAgICB1cmw6IHB1YmxpY1VybCgpLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogdGVtcGxhdGVfbmFtZSxcclxuICAgICAgICAgICAgICAgIGV4dDogZXh0ZW5zaW9uIHx8ICdodG1sJ1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuICd7dXJsfS90ZW1wbGF0ZXMve25hbWV9LntleHR9Jy5zdXBwbGFudCh0bXApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoYW5ndWxhciwgalF1ZXJ5LCB3aW5kb3cuY3JpcCB8fCAod2luZG93LmNyaXAgPSB7fSkpOyIsIihmdW5jdGlvbiAobmcsICQsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0FjdGlvbnNDb250cm9sbGVyJywgQWN0aW9uc0NvbnRyb2xsZXIpO1xyXG5cclxuICAgIEFjdGlvbnNDb250cm9sbGVyLiRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRzY29wZScsICckbWRNZW51JywgJ2ZvY3VzJywgJ0NyaXBNYW5hZ2VyQWN0aW9ucycsICdDcmlwTWFuYWdlckNvbnRlbnQnLCAnQ3JpcE1hbmFnZXJMb2NhdGlvbicsXHJcbiAgICAgICAgJ0NyaXBNYW5hZ2VyVXBsb2FkZXInLCAnQ3JpcFByb3BlcnRpZXNNb2RhbCcsICdDcmlwTWFuYWdlckNvbnRlbnRPcmRlcidcclxuICAgIF07XHJcblxyXG4gICAgZnVuY3Rpb24gQWN0aW9uc0NvbnRyb2xsZXIoJHNjb3BlLCAkbWRNZW51LCBmb2N1cywgQWN0aW9ucywgQ29udGVudCwgTG9jYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVcGxvYWRlciwgUHJvcGVydGllc01vZGFsLCBDb250ZW50T3JkZXIpIHtcclxuICAgICAgICBhY3RpdmF0ZSgpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmNhbkRlbGV0ZVNlbGVjdGVkID0gY2FuRGVsZXRlU2VsZWN0ZWQ7XHJcbiAgICAgICAgICAgICRzY29wZS5kZWxldGVTZWxlY3RlZCA9IGRlbGV0ZVNlbGVjdGVkO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmNhbkNyZWF0ZUZvbGRlciA9IGNhbkNyZWF0ZUZvbGRlcjtcclxuICAgICAgICAgICAgJHNjb3BlLmNyZWF0ZUZvbGRlciA9IGNyZWF0ZUZvbGRlcjtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5jYW5SZW5hbWVTZWxlY3RlZCA9IGNhblJlbmFtZVNlbGVjdGVkO1xyXG4gICAgICAgICAgICAkc2NvcGUuZW5hYmxlUmVuYW1lU2VsZWN0ZWQgPSBlbmFibGVSZW5hbWVTZWxlY3RlZDtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5jYW5PcGVuU2VsZWN0ZWQgPSBjYW5PcGVuU2VsZWN0ZWQ7XHJcbiAgICAgICAgICAgICRzY29wZS5vcGVuU2VsZWN0ZWQgPSBvcGVuU2VsZWN0ZWQ7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuaGFzUHJvcGVydGllcyA9IGhhc1Byb3BlcnRpZXM7XHJcbiAgICAgICAgICAgICRzY29wZS5vcGVuUHJvcGVydGllcyA9IG9wZW5Qcm9wZXJ0aWVzO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmNhblVwbG9hZCA9IGNhblVwbG9hZDtcclxuICAgICAgICAgICAgJHNjb3BlLmhhc1VwbG9hZHMgPSBoYXNVcGxvYWRzO1xyXG4gICAgICAgICAgICAkc2NvcGUuYWRkRmlsZXMgPSBhZGRGaWxlcztcclxuICAgICAgICAgICAgJHNjb3BlLnVwbG9hZCA9IHVwbG9hZDtcclxuICAgICAgICAgICAgJHNjb3BlLmNhbmNlbFVwbG9hZCA9IGNhbmNlbFVwbG9hZDtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5vcmRlciA9IENvbnRlbnRPcmRlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERldGVybWluZXMgaWYgc2VsZWN0ZWQgaXRlbSBjYW4gYmUgZGVsZXRlZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2FuRGVsZXRlU2VsZWN0ZWQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBBY3Rpb25zLmNhbkRlbGV0ZShDb250ZW50LmdldFNlbGVjdGVkSXRlbSgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERlbGV0ZSBzZWxlY3RlZCBpdGVtXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gJGV2ZW50XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZGVsZXRlU2VsZWN0ZWQoJGV2ZW50KSB7XHJcbiAgICAgICAgICAgIC8vIGlmIGV2ZW50IGlzIHByZXNlbnRlZCwgc3RvcCBpdCBwcm9wYWdhdGlvblxyXG4gICAgICAgICAgICBpZiAobmcuaXNEZWZpbmVkKCRldmVudCkgJiYgbmcuaXNEZWZpbmVkKCRldmVudC5zdG9wUHJvcGFnYXRpb24pKSB7XHJcbiAgICAgICAgICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEFjdGlvbnMuZGVsZXRlKENvbnRlbnQuZ2V0U2VsZWN0ZWRJdGVtKCkpO1xyXG4gICAgICAgICAgICBDb250ZW50LmRlc2VsZWN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlcm1pbmVzIGlmIGNhbiBjcmVhdGUgbmV3IGZvbGRlclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2FuQ3JlYXRlRm9sZGVyKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gQWN0aW9ucy5jYW5DcmVhdGVGb2xkZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZSBuZXcgZm9sZGVyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUZvbGRlcihuYW1lKSB7XHJcbiAgICAgICAgICAgIEFjdGlvbnMuY3JlYXRlRm9sZGVyKG5hbWUsIGVuYWJsZVJlbmFtZVNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERldGVybWluZXMgaWYgc2VsZWN0ZWQgaXRlbSBjYW4gYmUgcmVuYW1lZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2FuUmVuYW1lU2VsZWN0ZWQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBBY3Rpb25zLmNhblJlbmFtZShDb250ZW50LmdldFNlbGVjdGVkSXRlbSgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEVuYWJsZSByZW5hbWUgZm9yIHNlbGVjdGVkIGl0ZW1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSAkZXZlbnRcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBlbmFibGVSZW5hbWVTZWxlY3RlZCgkZXZlbnQpIHtcclxuICAgICAgICAgICAgLy8gY2xvc2UgbWVudSBpZiBpcyBvcGVuIHdoZW4gZW5hYmxpbmcgcmVuYW1lIGZ1bmN0aW9uXHJcbiAgICAgICAgICAgICRtZE1lbnUuaGlkZSgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSBDb250ZW50LmdldFNlbGVjdGVkSXRlbSgpO1xyXG5cclxuICAgICAgICAgICAgLy8gaWYgZXZlbnQgaXMgcHJlc2VudGVkLCBzdG9wIGl0IHByb3BhZ2F0aW9uXHJcbiAgICAgICAgICAgIGlmIChuZy5pc0RlZmluZWQoJGV2ZW50KSAmJiBuZy5pc0RlZmluZWQoJGV2ZW50LnN0b3BQcm9wYWdhdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIEFjdGlvbnMuZW5hYmxlUmVuYW1lKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgZm9jdXMoJyN7aWRlbnRpZmllcn0gaW5wdXRbbmFtZT1cIm5hbWVcIl0nLnN1cHBsYW50KGl0ZW0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV0ZXJtaW5lcyBpZiBjYW4gb3BlbiBzZWxlY3RlZCBpdGVtXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjYW5PcGVuU2VsZWN0ZWQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBDb250ZW50LmdldFNlbGVjdGVkSXRlbSgpLmlzRGlyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogT3BlbiBzZWxlY3RlZCBkaXJlY3RvcnlcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBvcGVuU2VsZWN0ZWQoKSB7XHJcbiAgICAgICAgICAgIGlmICghY2FuT3BlblNlbGVjdGVkKCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBMb2NhdGlvbi5jaGFuZ2UoQ29udGVudC5nZXRTZWxlY3RlZEl0ZW0oKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlcm1pbmVzIGlzIHNlbGVjdGVkIGl0ZW0gY2FuIHByb3ZpZGUgcHJvcGVydGllc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gaGFzUHJvcGVydGllcygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbnRlbnQuaGFzUHJvcGVydGllcyhDb250ZW50LmdldFNlbGVjdGVkSXRlbSgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE9wZW4gaXRlbSBwcm9wZXJ0aWVzIHBvcC11cFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtICRldmVudFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5Qcm9wZXJ0aWVzKCRldmVudCkge1xyXG4gICAgICAgICAgICBpZiAoIWhhc1Byb3BlcnRpZXMoKSlcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgUHJvcGVydGllc01vZGFsLm9wZW4oQ29udGVudC5nZXRTZWxlY3RlZEl0ZW0oKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlcm1pbmVzIGlmIGZpbGUgY2FuIGJlIHVwbG9hZGVkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjYW5VcGxvYWQoKSB7XHJcbiAgICAgICAgICAgIC8vIGF0IHRoaXMgbW9tZW50IHdlIGNhbiB1cGxvYWQgdG8gYW55IG9wZW4gZGlyXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV0ZXJtaW5lcyBpZiB0aGVyZSBmaWxlcyBpbiBxdWV1ZSBmb3IgdXBsb2FkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBoYXNVcGxvYWRzKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gVXBsb2FkZXIuaGFzRmlsZXMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFkZCBmaWxlcyBmb3IgdXBsb2FkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBmaWxlc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGFkZEZpbGVzKGZpbGVzKSB7XHJcbiAgICAgICAgICAgIFVwbG9hZGVyLmFkZChmaWxlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTdGFydCB1cGxvYWQgZmlsZXMgZnJvbSBxdWV1ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHVwbG9hZCgpIHtcclxuICAgICAgICAgICAgVXBsb2FkZXIuc3RhcnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNhbmNlbFVwbG9hZCgpIHtcclxuICAgICAgICAgICAgVXBsb2FkZXIuY2xlYW4oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKGFuZ3VsYXIsIGpRdWVyeSwgd2luZG93LmNyaXAgfHwgKHdpbmRvdy5jcmlwID0ge30pKTsiLCIoZnVuY3Rpb24gKG5nLCBjcmlwKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgY3JpcC5maWxlbWFuYWdlclxyXG4gICAgICAgIC5jb250cm9sbGVyKCdCcmVhZGNydW1iQ29udHJvbGxlcicsIEJyZWFkY3J1bWJDb250cm9sbGVyKTtcclxuXHJcbiAgICBCcmVhZGNydW1iQ29udHJvbGxlci4kaW5qZWN0ID0gW1xyXG4gICAgICAgICckc2NvcGUnLCAnQ3JpcE1hbmFnZXJCcmVhZGNydW1iJywgJ0NyaXBNYW5hZ2VyTG9jYXRpb24nXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIEJyZWFkY3J1bWJDb250cm9sbGVyKCRzY29wZSwgQnJlYWRjcnVtYiwgTG9jYXRpb24pIHtcclxuICAgICAgICBhY3RpdmF0ZSgpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmdvVG8gPSBnb1RvO1xyXG4gICAgICAgICAgICAkc2NvcGUuZ29Ub1Jvb3QgPSBnb1RvUm9vdDtcclxuICAgICAgICAgICAgJHNjb3BlLmJyZWFkY3J1bWJIYXNJdGVtcyA9IGJyZWFkY3J1bWJIYXNJdGVtcztcclxuICAgICAgICAgICAgJHNjb3BlLmdldEJyZWFkY3J1bWJJdGVtcyA9IGdldEJyZWFkY3J1bWJJdGVtcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdvIHRvIHNwZWNpZmllZCBmb2xkZXJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBmb2xkZXJcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZm9sZGVyLmRpclxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmb2xkZXIubmFtZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGdvVG8oZm9sZGVyKSB7XHJcbiAgICAgICAgICAgIExvY2F0aW9uLmNoYW5nZShmb2xkZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR28gdG8gcm9vdCBmb2xkZXIgbG9jYXRpb25cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBnb1RvUm9vdCgpIHtcclxuICAgICAgICAgICAgZ29UbygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV0ZXJtaW5lcyBpcyBCcmVhZGNydW1iIGFueSBpdGVtXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBicmVhZGNydW1iSGFzSXRlbXMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBCcmVhZGNydW1iLmhhc0l0ZW1zKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgQnJlYWRjcnVtYiBpdGVtIGNvbGxlY3Rpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheX1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBnZXRCcmVhZGNydW1iSXRlbXMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBCcmVhZGNydW1iLml0ZW1zO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoYW5ndWxhciwgd2luZG93LmNyaXApOyIsIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0RpckNvbnRlbnRDb250cm9sbGVyJywgRGlyQ29udGVudENvbnRyb2xsZXIpO1xyXG5cclxuICAgIERpckNvbnRlbnRDb250cm9sbGVyLiRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRsb2cnLCAnJHNjb3BlJywgJ0NyaXBNYW5hZ2VyQ29udGVudCcsICdDcmlwTWFuYWdlckNvbnRlbnRPcmRlcidcclxuICAgIF07XHJcblxyXG4gICAgZnVuY3Rpb24gRGlyQ29udGVudENvbnRyb2xsZXIoJGxvZywgJHNjb3BlLCBDb250ZW50LCBDb250ZW50T3JkZXIpIHtcclxuICAgICAgICBhY3RpdmF0ZSgpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmZvbGRlckZpbHRlciA9IGZvbGRlckZpbHRlcjtcclxuICAgICAgICAgICAgJHNjb3BlLm9yZGVyID0gQ29udGVudE9yZGVyO1xyXG4gICAgICAgICAgICAkc2NvcGUuZmlsdGVycyA9IHtcclxuICAgICAgICAgICAgICAgIGltYWdlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbWVkaWE6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGZpbGU6IHRydWVcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5nZXRDb250ZW50ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29udGVudC5nZXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZm9sZGVyRmlsdGVyKHZhbHVlLCBpbmRleCwgYXJyYXkpIHtcclxuICAgICAgICAgICAgLy8gSWYgaXRlbSBpcyBkaXIsIGl0IHdpbGwgYmUgdmlzaWJsZVxyXG4gICAgICAgICAgICBpZiAodmFsdWUuaXNEaXIpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIC8vIFRPRE86IGFkZCBmaWx0ZXIgZW5hYmxlIHByb3BlcnR5IGFuZCBjaGVjayBpdCBoZXJlXHJcbiAgICAgICAgICAgIGlmKHRydWUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmZpbHRlcnNbdmFsdWUudHlwZV07XHJcblxyXG4gICAgICAgICAgICAvLyBpZiBmaWx0ZXIgZW5hYmxlIHByb3BlcnR5IGlzIGRpc2FibGVkLCBjb21wYXJlIHdpdGggYWxsb3dlZCB0eXBlXHJcbiAgICAgICAgICAgIC8vaWYgKFNldHRpbmdzLmdldFR5cGUoKSA9PSB2YWx1ZS50eXBlKVxyXG4gICAgICAgICAgICAvLyAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKGFuZ3VsYXIsIHdpbmRvdy5jcmlwIHx8ICh3aW5kb3cuY3JpcCA9IHt9KSk7IiwiKGZ1bmN0aW9uIChuZywgY3JpcCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuY29udHJvbGxlcignRmlsZVVwbG9hZENvbnRyb2xsZXInLCBGaWxlVXBsb2FkQ29udHJvbGxlcik7XHJcblxyXG4gICAgRmlsZVVwbG9hZENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJ0NyaXBNYW5hZ2VyVXBsb2FkZXInXTtcclxuXHJcbiAgICBmdW5jdGlvbiBGaWxlVXBsb2FkQ29udHJvbGxlcigkc2NvcGUsIFVwbG9hZGVyKSB7XHJcbiAgICAgICAgYWN0aXZhdGUoKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5oYXNVcGxvYWRzID0gaGFzVXBsb2FkcztcclxuICAgICAgICAgICAgJHNjb3BlLmZpbGVzID0gZmlsZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlcm1pbmVzIGlmIHRoZXJlIGZpbGVzIGluIHF1ZXVlIGZvciB1cGxvYWRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGhhc1VwbG9hZHMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBVcGxvYWRlci5oYXNGaWxlcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IGZpbGVzIGZyb20gcXVldWVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheX1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBmaWxlcygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFVwbG9hZGVyLmZpbGVzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCk7IiwiKGZ1bmN0aW9uIChuZywgY3JpcCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuY29udHJvbGxlcignSXRlbUNvbnRyb2xsZXInLCBJdGVtQ29udHJvbGxlcik7XHJcblxyXG4gICAgSXRlbUNvbnRyb2xsZXIuJGluamVjdCA9IFtcclxuICAgICAgICAnJGxvZycsICckc2NvcGUnLCAnJG1kTWVudScsICdmb2N1cycsICdDcmlwTWFuYWdlckNvbnRlbnQnLCAnQ3JpcE1hbmFnZXJMb2NhdGlvbicsXHJcbiAgICAgICAgJ0NyaXBNYW5hZ2VyQWN0aW9ucycsICdDcmlwUHJvcGVydGllc01vZGFsJ1xyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBJdGVtQ29udHJvbGxlcigkbG9nLCAkc2NvcGUsICRtZE1lbnUsIGZvY3VzLCBDb250ZW50LCBMb2NhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFjdGlvbnMsIFByb3BlcnRpZXNNb2RhbCkge1xyXG4gICAgICAgIGFjdGl2YXRlKCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuY2xpY2sgPSBjbGljaztcclxuICAgICAgICAgICAgJHNjb3BlLmRibGNsaWNrID0gZGJsY2xpY2s7XHJcbiAgICAgICAgICAgICRzY29wZS5pc1NlbGVjdGVkID0gaXNTZWxlY3RlZDtcclxuICAgICAgICAgICAgJHNjb3BlLmVuYWJsZVJlbmFtZSA9IGVuYWJsZVJlbmFtZTtcclxuICAgICAgICAgICAgJHNjb3BlLmNhbkRlbGV0ZSA9IGNhbkRlbGV0ZTtcclxuICAgICAgICAgICAgJHNjb3BlLmRlbGV0ZUl0ZW0gPSBkZWxldGVJdGVtO1xyXG4gICAgICAgICAgICAkc2NvcGUuaGFzUHJvcGVydGllcyA9IGhhc1Byb3BlcnRpZXM7XHJcbiAgICAgICAgICAgICRzY29wZS5vcGVuUHJvcGVydGllcyA9IG9wZW5Qcm9wZXJ0aWVzO1xyXG4gICAgICAgICAgICAkc2NvcGUub3Blbk1lbnUgPSBvcGVuTWVudTtcclxuICAgICAgICAgICAgJHNjb3BlLmNhbk9wZW4gPSBjYW5PcGVuO1xyXG4gICAgICAgICAgICAkc2NvcGUub3BlbkRpciA9IG9wZW5EaXI7XHJcbiAgICAgICAgICAgICRzY29wZS5jYW5SZW5hbWUgPSBjYW5SZW5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBPbiBpdGVtIGNsaWNrXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZVxyXG4gICAgICAgICAqIEBwYXJhbSBpdGVtXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xpY2soZSwgaXRlbSkge1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgQ29udGVudC51cGRhdGVTZWxlY3RlZCgpO1xyXG4gICAgICAgICAgICBDb250ZW50LmRlc2VsZWN0KCk7XHJcbiAgICAgICAgICAgIENvbnRlbnQuc2VsZWN0U2luZ2xlKGl0ZW0pO1xyXG4gICAgICAgICAgICAkbWRNZW51LmhpZGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE9uIGl0ZW0gZG91YmxlIGNsaWNrXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZVxyXG4gICAgICAgICAqIEBwYXJhbSBpdGVtXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZGJsY2xpY2soZSwgaXRlbSkge1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAvLyRsb2cuaW5mbygnZGJsY2xpY2snLCBpdGVtKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpdGVtLmlzRGlyKSB7XHJcbiAgICAgICAgICAgICAgICBMb2NhdGlvbi5jaGFuZ2UoaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERldGVybWluZXMgaXMgaXRlbSBzZWxlY3RlZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGl0ZW1cclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBpc1NlbGVjdGVkKGl0ZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbnRlbnQuaXNTZWxlY3RlZChpdGVtKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEVuYWJsZSBpdGVtIHJlbmFtZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtICRldmVudFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGVuYWJsZVJlbmFtZSgkZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKCRldmVudC5zdG9wUHJvcGFnYXRpb24pXHJcbiAgICAgICAgICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICAkbWRNZW51LmhpZGUoKTtcclxuICAgICAgICAgICAgdmFyIGl0ZW07XHJcblxyXG4gICAgICAgICAgICBpZigkZXZlbnQuaXNfZXh0ZW5kZWQpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0gPSAkZXZlbnQ7XHJcbiAgICAgICAgICAgICAgICBDb250ZW50LnNlbGVjdFNpbmdsZShpdGVtKTtcclxuICAgICAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgICAgICBpdGVtID0gQ29udGVudC5nZXRTZWxlY3RlZEl0ZW0oKTtcclxuXHJcbiAgICAgICAgICAgIEFjdGlvbnMuZW5hYmxlUmVuYW1lKGl0ZW0pO1xyXG4gICAgICAgICAgICBmb2N1cygnI3tpZGVudGlmaWVyfSBpbnB1dFtuYW1lPVwibmFtZVwiXScuc3VwcGxhbnQoaXRlbSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2FuRGVsZXRlKGl0ZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIEFjdGlvbnMuY2FuRGVsZXRlKGl0ZW0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGVsZXRlIGl0ZW0gZnJvbSBmaWxlIHN5c3RlbVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGl0ZW1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBkZWxldGVJdGVtKGl0ZW0pIHtcclxuICAgICAgICAgICAgQWN0aW9ucy5kZWxldGUoaXRlbSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBoYXNQcm9wZXJ0aWVzKGl0ZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbnRlbnQuaGFzUHJvcGVydGllcyhpdGVtKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5Qcm9wZXJ0aWVzKGl0ZW0pIHtcclxuICAgICAgICAgICAgUHJvcGVydGllc01vZGFsLm9wZW4oaXRlbSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBvcGVuTWVudShpdGVtLCAkZXZlbnQpIHtcclxuICAgICAgICAgICAgJG1kTWVudS5oaWRlKCkudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLm1lbnUuJG1kT3Blbk1lbnUoJGV2ZW50KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBjYW5PcGVuKGl0ZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0uaXNEaXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBvcGVuRGlyKGRpcikge1xyXG4gICAgICAgICAgICBpZiAoIWNhbk9wZW4oZGlyKSlcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIExvY2F0aW9uLmNoYW5nZShkaXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2FuUmVuYW1lKGl0ZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuICFpdGVtLmlzRGlyVXA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCB8fCAod2luZG93LmNyaXAgPSB7fSkpOyIsIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuY29udHJvbGxlcignSXRlbVByb3BlcnRpZXNDb250cm9sbGVyJywgSXRlbVByb3BlcnRpZXNDb250cm9sbGVyKTtcclxuXHJcbiAgICBJdGVtUHJvcGVydGllc0NvbnRyb2xsZXIuJGluamVjdCA9IFtcclxuICAgICAgICAnJGxvZycsICckc2NvcGUnLCAnJG1kRGlhbG9nJywgJ0NyaXBNYW5hZ2VyVHJhbnMnLCAnaXRlbSdcclxuICAgIF07XHJcblxyXG4gICAgZnVuY3Rpb24gSXRlbVByb3BlcnRpZXNDb250cm9sbGVyKCRsb2csICRzY29wZSwgJG1kRGlhbG9nLCBUcmFucywgaXRlbSkge1xyXG4gICAgICAgIGFjdGl2YXRlKCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgICAgICAgICAkbG9nLmluZm8oaXRlbSk7XHJcbiAgICAgICAgICAgICRzY29wZS5pdGVtID0gcmVzb2x2ZUl0ZW1EZXRhaWxzKGl0ZW0pO1xyXG4gICAgICAgICAgICAkc2NvcGUudGh1bWIgPSBpdGVtLnRodW1iO1xyXG4gICAgICAgICAgICAkc2NvcGUubmFtZSA9IGl0ZW0uZnVsbF9uYW1lO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmNsb3NlID0gY2xvc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIaWRlIG1vZGFsXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xvc2UoKSB7XHJcbiAgICAgICAgICAgICRtZERpYWxvZy5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXNvbHZlIGl0ZW0gZGV0YWlsc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGl0ZW1cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZUl0ZW1EZXRhaWxzKGl0ZW0pIHtcclxuICAgICAgICAgICAgaWYgKGl0ZW0uaXNEaXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlRGlyRGV0YWlscyhpdGVtKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlRmlsZURldGFpbHMoaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBpdGVtIGRlZmF1bHQgZGV0YWlsc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gZGV0YWlsc1xyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBpdGVtXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGl0ZW0uZnVsbF9uYW1lXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGl0ZW0udXBkYXRlZF9hdFxyXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGl0ZW0uZ2V0U2l6ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGRlZmF1bHREZXRhaWxzKGRldGFpbHMsIGl0ZW0pIHtcclxuICAgICAgICAgICAgJGxvZy5sb2coJ2l0ZW1fcHJvcGVydGllc19tb2RhbF9maWxlX3R5cGVfJyArIGl0ZW0udHlwZSk7XHJcbiAgICAgICAgICAgIGRldGFpbHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBUcmFucygnaXRlbV9wcm9wZXJ0aWVzX21vZGFsX2l0ZW1fdHlwZScpLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IFRyYW5zKCdpdGVtX3Byb3BlcnRpZXNfbW9kYWxfZmlsZV90eXBlXycgKyBpdGVtLnR5cGUpXHJcbiAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFRyYW5zKCdpdGVtX3Byb3BlcnRpZXNfbW9kYWxfbmFtZScpLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0uZnVsbF9uYW1lXHJcbiAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFRyYW5zKCdpdGVtX3Byb3BlcnRpZXNfbW9kYWxfZGF0ZScpLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0udXBkYXRlZF9hdFxyXG4gICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBUcmFucygnaXRlbV9wcm9wZXJ0aWVzX21vZGFsX3NpemUnKSxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLmdldFNpemUoKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlc29sdmUgZm9sZGVyIGRldGFpbHNcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBpdGVtXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHJlc29sdmVEaXJEZXRhaWxzKGl0ZW0pIHtcclxuICAgICAgICAgICAgdmFyIGRldGFpbHMgPSBbXTtcclxuICAgICAgICAgICAgZGVmYXVsdERldGFpbHMoZGV0YWlscywgaXRlbSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGV0YWlscztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlc29sdmUgZmlsZSBkZXRhaWxzXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gaXRlbVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheX1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiByZXNvbHZlRmlsZURldGFpbHMoaXRlbSkge1xyXG4gICAgICAgICAgICB2YXIgZGV0YWlscyA9IFtdO1xyXG4gICAgICAgICAgICBkZWZhdWx0RGV0YWlscyhkZXRhaWxzLCBpdGVtKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpdGVtLmRpciAhPT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGRldGFpbHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogVHJhbnMoJ2l0ZW1fcHJvcGVydGllc19tb2RhbF9pdGVtX2RpcicpLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLmRpclxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGRldGFpbHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBUcmFucygnaXRlbV9wcm9wZXJ0aWVzX21vZGFsX2l0ZW1fZXh0ZW5zaW9uJyksXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogaXRlbS5leHRlbnNpb25cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnaW1hZ2UnICYmIG5nLmhhc1ZhbHVlKGl0ZW0udGh1bWJzKSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGRldGFpbHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogVHJhbnMoJ2l0ZW1fcHJvcGVydGllc19tb2RhbF9pdGVtX3VybCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnPGEgaHJlZj1cInt1cmx9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+e3RpdGxlfTwvYT4nLnN1cHBsYW50KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBpdGVtLnVybCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFRyYW5zKCdpdGVtX3Byb3BlcnRpZXNfbW9kYWxfc2l6ZV9kaW0nKS5zdXBwbGFudChpdGVtLnNpemUpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG5nLmZvckVhY2goaXRlbS50aHVtYnMsIGZ1bmN0aW9uICh2YWwsIHNpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBUcmFucygnaXRlbV9wcm9wZXJ0aWVzX21vZGFsX3NpemVfdXJsX3RpdGxlJykuc3VwcGxhbnQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogVHJhbnMoJ2l0ZW1fcHJvcGVydGllc19tb2RhbF9zaXplX2tleV8nICsgc2l6ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnPGEgaHJlZj1cInt1cmx9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+e3RpdGxlfTwvYT4nLnN1cHBsYW50KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogdmFsLnVybCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBUcmFucygnaXRlbV9wcm9wZXJ0aWVzX21vZGFsX3NpemVfZGltJykuc3VwcGxhbnQodmFsLnNpemUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRldGFpbHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogVHJhbnMoJ2l0ZW1fcHJvcGVydGllc19tb2RhbF9pdGVtX3VybCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnPGEgaHJlZj1cInt1cmx9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+e2Z1bGxfbmFtZX08L2E+Jy5zdXBwbGFudChpdGVtKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkZXRhaWxzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoYW5ndWxhciwgd2luZG93LmNyaXApOyIsIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1Jvb3RDb250cm9sbGVyJywgUm9vdENvbnRyb2xsZXIpO1xyXG5cclxuICAgIFJvb3RDb250cm9sbGVyLiRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRzY29wZScsICckbWRNZW51JywgJ0NyaXBNYW5hZ2VyTG9jYXRpb24nLCAnQ3JpcE1hbmFnZXJDb250ZW50JywgJ0NyaXBNYW5hZ2VyVHJhbnMnLCAnQ3JpcE1hbmFnZXJCcmVhZGNydW1iJ1xyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBSb290Q29udHJvbGxlcigkc2NvcGUsICRtZE1lbnUsIExvY2F0aW9uLCBDb250ZW50LCBUcmFucywgQnJlYWRjcnVtYikge1xyXG5cclxuICAgICAgICBhY3RpdmF0ZSgpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuICAgICAgICAgICAgLy8gaW5pdGlhbGlzZSBmaWxlIG1hbmFnZXIgaW5pdGlhbCBsb2NhdGlvbiBhbmQgbG9hZCB0cmFuc2xhdGlvbnNcclxuICAgICAgICAgICAgVHJhbnMoKS5pbml0KCk7XHJcbiAgICAgICAgICAgIExvY2F0aW9uLmluaXQoKTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5kZXNlbGVjdCA9IGRlc2VsZWN0O1xyXG4gICAgICAgICAgICAkc2NvcGUucmVmcmVzaENvbnRlbnQgPSByZWZyZXNoQ29udGVudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGRlc2VsZWN0KCkge1xyXG4gICAgICAgICAgICBDb250ZW50LmRlc2VsZWN0KCk7XHJcbiAgICAgICAgICAgICRtZE1lbnUuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVmcmVzaENvbnRlbnQoKSB7XHJcbiAgICAgICAgICAgIExvY2F0aW9uLmNoYW5nZShCcmVhZGNydW1iLmN1cnJlbnQoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCB8fCAod2luZG93LmNyaXAgPSB7fSkpOyIsIihmdW5jdGlvbiAoY3JpcCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuc2VydmljZSgnRGlyJywgRGlyKTtcclxuXHJcbiAgICBEaXIuJGluamVjdCA9IFtcclxuICAgICAgICAnJHJlc291cmNlJywgJyRyb290U2NvcGUnXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIERpcigkcmVzb3VyY2UsICRyb290U2NvcGUpIHtcclxuICAgICAgICByZXR1cm4gJHJlc291cmNlKCRyb290U2NvcGUuZGlyVXJsKCc6ZGlyLzpuYW1lJyksIHtcclxuICAgICAgICAgICAgZGlyOiAnQGRpcicsXHJcbiAgICAgICAgICAgIG5hbWU6ICdAbmFtZSdcclxuICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICdjcmVhdGUnOiB7dXJsOiAkcm9vdFNjb3BlLmRpclVybCgnOmRpci86bmFtZScsICdjcmVhdGUnKSwgbWV0aG9kOiAnUE9TVCd9LFxyXG4gICAgICAgICAgICAnZGVsZXRlRGlyJzoge3VybDogJHJvb3RTY29wZS5kaXJVcmwoJzpkaXInLCAnZGVsZXRlJyksIG1ldGhvZDogJ0dFVCd9LFxyXG4gICAgICAgICAgICAnZGVsZXRlRmlsZSc6IHt1cmw6ICRyb290U2NvcGUuZmlsZVVybCgnOmRpci86bmFtZScsICdkZWxldGUnKSwgbWV0aG9kOiAnR0VUJ30sXHJcbiAgICAgICAgICAgICdyZW5hbWVEaXInOiB7dXJsOiAkcm9vdFNjb3BlLmRpclVybCgnOmRpcicsICdyZW5hbWUnKSwgbWV0aG9kOiAnR0VUJ30sXHJcbiAgICAgICAgICAgICdyZW5hbWVGaWxlJzoge3VybDogJHJvb3RTY29wZS5maWxlVXJsKCc6ZGlyJywgJ3JlbmFtZScpLCBtZXRob2Q6ICdHRVQnfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KSh3aW5kb3cuY3JpcCB8fCAod2luZG93LmNyaXAgPSB7fSkpOyIsIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyXHJcbiAgICAgICAgLnNlcnZpY2UoJ0NyaXBNYW5hZ2VyVHJhbnNsYXRpb25zJywgVHJhbnNsYXRpb25zKTtcclxuXHJcbiAgICBUcmFuc2xhdGlvbnMuJGluamVjdCA9IFtcclxuICAgICAgICAnJHJlc291cmNlJywgJyRyb290U2NvcGUnXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIFRyYW5zbGF0aW9ucygkcmVzb3VyY2UsICRyb290U2NvcGUpIHtcclxuICAgICAgICByZXR1cm4gJHJlc291cmNlKCRyb290U2NvcGUuYmFzZVVybCgndHJhbnNsYXRpb25zJykpO1xyXG4gICAgfVxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCk7IiwiKGZ1bmN0aW9uIChuZywgY3JpcCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuc2VydmljZSgnQ3JpcE1hbmFnZXJBY3Rpb25zJywgQWN0aW9ucyk7XHJcblxyXG4gICAgQWN0aW9ucy4kaW5qZWN0ID0gW1xyXG4gICAgICAgICdDcmVhdGVGb2xkZXJTZXJ2aWNlJywgJ0RlbGV0ZVNlcnZpY2UnLCAnUmVuYW1lU2VydmljZSdcclxuICAgIF07XHJcblxyXG4gICAgZnVuY3Rpb24gQWN0aW9ucyhDcmVhdGVGb2xkZXIsIERlbGV0ZSwgUmVuYW1lKSB7XHJcbiAgICAgICAgdmFyIHNjb3BlID0ge307XHJcbiAgICAgICAgbmcuZXh0ZW5kKHNjb3BlLCBDcmVhdGVGb2xkZXIsIERlbGV0ZSwgUmVuYW1lKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHNjb3BlO1xyXG4gICAgfVxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCk7IiwiKGZ1bmN0aW9uIChuZywgY3JpcCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgY3JpcC5maWxlbWFuYWdlclxyXG4gICAgICAgIC5zZXJ2aWNlKCdDcmlwTWFuYWdlckJyZWFkY3J1bWInLCBCcmVhZGNydW1iKTtcclxuXHJcbiAgICBCcmVhZGNydW1iLiRpbmplY3QgPSBbJyRsb2NhdGlvbicsICckcm9vdFNjb3BlJ107XHJcblxyXG4gICAgZnVuY3Rpb24gQnJlYWRjcnVtYigkbG9jYXRpb24sICRyb290U2NvcGUpIHtcclxuICAgICAgICB2YXIgYnJlYWRjcnVtYiA9IHtcclxuICAgICAgICAgICAgaXRlbXM6IFtdLFxyXG4gICAgICAgICAgICBoYXNJdGVtczogaGFzSXRlbXMsXHJcbiAgICAgICAgICAgIGN1cnJlbnQ6IGN1cnJlbnQsXHJcbiAgICAgICAgICAgIHNldDogc2V0TG9jYXRpb24sXHJcbiAgICAgICAgICAgIHVybENoYW5nZUlnbm9yZTogZmFsc2UsXHJcbiAgICAgICAgICAgIHJlc29sdmVVcmxPYmplY3Q6IHJlc29sdmVVcmxPYmplY3QsXHJcbiAgICAgICAgICAgIHRvU3RyaW5nOiB0b1N0cmluZ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFdhdGNoIGxvY2F0aW9uIGNoYW5nZSBhbmQgZmlyZSBldmVudCwgaWYgaXQgaXMgY2hhbmdlZCBieSB1c2VyXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgJHJvb3RTY29wZS4kd2F0Y2gobG9jYXRpb24sIG9uVXJsTG9jYXRpb25DaGFuZ2UpO1xyXG5cclxuICAgICAgICByZXR1cm4gYnJlYWRjcnVtYjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IGN1cnJlbnQgZm9sZGVyIGxvY2F0aW9uIG9iamVjdFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge29iamVjdH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjdXJyZW50KCkge1xyXG4gICAgICAgICAgICBpZiAoYnJlYWRjcnVtYi5pdGVtcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7ZGlyOiAnJywgbmFtZTogJyd9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYnJlYWRjcnVtYi5pdGVtc1ticmVhZGNydW1iLml0ZW1zLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2hlY2sgaXMgdGhlcmUgYW55IGl0ZW0gaW4gYnJlYWRjcnVtYlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gaGFzSXRlbXMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhIWJyZWFkY3J1bWIuaXRlbXMubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2V0IG5ldyBsb2NhdGlvblxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGZvbGRlclxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmb2xkZXIuZGlyXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZvbGRlci5uYW1lXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0TG9jYXRpb24oZm9sZGVyKSB7XHJcbiAgICAgICAgICAgIG9uTG9jYXRpb25DaGFuZ2Uoe2RpcjogZm9sZGVyLmRpciwgbmFtZTogZm9sZGVyLm5hbWV9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVwZGF0ZSBicmVhZGNydW1iIGFycmF5IHdoZW4gbWFuYWdlciBwcm9wZXJ0eSBpcyBjaGFuZ2VkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gdmFsXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbC5kaXJcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsLm5hbWVcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBvbkxvY2F0aW9uQ2hhbmdlKHZhbCkge1xyXG4gICAgICAgICAgICB2YXIgc3RyaW5nX3ZhbHVlID0gdG9TdHJpbmcuYXBwbHkodmFsKTtcclxuICAgICAgICAgICAgYnJlYWRjcnVtYi5pdGVtcy5zcGxpY2UoMCwgYnJlYWRjcnVtYi5pdGVtcy5sZW5ndGgpO1xyXG4gICAgICAgICAgICBzZXRVcmxMb2NhdGlvbihzdHJpbmdfdmFsdWUpO1xyXG4gICAgICAgICAgICBuZy5mb3JFYWNoKHN0cmluZ192YWx1ZS5zcGxpdCgnXFwvJykuY2xlYW4oJycsIG51bGwpLCBmdW5jdGlvbiAodikge1xyXG4gICAgICAgICAgICAgICAgLy8gY3JlYXRlIGN1cnJlbnQgZGlyIGZyb20gcHJldmlvdXMgaXRlbSwgaWYgaXQgZXhpc3RzXHJcbiAgICAgICAgICAgICAgICB2YXIgZGlyID0gJyc7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnJlYWRjcnVtYi5pdGVtcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgb25seSBvbmUgcHJldmlvdXMgaXRlbSwgdXNlIGl0YHMgbmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChicmVhZGNydW1iLml0ZW1zLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXIgPSBicmVhZGNydW1iLml0ZW1zWzBdLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG90aGVyIHdheSwgY29uY2F0IHByZXYgZGlyIHdpdGggbmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXIgPSAne2Rpcn0ve25hbWV9Jy5zdXBwbGFudChicmVhZGNydW1iLml0ZW1zW2JyZWFkY3J1bWIuaXRlbXMubGVuZ3RoIC0gMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBicmVhZGNydW1iLml0ZW1zLnB1c2goe25hbWU6IHYsIGRpcjogZGlyLCBpc0FjdGl2ZTogZmFsc2V9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBtYXJrIGxhc3QgaXRlbSBhcyBhY3RpdmUsIHRoaXMgd2lsbCBoZWxwIG1hcmsgaXRlbSBhcyBhY3RpdmVcclxuICAgICAgICAgICAgaWYgKGJyZWFkY3J1bWIuaXRlbXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgYnJlYWRjcnVtYi5pdGVtc1ticmVhZGNydW1iLml0ZW1zLmxlbmd0aCAtIDFdLmlzQWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2V0IGN1cnJlbnQgbG9jYXRpb24gdG8gdXJsXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fFN0cmluZ30gcGFydHNcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBzZXRVcmxMb2NhdGlvbihwYXJ0cykge1xyXG4gICAgICAgICAgICBicmVhZGNydW1iLnVybENoYW5nZUlnbm9yZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IHR5cGVvZiBwYXJ0cyA9PT0gJ3N0cmluZycgPyBwYXJ0cy5zcGxpdCgnXFwvJykgOiBwYXJ0cztcclxuICAgICAgICAgICAgbG9jYXRpb24uY2xlYW4oKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChsb2NhdGlvbi5sZW5ndGggPiAwICYmIG5nLmhhc1ZhbHVlKGxvY2F0aW9uWzBdKSkge1xyXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnNlYXJjaCgnbCcsIGxvY2F0aW9uKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5zZWFyY2goJ2wnLCBudWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhZGNydW1iLnVybENoYW5nZUlnbm9yZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IGN1cnJlbnQgdXJsIGxvY2F0aW9uIG9iamVjdFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMgeyp8T2JqZWN0fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGxvY2F0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGxvY2F0aW9uLnNlYXJjaCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25VcmxMb2NhdGlvbkNoYW5nZShuLCBvKSB7XHJcbiAgICAgICAgICAgIGlmICghYnJlYWRjcnVtYi51cmxDaGFuZ2VJZ25vcmUgJiYgIW5nLmVxdWFscyhuLCBvKSkge1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5maXJlQnJvYWRjYXN0KCd1cmwtY2hhbmdlJywgW3Jlc29sdmVVcmxPYmplY3QobildKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVzb2x2ZSAkbG9jYXRpb24gb2JqZWN0IHJvIHBhdGggc3RyaW5nXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gbG9jYXRpb25cclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fFN0cmluZ30gbG9jYXRpb24ubFxyXG4gICAgICAgICAqIEByZXR1cm5zIHtTdHJpbmd8bnVsbH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiByZXNvbHZlVXJsT2JqZWN0KGxvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKG5nLmhhc1ZhbHVlKGxvY2F0aW9uLmwpKSB7XHJcbiAgICAgICAgICAgICAgICBwYXRoID0gbG9jYXRpb24ubDtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcGF0aCA9PT0gJ29iamVjdCcpXHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aCA9IHBhdGguam9pbignLycpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcGF0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvbnZlcnQgY29udGV4dCB0byBzdHJpbmcgdmFsdWVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBbdmFsdWVdXHJcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiB0b1N0cmluZyh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmRpciA9IHRoaXMuZGlyIHx8ICcnO1xyXG4gICAgICAgICAgICB0aGlzLm5hbWUgPSB0aGlzLm5hbWUgfHwgJyc7XHJcbiAgICAgICAgICAgIHZhbHVlID0gJ3tkaXJ9L3tuYW1lfScuc3VwcGxhbnQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUuc3BsaXQoJ1xcLycpLmNsZWFuKCkuam9pbignXFwvJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCk7IiwiKGZ1bmN0aW9uIChuZywgY3JpcCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuc2VydmljZSgnQ3JpcE1hbmFnZXJDb250ZW50JywgQ29udGVudCk7XHJcblxyXG4gICAgQ29udGVudC4kaW5qZWN0ID0gWydJdGVtU2VydmljZScsICdTZWxlY3RTZXJ2aWNlJywgJ0RpciddO1xyXG5cclxuICAgIGZ1bmN0aW9uIENvbnRlbnQoSXRlbVNlcnZpY2UsIFNlbGVjdFNlcnZpY2UsIERpcikge1xyXG4gICAgICAgIHZhciBjb250ZW50ID0ge1xyXG4gICAgICAgICAgICBpdGVtczogW10sXHJcbiAgICAgICAgICAgIGdldDogZ2V0SXRlbXMsXHJcbiAgICAgICAgICAgIGFkZDogYWRkLFxyXG4gICAgICAgICAgICByZW1vdmU6IHJlbW92ZSxcclxuICAgICAgICAgICAgcmVtb3ZlSXRlbXM6IHJlbW92ZUl0ZW1zLFxyXG4gICAgICAgICAgICBoYXNQcm9wZXJ0aWVzOiBoYXNQcm9wZXJ0aWVzXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbmcuZXh0ZW5kKGNvbnRlbnQsIFNlbGVjdFNlcnZpY2UpO1xyXG5cclxuICAgICAgICByZXR1cm4gY29udGVudDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IGFsbCBjb250ZW50IGl0ZW1zXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0SXRlbXMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb250ZW50Lml0ZW1zO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVtb3ZlIGFsbCBpdGVtcyBpbiBjb250ZW50XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlSXRlbXMoKSB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuaXRlbXMuc3BsaWNlKDAsIGNvbnRlbnQuaXRlbXMubGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFkZCBpdGVtIHRvIGNvbnRlbnRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpdGVtXHJcbiAgICAgICAgICogQHJldHVybnMge09iamVjdH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBhZGQoaXRlbSkge1xyXG4gICAgICAgICAgICBpZiAoIW5nLmlzRGVmaW5lZChpdGVtLmlzX2V4dGVuZGVkKSkge1xyXG4gICAgICAgICAgICAgICAgSXRlbVNlcnZpY2UuZXh0ZW5kSXRlbShpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYodHlwZW9mIGl0ZW0gIT09ICdEaXInKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtID0gbmV3IERpcihpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29udGVudC5pdGVtcy5wdXNoKGl0ZW0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZW1vdmUgc2luZ2xlIGl0ZW1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBpdGVtXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlKGl0ZW0pIHtcclxuICAgICAgICAgICAgY29udGVudC5pdGVtcy5zcGxpY2UoY29udGVudC5pdGVtcy5pbmRleE9mKGl0ZW0pLCAxKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERldGVybWluZXMgaXMgaXRlbSBoYXMgcHJvcGVydGllc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGl0ZW1cclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBoYXNQcm9wZXJ0aWVzKGl0ZW0pIHtcclxuICAgICAgICAgICAgaWYoIWl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuICFpdGVtLmlzRGlyVXBcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKGFuZ3VsYXIsIHdpbmRvdy5jcmlwKTsiLCIoZnVuY3Rpb24gKG5nLCBjcmlwKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgY3JpcC5maWxlbWFuYWdlclxyXG4gICAgICAgIC5zZXJ2aWNlKCdDcmlwTWFuYWdlckNvbnRlbnRPcmRlcicsIENvbnRlbnRPcmRlcik7XHJcblxyXG4gICAgQ29udGVudE9yZGVyLiRpbmplY3QgPSBbJyRsb2cnXTtcclxuXHJcbiAgICBmdW5jdGlvbiBDb250ZW50T3JkZXIoJGxvZykge1xyXG4gICAgICAgIHZhciBvcmRlciA9IHtcclxuICAgICAgICAgICAgYnk6IG9yZGVyQnksXHJcbiAgICAgICAgICAgIGlzQnk6IGlzQnksXHJcbiAgICAgICAgICAgIHNldDogc2V0RmllbGQsXHJcbiAgICAgICAgICAgIGZpZWxkOiAnZnVsbF9uYW1lJyxcclxuICAgICAgICAgICAgaXNSZXZlcnNlOiBmYWxzZSxcclxuXHJcbiAgICAgICAgICAgIGZ1bGxfbmFtZTogdHJ1ZSxcclxuICAgICAgICAgICAgYnl0ZXM6IGZhbHNlLFxyXG4gICAgICAgICAgICB1cGRhdGVkX2F0OiBmYWxzZVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBhbGxvd2VkID0gWydmdWxsX25hbWUnLCAnYnl0ZXMnLCAndXBkYXRlZF9hdCddO1xyXG5cclxuICAgICAgICByZXR1cm4gb3JkZXI7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGl0ZW1cclxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIG9yZGVyQnkoaXRlbSkge1xyXG4gICAgICAgICAgICB2YXIgdGV4dCA9ICd6IHtmaWVsZH0nO1xyXG4gICAgICAgICAgICBpZiAoaXRlbS5pc0Rpcikge1xyXG4gICAgICAgICAgICAgICAgLy8gZGlyIHVwIHNob3VsZCBiZSBvbiBmaXJzdCBwbGFjZVxyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uaXNEaXJVcClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgICAgICB0ZXh0ID0gJzAge2ZpZWxkfSc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vJGxvZy5pbmZvKCRzY29wZS5vcmRlci5maWVsZCwgdGV4dC5zdXBwbGFudCh7ZmllbGQ6IGl0ZW1bJHNjb3BlLm9yZGVyLmZpZWxkXX0pLCBpdGVtKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRleHQuc3VwcGxhbnQoe2ZpZWxkOiBpdGVtW29yZGVyLmZpZWxkXX0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSXMgY3VycmVudCBvcmRlciBieSBmaWVsZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gaXNCeShmaWVsZCkge1xyXG4gICAgICAgICAgICBpZiAoYWxsb3dlZC5pbmRleE9mKGZpZWxkKSAhPT0gLTEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gISFvcmRlcltmaWVsZF07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXQgZmllbGQgYXMgY3VycmVudGx5IHNvcnRhYmxlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmllbGRcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBzZXRGaWVsZChmaWVsZCkge1xyXG4gICAgICAgICAgICBpZiAoYWxsb3dlZC5pbmRleE9mKGZpZWxkKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHAgaW4gYWxsb3dlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhbGxvd2VkLmhhc093blByb3BlcnR5KHApICYmIGFsbG93ZWRbcF0gIT0gZmllbGQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyW2FsbG93ZWRbcF1dID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgb3JkZXIuZmllbGQgPSBmaWVsZDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIW9yZGVyW2ZpZWxkXSlcclxuICAgICAgICAgICAgICAgICAgICBvcmRlcltmaWVsZF0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyLmlzUmV2ZXJzZSA9ICFvcmRlci5pc1JldmVyc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKGFuZ3VsYXIsIHdpbmRvdy5jcmlwKTsiLCIoZnVuY3Rpb24gKG5nLCBjcmlwKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgY3JpcC5maWxlbWFuYWdlclxyXG4gICAgICAgIC5zZXJ2aWNlKCdJdGVtU2VydmljZScsIEl0ZW1TZXJ2aWNlKTtcclxuXHJcbiAgICBJdGVtU2VydmljZS4kaW5qZWN0ID0gW1xyXG4gICAgICAgICckbG9nJywgJyRyb290U2NvcGUnLCAnQ3JpcE1hbmFnZXJUcmFucydcclxuICAgIF07XHJcblxyXG4gICAgZnVuY3Rpb24gSXRlbVNlcnZpY2UoJGxvZywgJHJvb3RTY29wZSwgVHJhbnMpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAnZXh0ZW5kJzogZXh0ZW5kLFxyXG4gICAgICAgICAgICAnZXh0ZW5kSXRlbSc6IGV4dGVuZEl0ZW1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBFeHRlbmQgRGlyIHJlc291cmNlIHJlcXVlc3QgcmVzcG9uc2Ugd2l0aCByZXF1aXJlZCBpbmZvcm1hdGlvblxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHJlc291cmNlRGF0YVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGV4dGVuZChyZXNvdXJjZURhdGEpIHtcclxuICAgICAgICAgICAgbmcuZXh0ZW5kKHJlc291cmNlRGF0YSwge1xyXG4gICAgICAgICAgICAgICAgJ2dldEl0ZW1zJzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpdGVtcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIG5nLmZvckVhY2gocmVzb3VyY2VEYXRhLCBmdW5jdGlvbiAodiwgaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRlbmRJdGVtKHYsIGspO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnB1c2godik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgaXRlbXMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2VuZXJhdGUgVUkgaWQgZm9yIGl0ZW1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBrZXlcclxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGlkR2VuKGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2xpc3QtaXRlbS0nICsga2V5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IGtleSBmcm9tIGlkZW50aWZpZXIgKHJldmVyc2UgbWV0aG9kIGZyb20gaWRHZW4pXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllclxyXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0S2V5KGlkZW50aWZpZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlkZW50aWZpZXIuc3Vic3RyaW5nKDEwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERldGVybWluZSBpcyBpdGVtIGEgZm9sZGVyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gaXRlbVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGlzRGlyKGl0ZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0gJiYgbmcuaXNEZWZpbmVkKGl0ZW0udHlwZSkgJiYgaXRlbS50eXBlID09PSAnZGlyJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERldGVybWluZSBpcyBpdGVtIGFuIGEgZm9sZGVyIHVwXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gaXRlbVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGlzRGlyVXAoaXRlbSkge1xyXG4gICAgICAgICAgICByZXR1cm4gaXNEaXIoaXRlbSkgJiYgKGl0ZW0ubmFtZSA9PSAnJyB8fCBpdGVtLm5hbWUgPT0gbnVsbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBFeHRlbmQgc2luZ2xlIGl0ZW0gd2l0aCByZXF1aXJlZCBpbmZvcm1hdGlvblxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGl0ZW1cclxuICAgICAgICAgKiBAcGFyYW0ga2V5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZXh0ZW5kSXRlbShpdGVtLCBrZXkpIHtcclxuICAgICAgICAgICAgbmcuZXh0ZW5kKGl0ZW0sIHtcclxuICAgICAgICAgICAgICAgIGlzX2V4dGVuZGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgcmVuYW1lOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGlkZW50aWZpZXI6IGlkR2VuKGtleSksXHJcbiAgICAgICAgICAgICAgICBpc0RpcjogaXNEaXIoaXRlbSksXHJcbiAgICAgICAgICAgICAgICBpc0RpclVwOiBpc0RpclVwKGl0ZW0pLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlOiB1cGRhdGUsXHJcbiAgICAgICAgICAgICAgICBkZWxldGU6IGRlbGV0ZUl0ZW0sXHJcbiAgICAgICAgICAgICAgICBnZXRGdWxsTmFtZTogZ2V0RnVsbE5hbWUsXHJcbiAgICAgICAgICAgICAgICBzYXZlTmV3TmFtZTogc2F2ZU5ld05hbWUsXHJcbiAgICAgICAgICAgICAgICBnZXRTaXplOiBnZXRTaXplXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVXBkYXRlIGl0ZW0gY2hhbmdlcyBpZiB0aGV5IGFyZSBwcmVzZW50ZWRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtpdGVtfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucmVuYW1lKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlTmV3TmFtZSgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgaXRlbSBuYW1lIChpZ25vcmluZyBmdWxsX25hbWUgcHJvcGVydHkgdmFsdWUpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGdldEZ1bGxOYW1lKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0RpciB8fCB0aGlzLmV4dGVuc2lvbiA9PT0gJycpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3tuYW1lfS57ZXh0ZW5zaW9ufScuc3VwcGxhbnQodGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTYXZlIGl0ZW0gbmFtZSBpZiBpdCBpcyBjaGFuZ2VkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gc2F2ZU5ld05hbWUoKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIGtleSA9IGdldEtleShzZWxmLmlkZW50aWZpZXIpLFxyXG4gICAgICAgICAgICAgICAgbWVudSA9IHNlbGYubWVudTtcclxuICAgICAgICAgICAgc2VsZi5yZW5hbWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKHNlbGYuZnVsbF9uYW1lICE9PSBzZWxmLmdldEZ1bGxOYW1lKCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZXRob2QgPSBzZWxmLmlzRGlyID8gJyRyZW5hbWVEaXInIDogJyRyZW5hbWVGaWxlJztcclxuICAgICAgICAgICAgICAgIHNlbGZbbWV0aG9kXSh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ29sZCc6IHNlbGYuZnVsbF9uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICduZXcnOiBzZWxmLmdldEZ1bGxOYW1lKClcclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5nLmV4dGVuZChzZWxmLCBleHRlbmRJdGVtKHJlc3BvbnNlLCBrZXkpLCB7bWVudTogbWVudX0pO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGVsZXRlIGl0ZW0gZGV0ZWN0aW5nIGl0IHR5cGUgKGZpbGUgb3IgZGlyKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGRlbGV0ZUl0ZW0oKSB7XHJcbiAgICAgICAgICAgIHZhciBtZXRob2QgPSB0aGlzLmlzRGlyID8gJyRkZWxldGVEaXInIDogJyRkZWxldGVGaWxlJztcclxuICAgICAgICAgICAgdGhpc1ttZXRob2RdKHtuYW1lOiB0aGlzLmZ1bGxfbmFtZX0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IHVzZXIgZnJpZW5kbHkgaXRlbSBzaXplXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0U2l6ZSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZXMudG9CeXRlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoYW5ndWxhciwgd2luZG93LmNyaXAgfHwgKHdpbmRvdy5jcmlwID0ge30pKTsiLCIoZnVuY3Rpb24gKG5nLCBjcmlwKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgY3JpcC5maWxlbWFuYWdlclxyXG4gICAgICAgIC5zZXJ2aWNlKCdDcmlwTWFuYWdlckxvY2F0aW9uJywgQ2hhbmdlTG9jYXRpb25TZXJ2aWNlKTtcclxuXHJcbiAgICBDaGFuZ2VMb2NhdGlvblNlcnZpY2UuJGluamVjdCA9IFtcclxuICAgICAgICAnJGNvb2tpZXMnLCAnJGxvY2F0aW9uJywgJyRyb290U2NvcGUnLCAnRGlyJywgJ0l0ZW1TZXJ2aWNlJywgJ0NyaXBNYW5hZ2VyQnJlYWRjcnVtYicsICdDcmlwTWFuYWdlckNvbnRlbnQnXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIENoYW5nZUxvY2F0aW9uU2VydmljZSgkY29va2llcywgJGxvY2F0aW9uLCAkcm9vdFNjb3BlLCBEaXIsIEl0ZW1TZXJ2aWNlLCBCcmVhZGNydW1iLCBDb250ZW50KSB7XHJcblxyXG4gICAgICAgICRyb290U2NvcGUuJG9uKCd1cmwtY2hhbmdlJywgZnVuY3Rpb24gKGV2ZW50LCBhcmdzKSB7XHJcbiAgICAgICAgICAgIGNoYW5nZSh7ZGlyOiBhcmdzWzBdfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGluaXQ6IGluaXRpYWxMb2FkLFxyXG4gICAgICAgICAgICBjaGFuZ2U6IGNoYW5nZSxcclxuICAgICAgICAgICAgY3VycmVudDoge31cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDaGFuZ2UgbG9jYXRpb24gdG8gaW5pdGlhbCBmb2xkZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBpbml0aWFsTG9hZCgpIHtcclxuICAgICAgICAgICAgY2hhbmdlKGdldExvY2F0aW9uRnJvbUNvb2tpZSgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoYW5nZSBjdXJyZW50IGxvY2F0aW9uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gW2ZvbGRlcl1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjaGFuZ2UoZm9sZGVyKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0ge2RpcjogbnVsbCwgbmFtZTogbnVsbH07XHJcbiAgICAgICAgICAgIGlmIChuZy5pc0RlZmluZWQoZm9sZGVyKSkge1xyXG4gICAgICAgICAgICAgICAgcGF0aC5kaXIgPSBuZy5pc0VtcHR5KGZvbGRlci5kaXIpID8gbnVsbCA6IGZvbGRlci5kaXI7XHJcbiAgICAgICAgICAgICAgICBwYXRoLm5hbWUgPSBuZy5pc0VtcHR5KGZvbGRlci5uYW1lKSA/IG51bGwgOiBmb2xkZXIubmFtZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgRGlyLnF1ZXJ5KHBhdGgsIGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVDb29raWUocGF0aCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQXBwZW5kIHJlc3BvbnNlIHdpdGggcmVxdWlyZWQgaW5mb3JtYXRpb25cclxuICAgICAgICAgICAgICAgIEl0ZW1TZXJ2aWNlLmV4dGVuZChyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgb2xkIGNvbnRlbnRcclxuICAgICAgICAgICAgICAgIENvbnRlbnQucmVtb3ZlSXRlbXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBkZXNlbGVjdCwgaWYgYW55IGl0ZW0gaXMgc2VsZWN0ZWRcclxuICAgICAgICAgICAgICAgIENvbnRlbnQuZGVzZWxlY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDaGFuZ2UgYnJlYWRjcnVtYiBwYXRoXHJcbiAgICAgICAgICAgICAgICBCcmVhZGNydW1iLnNldChwYXRoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBBZGQgbmV3IGNvbnRlbnRcclxuICAgICAgICAgICAgICAgIG5nLmZvckVhY2goci5nZXRJdGVtcygpLCBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIENvbnRlbnQuYWRkKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IG1hbmFnZXIgbGFzdCBsb2NhdGlvbiBmcm9tIGNvb2tpZXNcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHt7ZGlyOiBzdHJpbmcsIG5hbWU6IHN0cmluZ319XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0TG9jYXRpb25Gcm9tQ29va2llKCkge1xyXG4gICAgICAgICAgICB2YXIgbG9jYXRpb24gPSB7ZGlyOiBudWxsLCBuYW1lOiBudWxsfSxcclxuICAgICAgICAgICAgICAgIHVybCA9IEJyZWFkY3J1bWIucmVzb2x2ZVVybE9iamVjdCgkbG9jYXRpb24uc2VhcmNoKCkpO1xyXG5cclxuICAgICAgICAgICAgLy8gaWYgdXJsIGNvbnRhaW5zIGxvY2F0aW9uLCBpZ25vcmUgY29va2llcyB2YWx1ZVxyXG4gICAgICAgICAgICBpZiAobmcuaGFzVmFsdWUodXJsKSkge1xyXG4gICAgICAgICAgICAgICAgbG9jYXRpb24uZGlyID0gdXJsO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGNvb2tpZURpciA9ICRjb29raWVzLmdldCgnbG9jYXRpb24tZGlyJyksXHJcbiAgICAgICAgICAgICAgICBuYW1lID0gJGNvb2tpZXMuZ2V0KCdsb2NhdGlvbi1kaXItbmFtZScpO1xyXG4gICAgICAgICAgICBpZiAobmcuaGFzVmFsdWUoY29va2llRGlyKSB8fCBuZy5oYXNWYWx1ZShuYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgbG9jYXRpb24uZGlyID0gY29va2llRGlyO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5nLmlzRW1wdHkobmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lID0gJyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbi5uYW1lID0gbmFtZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGxvY2F0aW9uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVXBkYXRlIGNvb2tpZXMgZm9yIG5ldyBtYW5hZ2VyIGluc3RhbmNlLCB0byBiZSBvcGVuZWQgaW4gc2FtZSBsb2NhdGlvblxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGxvY2F0aW9uXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGxvY2F0aW9uLmRpclxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhdGlvbi5uYW1lXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlQ29va2llKGxvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICRjb29raWVzLnB1dCgnbG9jYXRpb24tZGlyJywgbG9jYXRpb24uZGlyIHx8ICcnKTtcclxuICAgICAgICAgICAgJGNvb2tpZXMucHV0KCdsb2NhdGlvbi1kaXItbmFtZScsIGxvY2F0aW9uLm5hbWUgfHwgJycpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoYW5ndWxhciwgd2luZG93LmNyaXApOyIsIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyXHJcbiAgICAgICAgLnNlcnZpY2UoJ0NyaXBQcm9wZXJ0aWVzTW9kYWwnLCBQcm9wZXJ0aWVzTW9kYWwpO1xyXG5cclxuICAgIFByb3BlcnRpZXNNb2RhbC4kaW5qZWN0ID0gWyckbWREaWFsb2cnLCAnJHJvb3RTY29wZScsICdDcmlwTWFuYWdlckNvbnRlbnQnXTtcclxuXHJcbiAgICBmdW5jdGlvbiBQcm9wZXJ0aWVzTW9kYWwoJG1kRGlhbG9nLCAkcm9vdFNjb3BlLCBDb250ZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgb3Blbjogb3BlblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE9wZW4gaXRlbSBwcm9wZXJ0aWVzIG1vZGFsXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gaXRlbVxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpdGVtLmlkZW50aWZpZXJcclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBvcGVuKGl0ZW0pIHtcclxuICAgICAgICAgICAgaWYoIUNvbnRlbnQuaGFzUHJvcGVydGllcyhpdGVtKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkbWREaWFsb2cuc2hvdyh7XHJcbiAgICAgICAgICAgICAgICBjbGlja091dHNpZGVUb0Nsb3NlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgb3BlbkZyb206ICcjJyArIGl0ZW0uaWRlbnRpZmllcixcclxuICAgICAgICAgICAgICAgIGNsb3NlVG86ICcjJyArIGl0ZW0uaWRlbnRpZmllcixcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAkcm9vdFNjb3BlLnRlbXBsYXRlUGF0aCgnaXRlbS1wcm9wZXJ0aWVzLW1vZGFsJyksXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnSXRlbVByb3BlcnRpZXNDb250cm9sbGVyJyxcclxuICAgICAgICAgICAgICAgIGxvY2Fsczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW06IGl0ZW1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufSkoYW5ndWxhciwgd2luZG93LmNyaXApOyIsIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyXHJcbiAgICAgICAgLnNlcnZpY2UoJ0NyaXBNYW5hZ2VyVHJhbnMnLCBUcmFucyk7XHJcblxyXG4gICAgVHJhbnMuJGluamVjdCA9IFtcclxuICAgICAgICAnQ3JpcE1hbmFnZXJUcmFuc2xhdGlvbnMnXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIFRyYW5zKFRyYW5zbGF0aW9ucykge1xyXG4gICAgICAgIHZhciB0cmFuc2xhdGlvbnMgPSB7fTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgaWYgKGtleSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zbGF0aW9uc1trZXldO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0aW9ucyA9IFRyYW5zbGF0aW9ucy5nZXQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCk7IiwiKGZ1bmN0aW9uIChuZywgY3JpcCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuc2VydmljZSgnQ3JpcE1hbmFnZXJVcGxvYWRlcicsIFVwbG9hZGVyKTtcclxuXHJcbiAgICBVcGxvYWRlci4kaW5qZWN0ID0gWyckcm9vdFNjb3BlJywgJ0NyaXBNYW5hZ2VyQnJlYWRjcnVtYicsICdDcmlwTWFuYWdlckNvbnRlbnQnLCAnVXBsb2FkJ107XHJcblxyXG4gICAgZnVuY3Rpb24gVXBsb2FkZXIoJHJvb3RTY29wZSwgQnJlYWRjcnVtYiwgQ29udGVudCwgVXBsb2FkKSB7XHJcblxyXG4gICAgICAgIHZhciB1cGxvYWRlciA9IHtcclxuICAgICAgICAgICAgZmlsZXM6IFtdLFxyXG4gICAgICAgICAgICBhZGQ6IGFkZEZpbGUsXHJcbiAgICAgICAgICAgIGhhc0ZpbGVzOiBoYXNGaWxlcyxcclxuICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0LFxyXG4gICAgICAgICAgICBjbGVhbjogY2xlYW4sXHJcbiAgICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDIwMCxcclxuICAgICAgICAgICAgICAgIGVycm9yOiAnJyxcclxuICAgICAgICAgICAgICAgIHVybDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvb3Q6ICRyb290U2NvcGUuZmlsZVVybCgndXBsb2FkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgZGlyOiAnJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHVwbG9hZGVyO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBhZGRGaWxlKGZpbGVzKSB7XHJcbiAgICAgICAgICAgIG5nLmZvckVhY2goZmlsZXMsIGZ1bmN0aW9uIChmaWxlKSB7XHJcbiAgICAgICAgICAgICAgICBmaWxlLnByb2dyZXNzID0gMDtcclxuICAgICAgICAgICAgICAgIGZpbGUuaWQgPSB1cGxvYWRlci5maWxlcy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBmaWxlLmlzSHRtbDUgPSBuZy5pc0h0bWw1O1xyXG4gICAgICAgICAgICAgICAgZmlsZS5lcnJvciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdXBsb2FkZXIuZmlsZXMucHVzaChmaWxlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlcm1pbmVzIGlmIHRoZXJlIGZpbGVzIGluIHF1ZXVlIGZvciB1cGxvYWRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGhhc0ZpbGVzKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdXBsb2FkZXIuZmlsZXMubGVuZ3RoID4gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFN0YXJ0IHVwbG9hZCBhbGwgZmlsZXMgZnJvbSBxdWV1ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gc3RhcnQoKSB7XHJcbiAgICAgICAgICAgIGlmICghaGFzRmlsZXMoKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIC8vIGdldCBjdXJyZW50IGRpciBmcm9tIEJyZWFkY3J1bWIgYW5kIGNvbnZlcnQgaXQgdG8gc3RyaW5nXHJcbiAgICAgICAgICAgIHVwbG9hZGVyLnNldHRpbmdzLnVybC5kaXIgPSBCcmVhZGNydW1iLnRvU3RyaW5nLmFwcGx5KEJyZWFkY3J1bWIuY3VycmVudCgpKTtcclxuXHJcbiAgICAgICAgICAgIG5nLmZvckVhY2godXBsb2FkZXIuZmlsZXMsIG9uU2luZ2xlRmlsZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVcGxvYWQgc2luZ2xlIGZpbGUgd3JhcHBlclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGZpbGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBvblNpbmdsZUZpbGUoZmlsZSkge1xyXG4gICAgICAgICAgICB2YXIgdXBsb2FkID0gVXBsb2FkLnVwbG9hZCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICd7cm9vdH0ve2Rpcn0nLnN1cHBsYW50KHVwbG9hZGVyLnNldHRpbmdzLnVybCksXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7ZmlsZTogZmlsZX1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB1cGxvYWQudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIGZpbGUucHJvZ3Jlc3MgPSAxMDA7XHJcbiAgICAgICAgICAgICAgICB1cGxvYWRlci5maWxlcy5yZW1vdmVJdGVtKGZpbGUuaWQsICdpZCcpO1xyXG4gICAgICAgICAgICAgICAgQ29udGVudC5hZGQocmVzcG9uc2UuZGF0YSk7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBhZGQgbm90aWZpY2F0aW9uIGFib3V0IGVycm9yXHJcbiAgICAgICAgICAgICAgICBmaWxlLmVycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGZpbGUucHJvZ3Jlc3MgPSAxMDA7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgICAgIGZpbGUucHJvZ3Jlc3MgPSBNYXRoLm1pbigxMDAsIHBhcnNlSW50KDkwLjAgKiBldnQubG9hZGVkIC8gZXZ0LnRvdGFsKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVtb3ZlIGFsbCBmaWxlcyBmcm9tIHVwbG9hZHNcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjbGVhbigpIHtcclxuICAgICAgICAgICAgdXBsb2FkZXIuZmlsZXMgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCk7IiwiKGZ1bmN0aW9uIChuZywgY3JpcCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuc2VydmljZSgnQ3JlYXRlRm9sZGVyU2VydmljZScsIENyZWF0ZUZvbGRlclNlcnZpY2UpO1xyXG5cclxuICAgIENyZWF0ZUZvbGRlclNlcnZpY2UuJGluamVjdCA9IFtcclxuICAgICAgICAnRGlyJywgJ0NyaXBNYW5hZ2VyQnJlYWRjcnVtYicsICdDcmlwTWFuYWdlckNvbnRlbnQnLCAnUmVuYW1lU2VydmljZSdcclxuICAgIF07XHJcblxyXG4gICAgZnVuY3Rpb24gQ3JlYXRlRm9sZGVyU2VydmljZShEaXIsIEJyZWFkY3J1bWIsIENvbnRlbnQsIFJlbmFtZSkge1xyXG4gICAgICAgIHZhciBjcmVhdGUgPSB7XHJcbiAgICAgICAgICAgIF9jcmVhdGVJblByb2dyZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgY2FuQ3JlYXRlRm9sZGVyOiBjYW5DcmVhdGVGb2xkZXIsXHJcbiAgICAgICAgICAgIGNyZWF0ZUZvbGRlcjogY3JlYXRlRm9sZGVyXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2hlY2sgaXMgZm9sZGVyIGNhbiBiZSBjcmVhdGVkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjYW5DcmVhdGVGb2xkZXIoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhY3JlYXRlLl9jcmVhdGVJblByb2dyZXNzXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGUgbmV3IGZvbGRlclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcclxuICAgICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBbY2FsbGJhY2tdXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlRm9sZGVyKG5hbWUsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIGlmICghY2FuQ3JlYXRlRm9sZGVyKCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBjcmVhdGUuX2NyZWF0ZUluUHJvZ3Jlc3MgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgRGlyLmNyZWF0ZShCcmVhZGNydW1iLmN1cnJlbnQoKSwge25hbWU6IG5hbWV9LCBmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlLl9jcmVhdGVJblByb2dyZXNzID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gTm90aWZ5IGNvbnRyb2xsZXJzIHRvIGhhbmRsZSBVSSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IENvbnRlbnQuYWRkKHIpO1xyXG4gICAgICAgICAgICAgICAgQ29udGVudC5zZWxlY3RTaW5nbGUoaXRlbSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG5nLmlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soaXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbn0pKGFuZ3VsYXIsIHdpbmRvdy5jcmlwKTsiLCIoZnVuY3Rpb24gKG5nLCBjcmlwKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgY3JpcC5maWxlbWFuYWdlclxyXG4gICAgICAgIC5zZXJ2aWNlKCdEZWxldGVTZXJ2aWNlJywgRGVsZXRlU2VydmljZSk7XHJcblxyXG4gICAgZnVuY3Rpb24gRGVsZXRlU2VydmljZSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjYW5EZWxldGU6IGNhbkRlbGV0ZSxcclxuICAgICAgICAgICAgZGVsZXRlOiBkZWxldGVJdGVtXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2hlY2sgYXJlIHRoZSBpdGVtIGRlbGV0YWJsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufG9iamVjdH0gaXRlbVxyXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXRlbS5pc0RpclVwXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2FuRGVsZXRlKGl0ZW0pIHtcclxuICAgICAgICAgICAgaWYgKCFpdGVtKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuICFpdGVtLmlzRGlyVXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZWxldGUgaXRlbVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGl0ZW1cclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gW2V2ZW50XVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGRlbGV0ZUl0ZW0oaXRlbSkge1xyXG4gICAgICAgICAgICBpZiAoIWNhbkRlbGV0ZShpdGVtKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtLmRlbGV0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoYW5ndWxhciwgd2luZG93LmNyaXAgfHwgKHdpbmRvdy5jcmlwID0ge30pKTsiLCIoZnVuY3Rpb24gKG5nLCBjcmlwKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgY3JpcC5maWxlbWFuYWdlclxyXG4gICAgICAgIC5zZXJ2aWNlKCdSZW5hbWVTZXJ2aWNlJywgUmVuYW1lU2VydmljZSk7XHJcblxyXG4gICAgZnVuY3Rpb24gUmVuYW1lU2VydmljZSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjYW5SZW5hbWU6IGNhblJlbmFtZSxcclxuICAgICAgICAgICAgZW5hYmxlUmVuYW1lOiBlbmFibGVSZW5hbWUsXHJcbiAgICAgICAgICAgIHJlbmFtZTogcmVuYW1lXHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrIGlzIHRoZSBpdGVtIGNhbiBiZSByZW5hbWVkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW58b2JqZWN0fSBpdGVtXHJcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBpdGVtLmlzRGlyVXBcclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjYW5SZW5hbWUoaXRlbSkge1xyXG4gICAgICAgICAgICBpZiAoIWl0ZW0pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gIWl0ZW0uaXNEaXJVcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEVuYWJsZSBpdGVtIHJlbmFtZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufG9iamVjdH0gaXRlbVxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpdGVtLmlkZW50aWZpZXJcclxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGl0ZW0ucmVuYW1lXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZW5hYmxlUmVuYW1lKGl0ZW0pIHtcclxuICAgICAgICAgICAgaWYgKCFjYW5SZW5hbWUoaXRlbSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKGl0ZW0ucmVuYW1lID0gdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZW5hbWUgaXRlbVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufG9iamVjdH0gaXRlbVxyXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGl0ZW0udXBkYXRlXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gcmVuYW1lKGl0ZW0pIHtcclxuICAgICAgICAgICAgaWYgKCFjYW5SZW5hbWUoaXRlbSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaXRlbS51cGRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCk7IiwiKGZ1bmN0aW9uIChuZywgY3JpcCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuc2VydmljZSgnU2VsZWN0U2VydmljZScsIFNlbGVjdFNlcnZpY2UpO1xyXG5cclxuICAgIGZ1bmN0aW9uIFNlbGVjdFNlcnZpY2UoKSB7XHJcbiAgICAgICAgdmFyIHNlbGVjdCA9IHtcclxuICAgICAgICAgICAgc2VsZWN0ZWQ6IFtdLFxyXG4gICAgICAgICAgICBzZWxlY3Q6IHNlbGVjdEl0ZW0sXHJcbiAgICAgICAgICAgIHNlbGVjdFNpbmdsZTogc2VsZWN0U2luZ2xlSXRlbSxcclxuICAgICAgICAgICAgZGVzZWxlY3Q6IGRlc2VsZWN0U2VsZWN0ZWRJdGVtcyxcclxuICAgICAgICAgICAgaXNTZWxlY3RlZDogaXNTZWxlY3RlZEl0ZW0sXHJcbiAgICAgICAgICAgIGlzU2VsZWN0ZWRPbmU6IGlzU2VsZWN0ZWRPbmVJdGVtLFxyXG4gICAgICAgICAgICBpc1NlbGVjdGVkQW55OiBpc1NlbGVjdGVkQW55SXRlbSxcclxuICAgICAgICAgICAgZ2V0U2VsZWN0ZWRJdGVtOiBnZXRTZWxlY3RlZEl0ZW0sXHJcbiAgICAgICAgICAgIGdldFNlbGVjdGVkSXRlbXM6IGdldFNlbGVjdGVkSXRlbXMsXHJcbiAgICAgICAgICAgIHVwZGF0ZVNlbGVjdGVkOiB1cGRhdGVTZWxlY3RlZEl0ZW1zXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV0ZXJtaW5lcyBpcyBhbnkgaXRlbSBzZWxlY3RlZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gaXNTZWxlY3RlZEFueUl0ZW0oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhIXNlbGVjdC5zZWxlY3RlZC5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlcm1pbmVzIGlzIGl0ZW0gaW4gc2VsZWN0ZWQgaXRlbXMgY29sbGVjdGlvblxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGl0ZW1cclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBpc1NlbGVjdGVkSXRlbShpdGVtKSB7XHJcbiAgICAgICAgICAgIGlmICghaXNTZWxlY3RlZEFueUl0ZW0oKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBpc1NlbGVjdGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBuZy5mb3JFYWNoKHNlbGVjdC5zZWxlY3RlZCwgZnVuY3Rpb24gKHNlbGVjdGVkX2l0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChuZy5lcXVhbHMoaXRlbSwgc2VsZWN0ZWRfaXRlbSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaXNTZWxlY3RlZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERldGVybWluZXMgaXMgc2VsZWN0ZWQgb25seSBvbmUgaXRlbVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gaXNTZWxlY3RlZE9uZUl0ZW0oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3Quc2VsZWN0ZWQubGVuZ3RoID09PSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IHNpbmdsZSBzZWxlY3RlZCBpdGVtXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyB7b2JqZWN0fGJvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0U2VsZWN0ZWRJdGVtKCkge1xyXG4gICAgICAgICAgICBpZiAoIWlzU2VsZWN0ZWRPbmVJdGVtKCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0LnNlbGVjdGVkWzBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IGFsbCBzZWxlY3RlZCBpdGVtc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGdldFNlbGVjdGVkSXRlbXMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3Quc2VsZWN0ZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBZGQgaXRlbSB0byBjb2xsZWN0aW9uIG9mIHNlbGVjdGVkIGl0ZW1zXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gaXRlbVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHNlbGVjdEl0ZW0oaXRlbSkge1xyXG4gICAgICAgICAgICBzZWxlY3Quc2VsZWN0ZWQucHVzaChpdGVtKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERlc2VsZWN0IGFsbCBzZWxlY3RlZCBpdGVtcyBhbmQgdXBkYXRlIGNoYW5nZXMgaW4gdGhlbVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGRlc2VsZWN0U2VsZWN0ZWRJdGVtcygpIHtcclxuICAgICAgICAgICAgdXBkYXRlU2VsZWN0ZWRJdGVtcygpO1xyXG4gICAgICAgICAgICBzZWxlY3Quc2VsZWN0ZWQuc3BsaWNlKDAsIHNlbGVjdC5zZWxlY3RlZC5sZW5ndGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGVzZWxlY3QgYWxsIHNlbGVjdGVkIGl0ZW1zIGFuZCBhZGQgdGhpcyBvbmUgYXMgc2VsZWN0ZWRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBpdGVtXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gc2VsZWN0U2luZ2xlSXRlbShpdGVtKSB7XHJcbiAgICAgICAgICAgIGRlc2VsZWN0U2VsZWN0ZWRJdGVtcygpO1xyXG4gICAgICAgICAgICBzZWxlY3RJdGVtKGl0ZW0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVXBkYXRlIGNoYW5nZXMgaW4gc2VsZWN0ZWQgaXRlbXNcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVTZWxlY3RlZEl0ZW1zKCkge1xyXG4gICAgICAgICAgICBuZy5mb3JFYWNoKGdldFNlbGVjdGVkSXRlbXMoKSwgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0udXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbn0pKGFuZ3VsYXIsIHdpbmRvdy5jcmlwKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
