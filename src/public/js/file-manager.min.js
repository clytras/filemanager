!function(e,n){"use strict";n.filemanager=e.module("crip.file-manager",["crip.core","angular-loading-bar","angularFileUpload","ngCookies","ngResource","ngSanitize","ui.bootstrap","ui-notification","io.dennis.contextmenu"])}(angular,window.crip||(window.crip={})),function(e,n,t){"use strict";function i(t){function i(e,n){t.$broadcast(e,n)}function r(n,t,i){var r=n+"/";return e.isDefined(i)&&(r+=i+"/"),r+=t,a(r)}function a(e){return u+e}function o(){return l}var c=n("#settings"),u=c.data("base-url"),l=JSON.parse(c.data("sizes").replaceAll("'",'"'));t.fireBroadcast=i,t.baseUrl=a,t.imgSizes=o,t.dirUrl=function(e,n){return r("dir",e,n)},t.fileUrl=function(e,n){return r("file",e,n)}}t.filemanager.run(i),i.$inject=["$rootScope"]}(angular,jQuery,window.crip||(window.crip={})),function(e,n,t){"use strict";function i(n,t,i,r,a,o){function c(){n.canDeleteSelected=u,n.deleteSelected=l,n.canCreateFolder=s,n.createFolder=m,n.canRenameSelected=d,n.enableRenameSelected=f,n.canOpenSelected=p,n.openSelected=g,n.hasProperties=_,n.openProperties=v}function u(){return r.canDelete(a.getSelectedItem())}function l(n){e.isDefined(n)&&e.isDefined(n.stopPropagation)&&n.stopPropagation(),r["delete"](a.getSelectedItem()),a.deselect()}function s(){return r.canCreateFolder()}function m(e){r.createFolder(e,f)}function d(){return r.canRename(a.getSelectedItem())}function f(n){var t=a.getSelectedItem();e.isDefined(n)&&e.isDefined(n.stopPropagation)&&n.stopPropagation(),t&&(r.enableRename(t),i('#{identifier} input[name="name"]'.supplant(t)))}function p(){return a.getSelectedItem().isDir}function g(){p()&&o.change(a.getSelectedItem())}function _(){var e=a.getSelectedItem();return e&&!e.isDirUp}function v(e){_()&&(e.stopPropagation(),t.open({animation:!0,templateUrl:"item-properties-modal.html",controller:"ItemPropertiesController",size:"lg",resolve:{item:function(){return a.getSelectedItem()}}}))}c()}t.filemanager.controller("ActionsController",i),i.$inject=["$scope","$uibModal","focus","CripManagerActions","CripManagerContent","CripManagerLocation"]}(angular,jQuery,window.crip||(window.crip={})),function(e,n){"use strict";function t(e,n,t){function i(){e.goTo=r,e.goToRoot=a,e.breadcrumbHasItems=o,e.getBreadcrumbItems=c}function r(e){t.change(e)}function a(){r()}function o(){return n.hasItems()}function c(){return n.items}i()}n.filemanager.controller("BreadcrumbController",t),t.$inject=["$scope","CripManagerBreadcrumb","CripManagerLocation"]}(angular,window.crip),function(e,n){"use strict";function t(e,n,t){function i(){n.folderFilter=a,n.order={by:r,field:"full_name",isReverse:!1,full_name:!0,size:!1,date:!1},n.filters={image:!0,media:!0,document:!0,file:!0},n.getContent=function(){return t.get()}}function r(e){var t="z {field}";if(e.isDir){if(e.isDirUp)return-1;t="0 {field}"}return t.supplant({field:e[n.order.field]})}function a(e,t,i){return e.isDir?!0:n.filters[e.type]}i()}n.filemanager.controller("DirContentController",t),t.$inject=["$log","$scope","CripManagerContent"]}(angular,window.crip||(window.crip={})),function(e,n){"use strict";function t(e,n,t,i,r,a){function o(){n.click=c,n.dblclick=u,n.isSelected=l,n.enableRename=s}function c(e,n){e.stopPropagation(),i.updateSelected(),i.deselect(),i.selectSingle(n)}function u(n,t){n.stopPropagation(),e.info("dblclick",t),t.isDir&&r.change(t)}function l(e){return i.isSelected(e)}function s(e){e.stopPropagation();var n=i.getSelectedItem();a.enableRename(n),t('#{identifier} input[name="name"]'.supplant(n))}o()}n.filemanager.controller("ItemController",t),t.$inject=["$log","$scope","focus","CripManagerContent","CripManagerLocation","CripManagerActions"]}(angular,window.crip||(window.crip={})),function(e,n){"use strict";function t(n,t,i,r,a){function o(){n.info(a),t.item=u(a),t.thumb=a.thumb,t.name=a.full_name,t.close=c}function c(){i.close()}function u(e){return e.isDir?s(e):m(e)}function l(e,n){e.push({name:r("item_properties_modal_item_type"),value:r("item_properties_modal_file_type_"+n.type)},{name:r("item_properties_modal_name"),value:n.full_name},{name:r("item_properties_modal_date"),value:n.date},{name:r("item_properties_modal_size"),value:n.getSize()})}function s(e){var n=[];return l(n,e),n}function m(n){var i=[];return l(i,n),""!==n.dir&&i.push({name:r("item_properties_modal_item_dir"),value:n.dir}),i.push({name:r("item_properties_modal_item_extension"),value:n.ext}),"image"===n.type?(i.push({name:r("item_properties_modal_item_url"),value:'<a href="{url}" target="_blank">{title}</a>'.supplant({url:n.url,title:r("item_properties_modal_size_dim").supplant(n.dimensions)})}),e.forEach(t.imgSizes(),function(e,t){i.push({name:r("item_properties_modal_size_url_title").supplant({size:r("item_properties_modal_size_key_"+t)}),value:'<a href="{url}?thumb={size}" target="_blank">{title}</a>'.supplant({url:n.url,size:t,title:r("item_properties_modal_size_dim").supplant(e)})})})):i.push({name:r("item_properties_modal_item_url"),value:'<a href="{url}" target="_blank">{full_name}</a>'.supplant(n)}),i}o()}n.filemanager.controller("ItemPropertiesController",t),t.$inject=["$log","$scope","$uibModalInstance","CripManagerTrans","item"]}(angular,window.crip),function(e,n){"use strict";function t(e,n,t,i){function r(){i().init(),n.init(),e.deselect=a}function a(){t.deselect()}r()}n.filemanager.controller("RootController",t),t.$inject=["$scope","CripManagerLocation","CripManagerContent","CripManagerTrans"]}(angular,window.crip||(window.crip={})),function(e){"use strict";function n(e,n){return e(n.dirUrl(":dir/:name"),{dir:"@dir",name:"@name"},{create:{url:n.dirUrl(":dir/:name","create"),method:"POST"},deleteDir:{url:n.dirUrl(":dir","delete"),method:"GET"},deleteFile:{url:n.fileUrl(":dir/:name","delete"),method:"GET"},renameDir:{url:n.dirUrl(":dir","rename"),method:"GET"},renameFile:{url:n.fileUrl(":dir","rename"),method:"GET"}})}e.filemanager.service("Dir",n),n.$inject=["$resource","$rootScope"]}(window.crip||(window.crip={})),function(e,n){"use strict";function t(e,n){return e(n.baseUrl("translations"))}n.filemanager.service("CripManagerTranslations",t),t.$inject=["$resource","$rootScope"]}(angular,window.crip),function(e,n){"use strict";function t(n,t,i){var r={};return e.extend(r,n,t,i),r}n.filemanager.service("CripManagerActions",t),t.$inject=["CreateFolderService","DeleteService","RenameService"]}(angular,window.crip),function(e,n){"use strict";function t(){function n(){return 0===a.items.length?{dir:"",name:""}:a.items[a.items.length-1]}function t(){return!!a.items.length}function i(e){r({dir:e.dir,name:e.name})}function r(n){var t=n.dir||"";a.items.splice(0,a.items.length),""!==n.name&&null!==n.name&&(t+="/"+n.name),e.forEach(t.split("/"),function(e){if(""!==e&&null!==e){var n="";a.items.length>0&&(n=1===a.items.length?a.items[0].name:"{dir}/{name}".supplant(a.items[a.items.length-1])),a.items.push({name:e,dir:n,isActive:!1})}}),a.items.length>0&&(a.items[a.items.length-1].isActive=!0)}var a={items:[],hasItems:t,current:n,set:i};return a}n.filemanager.service("CripManagerBreadcrumb",t),t.$inject=[]}(angular,window.crip),function(e,n){"use strict";function t(n,t){function i(){return c.items}function r(){c.items.splice(0,c.items.length)}function a(t){e.isDefined(t.is_extended)||n.extendItem(t),c.items.push(t)}function o(e){c.items.splice(c.items.indexOf(e),1)}var c={items:[],get:i,add:a,remove:o,removeItems:r};return e.extend(c,t),c}n.filemanager.service("CripManagerContent",t),t.$inject=["ItemService","SelectService"]}(angular,window.crip),function(e,n){"use strict";function t(n,t,i){function r(n){e.extend(n,{getItems:function(){var t=[];return e.forEach(n,function(e,n){l(e,n),this.push(e)},t),t}})}function a(e){return"list-item-"+e}function o(e){return e.substring(10)}function c(n){return n&&e.isDefined(n.type)&&"dir"===n.type}function u(e){return c(e)&&(""==e.name||null==e.name)}function l(n,t){e.extend(n,{is_extended:!0,rename:!1,identifier:a(t),isDir:c(n),isDirUp:u(n),update:s,"delete":f,getFullName:m,saveNewName:d,getSize:p})}function s(){return this.rename&&this.saveNewName(),this}function m(){return this.isDir||""===this.ext?this.name:"{name}.{ext}".supplant(this)}function d(){var n=this,t=o(n.identifier);if(n.rename=!1,n.full_name!==n.getFullName()){var i=n.isDir?"$renameDir":"$renameFile";n[i]({old:n.full_name,"new":n.getFullName()},function(i){e.extend(n,l(i,t))})}}function f(){var e=this.isDir?"$deleteDir":"$deleteFile";this[e]({name:this.full_name})}function p(){return this.size.toBytes()}return{extend:r,extendItem:l}}n.filemanager.service("ItemService",t),t.$inject=["$log","$rootScope","CripManagerTrans"]}(angular,window.crip||(window.crip={})),function(e,n){"use strict";function t(n,t,i,r,a){function o(){c(u())}function c(n){var o={dir:null,name:null};e.isDefined(n)&&(o.dir=e.isEmpty(n.dir)?null:n.dir,o.name=e.isEmpty(n.name)?null:n.name),t.query(o,function(n){l(o),i.extend(n),a.removeItems(),a.deselect(),r.set(o),e.forEach(n.getItems(),function(e){a.add(e)})})}function u(){var t={dir:null,name:null},i=n.get("location-dir"),r=n.get("location-dir-name");return(e.hasValue(i)||e.hasValue(r))&&(t.dir=i,r&&"null"!==r&&null!==r||(r=""),t.name=r),t}function l(e){n.put("location-dir",e.dir||""),n.put("location-dir-name",e.name||"")}return{init:o,change:c,current:{}}}n.filemanager.service("CripManagerLocation",t),t.$inject=["$cookies","Dir","ItemService","CripManagerBreadcrumb","CripManagerContent"]}(angular,window.crip),function(e,n){"use strict";function t(e){var n={};return function(t){return t?n[t]:{init:function(){n=e.get()}}}}n.filemanager.service("CripManagerTrans",t),t.$inject=["CripManagerTranslations"]}(angular,window.crip),function(e,n){"use strict";function t(n,t,i,r){function a(){return!c._createInProgress}function o(r,o){return a()?(c._createInProgress=!0,void n.create(t.current(),{name:r},function(n){c._createInProgress=!1,i.add(n),i.selectSingle(n),e.isDefined(o)&&e.isFunction(o)&&o(n)})):!1}var c={_createInProgress:!1,canCreateFolder:a,createFolder:o};return c}n.filemanager.service("CreateFolderService",t),t.$inject=["Dir","CripManagerBreadcrumb","CripManagerContent","RenameService"]}(angular,window.crip),function(e,n){"use strict";function t(){function e(e){return e?!e.isDirUp:!1}function n(n){return e(n)?n["delete"]():!1}return{canDelete:e,"delete":n}}n.filemanager.service("DeleteService",t)}(angular,window.crip||(window.crip={})),function(e,n){"use strict";function t(){function e(e){return e?!e.isDirUp:!1}function n(n){return e(n)?n.rename=!0:!1}function t(n){return e(n)?n.update():!1}return{canRename:e,enableRename:n,rename:t}}n.filemanager.service("RenameService",t)}(angular,window.crip),function(e,n){"use strict";function t(){function n(){return!!s.selected.length}function t(t){if(!n())return!1;var i=!1;return e.forEach(s.selected,function(n){e.equals(t,n)&&(i=!0)}),i}function i(){return 1===s.selected.length}function r(){return i()?s.selected[0]:!1}function a(){return s.selected}function o(e){s.selected.push(e)}function c(){l(),s.selected.splice(0,s.selected.length)}function u(e){c(),o(e)}function l(){e.forEach(a(),function(e){e.update()})}var s={selected:[],select:o,selectSingle:u,deselect:c,isSelected:t,isSelectedOne:i,isSelectedAny:n,getSelectedItem:r,getSelectedItems:a,updateSelected:l};return s}n.filemanager.service("SelectService",t)}(angular,window.crip);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9zb3VyY2UvbW9kdWxlLmpzIiwiL3NvdXJjZS9ydW4uanMiLCIvc291cmNlL2NvbnRyb2xsZXJzL0FjdGlvbnNDb250cm9sbGVyLmpzIiwiL3NvdXJjZS9jb250cm9sbGVycy9CcmVhZGNydW1iQ29udHJvbGxlci5qcyIsIi9zb3VyY2UvY29udHJvbGxlcnMvRGlyQ29udGVudENvbnRyb2xsZXIuanMiLCIvc291cmNlL2NvbnRyb2xsZXJzL0l0ZW1Db250cm9sbGVyLmpzIiwiL3NvdXJjZS9jb250cm9sbGVycy9JdGVtUHJvcGVydGllc0NvbnRyb2xsZXIuanMiLCIvc291cmNlL2NvbnRyb2xsZXJzL1Jvb3RDb250cm9sbGVyLmpzIiwiL3NvdXJjZS9yZXNvdXJjZXMvRGlyLmpzIiwiL3NvdXJjZS9yZXNvdXJjZXMvVHJhbnNsYXRpb25zLmpzIiwiL3NvdXJjZS9zZXJ2aWNlcy9BY3Rpb25zLmpzIiwiL3NvdXJjZS9zZXJ2aWNlcy9CcmVhZGNydW1iLmpzIiwiL3NvdXJjZS9zZXJ2aWNlcy9Db250ZW50LmpzIiwiL3NvdXJjZS9zZXJ2aWNlcy9JdGVtU2VydmljZS5qcyIsIi9zb3VyY2Uvc2VydmljZXMvTG9jYXRpb24uanMiLCIvc291cmNlL3NlcnZpY2VzL1RyYW5zLmpzIiwiL3NvdXJjZS9zZXJ2aWNlcy9hY3Rpb25zL0NyZWF0ZUZvbGRlclNlcnZpY2UuanMiLCIvc291cmNlL3NlcnZpY2VzL2FjdGlvbnMvRGVsZXRlU2VydmljZS5qcyIsIi9zb3VyY2Uvc2VydmljZXMvYWN0aW9ucy9SZW5hbWVTZXJ2aWNlLmpzIiwiL3NvdXJjZS9zZXJ2aWNlcy9jb250ZW50L1NlbGVjdFNlcnZpY2UuanMiXSwibmFtZXMiOlsibmciLCJjcmlwIiwiZmlsZW1hbmFnZXIiLCJtb2R1bGUiLCJhbmd1bGFyIiwid2luZG93IiwiJCIsIlJ1biIsIiRyb290U2NvcGUiLCJicm9hZGNhc3QiLCJldmVudE5hbWUiLCJhcmdzIiwiJGJyb2FkY2FzdCIsImFjdGlvblVybCIsInJvb3QiLCJkaXIiLCJhY3Rpb24iLCJwYXRoIiwiaXNEZWZpbmVkIiwiYmFzZVVybCIsImJhc2VfdXJsIiwiaW1nU2l6ZXMiLCJpbWdfc2l6ZXMiLCIkc2V0dGluZ3MiLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwicmVwbGFjZUFsbCIsImZpcmVCcm9hZGNhc3QiLCJkaXJVcmwiLCJmaWxlVXJsIiwicnVuIiwiJGluamVjdCIsImpRdWVyeSIsIkFjdGlvbnNDb250cm9sbGVyIiwiJHNjb3BlIiwiJHVpYk1vZGFsIiwiZm9jdXMiLCJBY3Rpb25zIiwiQ29udGVudCIsIkxvY2F0aW9uIiwiYWN0aXZhdGUiLCJjYW5EZWxldGVTZWxlY3RlZCIsImRlbGV0ZVNlbGVjdGVkIiwiY2FuQ3JlYXRlRm9sZGVyIiwiY3JlYXRlRm9sZGVyIiwiY2FuUmVuYW1lU2VsZWN0ZWQiLCJlbmFibGVSZW5hbWVTZWxlY3RlZCIsImNhbk9wZW5TZWxlY3RlZCIsIm9wZW5TZWxlY3RlZCIsImhhc1Byb3BlcnRpZXMiLCJvcGVuUHJvcGVydGllcyIsImNhbkRlbGV0ZSIsImdldFNlbGVjdGVkSXRlbSIsIiRldmVudCIsInN0b3BQcm9wYWdhdGlvbiIsImRlc2VsZWN0IiwibmFtZSIsImNhblJlbmFtZSIsIml0ZW0iLCJlbmFibGVSZW5hbWUiLCJzdXBwbGFudCIsImlzRGlyIiwiY2hhbmdlIiwiaXNEaXJVcCIsIm9wZW4iLCJhbmltYXRpb24iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJzaXplIiwicmVzb2x2ZSIsIkJyZWFkY3J1bWJDb250cm9sbGVyIiwiQnJlYWRjcnVtYiIsImdvVG8iLCJnb1RvUm9vdCIsImJyZWFkY3J1bWJIYXNJdGVtcyIsImdldEJyZWFkY3J1bWJJdGVtcyIsImZvbGRlciIsImhhc0l0ZW1zIiwiaXRlbXMiLCJEaXJDb250ZW50Q29udHJvbGxlciIsIiRsb2ciLCJmb2xkZXJGaWx0ZXIiLCJvcmRlciIsImJ5Iiwib3JkZXJCeSIsImZpZWxkIiwiaXNSZXZlcnNlIiwiZnVsbF9uYW1lIiwiZGF0ZSIsImZpbHRlcnMiLCJpbWFnZSIsIm1lZGlhIiwiZG9jdW1lbnQiLCJmaWxlIiwiZ2V0Q29udGVudCIsImdldCIsInRleHQiLCJ2YWx1ZSIsImluZGV4IiwiYXJyYXkiLCJ0eXBlIiwiSXRlbUNvbnRyb2xsZXIiLCJjbGljayIsImRibGNsaWNrIiwiaXNTZWxlY3RlZCIsImUiLCJ1cGRhdGVTZWxlY3RlZCIsInNlbGVjdFNpbmdsZSIsImluZm8iLCJJdGVtUHJvcGVydGllc0NvbnRyb2xsZXIiLCIkdWliTW9kYWxJbnN0YW5jZSIsIlRyYW5zIiwicmVzb2x2ZUl0ZW1EZXRhaWxzIiwidGh1bWIiLCJjbG9zZSIsInJlc29sdmVEaXJEZXRhaWxzIiwicmVzb2x2ZUZpbGVEZXRhaWxzIiwiZGVmYXVsdERldGFpbHMiLCJkZXRhaWxzIiwicHVzaCIsImdldFNpemUiLCJleHQiLCJ1cmwiLCJ0aXRsZSIsImRpbWVuc2lvbnMiLCJmb3JFYWNoIiwiYXJyIiwiUm9vdENvbnRyb2xsZXIiLCJpbml0IiwiRGlyIiwiJHJlc291cmNlIiwiY3JlYXRlIiwibWV0aG9kIiwiZGVsZXRlRGlyIiwiZGVsZXRlRmlsZSIsInJlbmFtZURpciIsInJlbmFtZUZpbGUiLCJzZXJ2aWNlIiwiVHJhbnNsYXRpb25zIiwiQ3JlYXRlRm9sZGVyIiwiRGVsZXRlIiwiUmVuYW1lIiwic2NvcGUiLCJleHRlbmQiLCJjdXJyZW50IiwiYnJlYWRjcnVtYiIsImxlbmd0aCIsInNldExvY2F0aW9uIiwib25Mb2NhdGlvbkNoYW5nZSIsInZhbCIsInN0cmluZ192YWx1ZSIsInNwbGljZSIsInNwbGl0IiwidiIsImlzQWN0aXZlIiwic2V0IiwiSXRlbVNlcnZpY2UiLCJTZWxlY3RTZXJ2aWNlIiwiZ2V0SXRlbXMiLCJjb250ZW50IiwicmVtb3ZlSXRlbXMiLCJhZGQiLCJpc19leHRlbmRlZCIsImV4dGVuZEl0ZW0iLCJyZW1vdmUiLCJpbmRleE9mIiwicmVzb3VyY2VEYXRhIiwiayIsInRoaXMiLCJpZEdlbiIsImtleSIsImdldEtleSIsImlkZW50aWZpZXIiLCJzdWJzdHJpbmciLCJyZW5hbWUiLCJ1cGRhdGUiLCJkZWxldGUiLCJkZWxldGVJdGVtIiwiZ2V0RnVsbE5hbWUiLCJzYXZlTmV3TmFtZSIsInNlbGYiLCJvbGQiLCJuZXciLCJyZXNwb25zZSIsInRvQnl0ZXMiLCJDaGFuZ2VMb2NhdGlvblNlcnZpY2UiLCIkY29va2llcyIsImluaXRpYWxMb2FkIiwiZ2V0TG9jYXRpb25Gcm9tQ29va2llIiwiaXNFbXB0eSIsInF1ZXJ5IiwiciIsInVwZGF0ZUNvb2tpZSIsImxvY2F0aW9uIiwiY29va2llRGlyIiwiaGFzVmFsdWUiLCJwdXQiLCJ0cmFuc2xhdGlvbnMiLCJDcmVhdGVGb2xkZXJTZXJ2aWNlIiwiX2NyZWF0ZUluUHJvZ3Jlc3MiLCJjYWxsYmFjayIsImlzRnVuY3Rpb24iLCJEZWxldGVTZXJ2aWNlIiwiUmVuYW1lU2VydmljZSIsImlzU2VsZWN0ZWRBbnlJdGVtIiwic2VsZWN0Iiwic2VsZWN0ZWQiLCJpc1NlbGVjdGVkSXRlbSIsInNlbGVjdGVkX2l0ZW0iLCJlcXVhbHMiLCJpc1NlbGVjdGVkT25lSXRlbSIsImdldFNlbGVjdGVkSXRlbXMiLCJzZWxlY3RJdGVtIiwiZGVzZWxlY3RTZWxlY3RlZEl0ZW1zIiwidXBkYXRlU2VsZWN0ZWRJdGVtcyIsInNlbGVjdFNpbmdsZUl0ZW0iLCJpc1NlbGVjdGVkT25lIiwiaXNTZWxlY3RlZEFueSJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FDQSxZQUVBQSxHQUFBQyxZQUFBRixFQUFBRyxPQUFBLHFCQUNBLFlBQ0Esc0JBQ0Esb0JBQ0EsWUFDQSxhQUNBLGFBQ0EsZUFDQSxrQkFDQSwyQkFFQUMsUUFBQUMsT0FBQUosT0FBQUksT0FBQUosVUNkQSxTQUFBRCxFQUFBTSxFQUFBTCxHQUNBLFlBU0EsU0FBQU0sR0FBQUMsR0FxQ0EsUUFBQUMsR0FBQUMsRUFBQUMsR0FDQUgsRUFBQUksV0FBQUYsRUFBQUMsR0FTQSxRQUFBRSxHQUFBQyxFQUFBQyxFQUFBQyxHQUNBLEdBQUFD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ZUFBQTRHLEVBR0EsT0FBQVQsR0FqQkE3TSxFQUFBQyxZQUNBd0ksUUFBQSxnQkFBQW9CLElBbUhBMUosUUFBQUMsT0FBQUoiLCJmaWxlIjoiZmlsZS1tYW5hZ2VyLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyID0gbmcubW9kdWxlKCdjcmlwLmZpbGUtbWFuYWdlcicsIFtcclxuICAgICAgICAnY3JpcC5jb3JlJyxcclxuICAgICAgICAnYW5ndWxhci1sb2FkaW5nLWJhcicsXHJcbiAgICAgICAgJ2FuZ3VsYXJGaWxlVXBsb2FkJyxcclxuICAgICAgICAnbmdDb29raWVzJyxcclxuICAgICAgICAnbmdSZXNvdXJjZScsXHJcbiAgICAgICAgJ25nU2FuaXRpemUnLFxyXG4gICAgICAgICd1aS5ib290c3RyYXAnLFxyXG4gICAgICAgICd1aS1ub3RpZmljYXRpb24nLFxyXG4gICAgICAgICdpby5kZW5uaXMuY29udGV4dG1lbnUnXHJcbiAgICBdKVxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCB8fCAod2luZG93LmNyaXAgPSB7fSkpOyIsIihmdW5jdGlvbiAobmcsICQsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyXHJcbiAgICAgICAgLnJ1bihSdW4pO1xyXG5cclxuICAgIFJ1bi4kaW5qZWN0ID0gW1xyXG4gICAgICAgICckcm9vdFNjb3BlJ1xyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBSdW4oJHJvb3RTY29wZSkge1xyXG4gICAgICAgIHZhciAkc2V0dGluZ3MgPSAkKCcjc2V0dGluZ3MnKSxcclxuICAgICAgICAgICAgYmFzZV91cmwgPSAkc2V0dGluZ3MuZGF0YSgnYmFzZS11cmwnKSxcclxuICAgICAgICAgICAgaW1nX3NpemVzID0gSlNPTi5wYXJzZSgkc2V0dGluZ3MuZGF0YSgnc2l6ZXMnKS5yZXBsYWNlQWxsKFwiJ1wiLCAnXCInKSk7XHJcblxyXG4gICAgICAgICRyb290U2NvcGUuZmlyZUJyb2FkY2FzdCA9IGJyb2FkY2FzdDtcclxuICAgICAgICAkcm9vdFNjb3BlLmJhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgICAgICRyb290U2NvcGUuaW1nU2l6ZXMgPSBpbWdTaXplcztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IHBsdWdpbiBkaXIgYWN0aW9uIHVybFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGRpclxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbYWN0aW9uXVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgJHJvb3RTY29wZS5kaXJVcmwgPSBmdW5jdGlvbiAoZGlyLCBhY3Rpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFjdGlvblVybCgnZGlyJywgZGlyLCBhY3Rpb24pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBwbHVnaW4gZmlsZSBhY3Rpb24gdXJsXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGlyXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFthY3Rpb25dXHJcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgICAgICAgKi9cclxuICAgICAgICAkcm9vdFNjb3BlLmZpbGVVcmwgPSBmdW5jdGlvbiAoZGlyLCBhY3Rpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFjdGlvblVybCgnZmlsZScsIGRpciwgYWN0aW9uKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBGaXJlIGV2ZW50IG9uIHJvb3Qgc2NvcGUgZm9yIGFsbCBjb250cm9sbGVyc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZVxyXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGFyZ3NcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBicm9hZGNhc3QoZXZlbnROYW1lLCBhcmdzKSB7XHJcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdChldmVudE5hbWUsIGFyZ3MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHJvb3RcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGlyXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFthY3Rpb25dXHJcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBhY3Rpb25Vcmwocm9vdCwgZGlyLCBhY3Rpb24pIHtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSByb290ICsgJy8nO1xyXG4gICAgICAgICAgICBpZiAobmcuaXNEZWZpbmVkKGFjdGlvbikpIHtcclxuICAgICAgICAgICAgICAgIHBhdGggKz0gYWN0aW9uICsgJy8nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcGF0aCArPSBkaXI7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYmFzZVVybChwYXRoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBwbHVnaW4gYmFzZSB1cmxcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoXHJcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBiYXNlVXJsKHBhdGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJhc2VfdXJsICsgcGF0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGltZ1NpemVzKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gaW1nX3NpemVzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoYW5ndWxhciwgalF1ZXJ5LCB3aW5kb3cuY3JpcCB8fCAod2luZG93LmNyaXAgPSB7fSkpOyIsIihmdW5jdGlvbiAobmcsICQsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0FjdGlvbnNDb250cm9sbGVyJywgQWN0aW9uc0NvbnRyb2xsZXIpO1xyXG5cclxuICAgIEFjdGlvbnNDb250cm9sbGVyLiRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRzY29wZScsICckdWliTW9kYWwnLCAnZm9jdXMnLCAnQ3JpcE1hbmFnZXJBY3Rpb25zJywgJ0NyaXBNYW5hZ2VyQ29udGVudCcsICdDcmlwTWFuYWdlckxvY2F0aW9uJ1xyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBBY3Rpb25zQ29udHJvbGxlcigkc2NvcGUsICR1aWJNb2RhbCwgZm9jdXMsIEFjdGlvbnMsIENvbnRlbnQsIExvY2F0aW9uKSB7XHJcbiAgICAgICAgYWN0aXZhdGUoKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5jYW5EZWxldGVTZWxlY3RlZCA9IGNhbkRlbGV0ZVNlbGVjdGVkO1xyXG4gICAgICAgICAgICAkc2NvcGUuZGVsZXRlU2VsZWN0ZWQgPSBkZWxldGVTZWxlY3RlZDtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5jYW5DcmVhdGVGb2xkZXIgPSBjYW5DcmVhdGVGb2xkZXI7XHJcbiAgICAgICAgICAgICRzY29wZS5jcmVhdGVGb2xkZXIgPSBjcmVhdGVGb2xkZXI7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuY2FuUmVuYW1lU2VsZWN0ZWQgPSBjYW5SZW5hbWVTZWxlY3RlZDtcclxuICAgICAgICAgICAgJHNjb3BlLmVuYWJsZVJlbmFtZVNlbGVjdGVkID0gZW5hYmxlUmVuYW1lU2VsZWN0ZWQ7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuY2FuT3BlblNlbGVjdGVkID0gY2FuT3BlblNlbGVjdGVkO1xyXG4gICAgICAgICAgICAkc2NvcGUub3BlblNlbGVjdGVkID0gb3BlblNlbGVjdGVkO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmhhc1Byb3BlcnRpZXMgPSBoYXNQcm9wZXJ0aWVzO1xyXG4gICAgICAgICAgICAkc2NvcGUub3BlblByb3BlcnRpZXMgPSBvcGVuUHJvcGVydGllcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERldGVybWluZXMgaWYgc2VsZWN0ZWQgaXRlbSBjYW4gYmUgZGVsZXRlZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2FuRGVsZXRlU2VsZWN0ZWQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBBY3Rpb25zLmNhbkRlbGV0ZShDb250ZW50LmdldFNlbGVjdGVkSXRlbSgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERlbGV0ZSBzZWxlY3RlZCBpdGVtXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gJGV2ZW50XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZGVsZXRlU2VsZWN0ZWQoJGV2ZW50KSB7XHJcbiAgICAgICAgICAgIC8vIGlmIGV2ZW50IGlzIHByZXNlbnRlZCwgc3RvcCBpdCBwcm9wYWdhdGlvblxyXG4gICAgICAgICAgICBpZiAobmcuaXNEZWZpbmVkKCRldmVudCkgJiYgbmcuaXNEZWZpbmVkKCRldmVudC5zdG9wUHJvcGFnYXRpb24pKSB7XHJcbiAgICAgICAgICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEFjdGlvbnMuZGVsZXRlKENvbnRlbnQuZ2V0U2VsZWN0ZWRJdGVtKCkpO1xyXG4gICAgICAgICAgICBDb250ZW50LmRlc2VsZWN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlcm1pbmVzIGlmIGNhbiBjcmVhdGUgbmV3IGZvbGRlclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2FuQ3JlYXRlRm9sZGVyKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gQWN0aW9ucy5jYW5DcmVhdGVGb2xkZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZSBuZXcgZm9sZGVyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUZvbGRlcihuYW1lKSB7XHJcbiAgICAgICAgICAgIEFjdGlvbnMuY3JlYXRlRm9sZGVyKG5hbWUsIGVuYWJsZVJlbmFtZVNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERldGVybWluZXMgaWYgc2VsZWN0ZWQgaXRlbSBjYW4gYmUgcmVuYW1lZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2FuUmVuYW1lU2VsZWN0ZWQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBBY3Rpb25zLmNhblJlbmFtZShDb250ZW50LmdldFNlbGVjdGVkSXRlbSgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEVuYWJsZSByZW5hbWUgZm9yIHNlbGVjdGVkIGl0ZW1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSAkZXZlbnRcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBlbmFibGVSZW5hbWVTZWxlY3RlZCgkZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSBDb250ZW50LmdldFNlbGVjdGVkSXRlbSgpO1xyXG5cclxuICAgICAgICAgICAgLy8gaWYgZXZlbnQgaXMgcHJlc2VudGVkLCBzdG9wIGl0IHByb3BhZ2F0aW9uXHJcbiAgICAgICAgICAgIGlmIChuZy5pc0RlZmluZWQoJGV2ZW50KSAmJiBuZy5pc0RlZmluZWQoJGV2ZW50LnN0b3BQcm9wYWdhdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIEFjdGlvbnMuZW5hYmxlUmVuYW1lKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgZm9jdXMoJyN7aWRlbnRpZmllcn0gaW5wdXRbbmFtZT1cIm5hbWVcIl0nLnN1cHBsYW50KGl0ZW0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV0ZXJtaW5lcyBpZiBjYW4gb3BlbiBzZWxlY3RlZCBpdGVtXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjYW5PcGVuU2VsZWN0ZWQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBDb250ZW50LmdldFNlbGVjdGVkSXRlbSgpLmlzRGlyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogT3BlbiBzZWxlY3RlZCBkaXJlY3RvcnlcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBvcGVuU2VsZWN0ZWQoKSB7XHJcbiAgICAgICAgICAgIGlmICghY2FuT3BlblNlbGVjdGVkKCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBMb2NhdGlvbi5jaGFuZ2UoQ29udGVudC5nZXRTZWxlY3RlZEl0ZW0oKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlcm1pbmVzIGlzIHNlbGVjdGVkIGl0ZW0gY2FuIHByb3ZpZGUgcHJvcGVydGllc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gaGFzUHJvcGVydGllcygpIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSBDb250ZW50LmdldFNlbGVjdGVkSXRlbSgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0gJiYgIWl0ZW0uaXNEaXJVcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5Qcm9wZXJ0aWVzKCRldmVudCkge1xyXG4gICAgICAgICAgICBpZiAoIWhhc1Byb3BlcnRpZXMoKSlcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgICR1aWJNb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnaXRlbS1wcm9wZXJ0aWVzLW1vZGFsLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0l0ZW1Qcm9wZXJ0aWVzQ29udHJvbGxlcicsXHJcbiAgICAgICAgICAgICAgICBzaXplOiAnbGcnLFxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW06IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENvbnRlbnQuZ2V0U2VsZWN0ZWRJdGVtKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKGFuZ3VsYXIsIGpRdWVyeSwgd2luZG93LmNyaXAgfHwgKHdpbmRvdy5jcmlwID0ge30pKTsiLCIoZnVuY3Rpb24gKG5nLCBjcmlwKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgY3JpcC5maWxlbWFuYWdlclxyXG4gICAgICAgIC5jb250cm9sbGVyKCdCcmVhZGNydW1iQ29udHJvbGxlcicsIEJyZWFkY3J1bWJDb250cm9sbGVyKTtcclxuXHJcbiAgICBCcmVhZGNydW1iQ29udHJvbGxlci4kaW5qZWN0ID0gW1xyXG4gICAgICAgICckc2NvcGUnLCAnQ3JpcE1hbmFnZXJCcmVhZGNydW1iJywgJ0NyaXBNYW5hZ2VyTG9jYXRpb24nXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIEJyZWFkY3J1bWJDb250cm9sbGVyKCRzY29wZSwgQnJlYWRjcnVtYiwgTG9jYXRpb24pIHtcclxuICAgICAgICBhY3RpdmF0ZSgpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmdvVG8gPSBnb1RvO1xyXG4gICAgICAgICAgICAkc2NvcGUuZ29Ub1Jvb3QgPSBnb1RvUm9vdDtcclxuICAgICAgICAgICAgJHNjb3BlLmJyZWFkY3J1bWJIYXNJdGVtcyA9IGJyZWFkY3J1bWJIYXNJdGVtcztcclxuICAgICAgICAgICAgJHNjb3BlLmdldEJyZWFkY3J1bWJJdGVtcyA9IGdldEJyZWFkY3J1bWJJdGVtcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdvIHRvIHNwZWNpZmllZCBmb2xkZXJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBmb2xkZXJcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZm9sZGVyLmRpclxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmb2xkZXIubmFtZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGdvVG8oZm9sZGVyKSB7XHJcbiAgICAgICAgICAgIExvY2F0aW9uLmNoYW5nZShmb2xkZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR28gdG8gcm9vdCBmb2xkZXIgbG9jYXRpb25cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBnb1RvUm9vdCgpIHtcclxuICAgICAgICAgICAgZ29UbygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV0ZXJtaW5lcyBpcyBCcmVhZGNydW1iIGFueSBpdGVtXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBicmVhZGNydW1iSGFzSXRlbXMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBCcmVhZGNydW1iLmhhc0l0ZW1zKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgQnJlYWRjcnVtYiBpdGVtIGNvbGxlY3Rpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheX1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBnZXRCcmVhZGNydW1iSXRlbXMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBCcmVhZGNydW1iLml0ZW1zO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoYW5ndWxhciwgd2luZG93LmNyaXApOyIsIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0RpckNvbnRlbnRDb250cm9sbGVyJywgRGlyQ29udGVudENvbnRyb2xsZXIpO1xyXG5cclxuICAgIERpckNvbnRlbnRDb250cm9sbGVyLiRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRsb2cnLCAnJHNjb3BlJywgJ0NyaXBNYW5hZ2VyQ29udGVudCdcclxuICAgIF07XHJcblxyXG4gICAgZnVuY3Rpb24gRGlyQ29udGVudENvbnRyb2xsZXIoJGxvZywgJHNjb3BlLCBDb250ZW50KSB7XHJcbiAgICAgICAgYWN0aXZhdGUoKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5mb2xkZXJGaWx0ZXIgPSBmb2xkZXJGaWx0ZXI7XHJcbiAgICAgICAgICAgICRzY29wZS5vcmRlciA9IHtcclxuICAgICAgICAgICAgICAgIGJ5OiBvcmRlckJ5LFxyXG4gICAgICAgICAgICAgICAgZmllbGQ6ICdmdWxsX25hbWUnLFxyXG4gICAgICAgICAgICAgICAgaXNSZXZlcnNlOiBmYWxzZSxcclxuXHJcbiAgICAgICAgICAgICAgICBmdWxsX25hbWU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGRhdGU6IGZhbHNlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICRzY29wZS5maWx0ZXJzID0ge1xyXG4gICAgICAgICAgICAgICAgaW1hZ2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBtZWRpYTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZmlsZTogdHJ1ZVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmdldENvbnRlbnQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBDb250ZW50LmdldCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBvcmRlckJ5KGl0ZW0pIHtcclxuICAgICAgICAgICAgdmFyIHRleHQgPSAneiB7ZmllbGR9JztcclxuICAgICAgICAgICAgaWYgKGl0ZW0uaXNEaXIpIHtcclxuICAgICAgICAgICAgICAgIC8vIGRpciB1cCBzaG91bGQgYmUgb24gZmlyc3QgcGxhY2VcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLmlzRGlyVXApXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICAgICAgdGV4dCA9ICcwIHtmaWVsZH0nO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyRsb2cuaW5mbygkc2NvcGUub3JkZXIuZmllbGQsIHRleHQuc3VwcGxhbnQoe2ZpZWxkOiBpdGVtWyRzY29wZS5vcmRlci5maWVsZF19KSwgaXRlbSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0ZXh0LnN1cHBsYW50KHtmaWVsZDogaXRlbVskc2NvcGUub3JkZXIuZmllbGRdfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBmb2xkZXJGaWx0ZXIodmFsdWUsIGluZGV4LCBhcnJheSkge1xyXG4gICAgICAgICAgICAvLyBJZiBpdGVtIGlzIGRpciwgaXQgd2lsbCBiZSB2aXNpYmxlXHJcbiAgICAgICAgICAgIGlmICh2YWx1ZS5pc0RpcilcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgLy8gVE9ETzogYWRkIGZpbHRlciBlbmFibGUgcHJvcGVydHkgYW5kIGNoZWNrIGl0IGhlcmVcclxuICAgICAgICAgICAgaWYodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUuZmlsdGVyc1t2YWx1ZS50eXBlXTtcclxuXHJcbiAgICAgICAgICAgIC8vIGlmIGZpbHRlciBlbmFibGUgcHJvcGVydHkgaXMgZGlzYWJsZWQsIGNvbXBhcmUgd2l0aCBhbGxvd2VkIHR5cGVcclxuICAgICAgICAgICAgLy9pZiAoU2V0dGluZ3MuZ2V0VHlwZSgpID09IHZhbHVlLnR5cGUpXHJcbiAgICAgICAgICAgIC8vICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoYW5ndWxhciwgd2luZG93LmNyaXAgfHwgKHdpbmRvdy5jcmlwID0ge30pKTsiLCIoZnVuY3Rpb24gKG5nLCBjcmlwKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgY3JpcC5maWxlbWFuYWdlclxyXG4gICAgICAgIC5jb250cm9sbGVyKCdJdGVtQ29udHJvbGxlcicsIEl0ZW1Db250cm9sbGVyKTtcclxuXHJcbiAgICBJdGVtQ29udHJvbGxlci4kaW5qZWN0ID0gW1xyXG4gICAgICAgICckbG9nJywgJyRzY29wZScsICdmb2N1cycsICdDcmlwTWFuYWdlckNvbnRlbnQnLCAnQ3JpcE1hbmFnZXJMb2NhdGlvbicsICdDcmlwTWFuYWdlckFjdGlvbnMnXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIEl0ZW1Db250cm9sbGVyKCRsb2csICRzY29wZSwgZm9jdXMsIENvbnRlbnQsIExvY2F0aW9uLCBBY3Rpb25zKSB7XHJcbiAgICAgICAgYWN0aXZhdGUoKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5jbGljayA9IGNsaWNrO1xyXG4gICAgICAgICAgICAkc2NvcGUuZGJsY2xpY2sgPSBkYmxjbGljaztcclxuICAgICAgICAgICAgJHNjb3BlLmlzU2VsZWN0ZWQgPSBpc1NlbGVjdGVkO1xyXG4gICAgICAgICAgICAkc2NvcGUuZW5hYmxlUmVuYW1lID0gZW5hYmxlUmVuYW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogT24gaXRlbSBjbGlja1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGVcclxuICAgICAgICAgKiBAcGFyYW0gaXRlbVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrKGUsIGl0ZW0pIHtcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgIENvbnRlbnQudXBkYXRlU2VsZWN0ZWQoKTtcclxuICAgICAgICAgICAgQ29udGVudC5kZXNlbGVjdCgpO1xyXG4gICAgICAgICAgICBDb250ZW50LnNlbGVjdFNpbmdsZShpdGVtKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE9uIGl0ZW0gZG91YmxlIGNsaWNrXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZVxyXG4gICAgICAgICAqIEBwYXJhbSBpdGVtXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZGJsY2xpY2soZSwgaXRlbSkge1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAkbG9nLmluZm8oJ2RibGNsaWNrJywgaXRlbSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaXRlbS5pc0Rpcikge1xyXG4gICAgICAgICAgICAgICAgTG9jYXRpb24uY2hhbmdlKGl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlcm1pbmVzIGlzIGl0ZW0gc2VsZWN0ZWRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBpdGVtXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gaXNTZWxlY3RlZChpdGVtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBDb250ZW50LmlzU2VsZWN0ZWQoaXRlbSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBFbmFibGUgaXRlbSByZW5hbWVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSAkZXZlbnRcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBlbmFibGVSZW5hbWUoJGV2ZW50KSB7XHJcbiAgICAgICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSBDb250ZW50LmdldFNlbGVjdGVkSXRlbSgpO1xyXG4gICAgICAgICAgICBBY3Rpb25zLmVuYWJsZVJlbmFtZShpdGVtKTtcclxuICAgICAgICAgICAgZm9jdXMoJyN7aWRlbnRpZmllcn0gaW5wdXRbbmFtZT1cIm5hbWVcIl0nLnN1cHBsYW50KGl0ZW0pKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKGFuZ3VsYXIsIHdpbmRvdy5jcmlwIHx8ICh3aW5kb3cuY3JpcCA9IHt9KSk7IiwiKGZ1bmN0aW9uIChuZywgY3JpcCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgY3JpcC5maWxlbWFuYWdlclxyXG4gICAgICAgIC5jb250cm9sbGVyKCdJdGVtUHJvcGVydGllc0NvbnRyb2xsZXInLCBJdGVtUHJvcGVydGllc0NvbnRyb2xsZXIpO1xyXG5cclxuICAgIEl0ZW1Qcm9wZXJ0aWVzQ29udHJvbGxlci4kaW5qZWN0ID0gW1xyXG4gICAgICAgICckbG9nJywgJyRzY29wZScsICckdWliTW9kYWxJbnN0YW5jZScsICdDcmlwTWFuYWdlclRyYW5zJywgJ2l0ZW0nXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIEl0ZW1Qcm9wZXJ0aWVzQ29udHJvbGxlcigkbG9nLCAkc2NvcGUsICR1aWJNb2RhbEluc3RhbmNlLCBUcmFucywgaXRlbSkge1xyXG4gICAgICAgIGFjdGl2YXRlKCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgICAgICAgICAkbG9nLmluZm8oaXRlbSk7XHJcbiAgICAgICAgICAgICRzY29wZS5pdGVtID0gcmVzb2x2ZUl0ZW1EZXRhaWxzKGl0ZW0pO1xyXG4gICAgICAgICAgICAkc2NvcGUudGh1bWIgPSBpdGVtLnRodW1iO1xyXG4gICAgICAgICAgICAkc2NvcGUubmFtZSA9IGl0ZW0uZnVsbF9uYW1lO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmNsb3NlID0gY2xvc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIaWRlIG1vZGFsXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xvc2UoKSB7XHJcbiAgICAgICAgICAgICR1aWJNb2RhbEluc3RhbmNlLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXNvbHZlIGl0ZW0gZGV0YWlsc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGl0ZW1cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZUl0ZW1EZXRhaWxzKGl0ZW0pIHtcclxuICAgICAgICAgICAgaWYgKGl0ZW0uaXNEaXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlRGlyRGV0YWlscyhpdGVtKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlRmlsZURldGFpbHMoaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBpdGVtIGRlZmF1bHQgZGV0YWlsc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gZGV0YWlsc1xyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBpdGVtXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGl0ZW0uZnVsbF9uYW1lXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGl0ZW0uZGF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGl0ZW0uZ2V0U2l6ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGRlZmF1bHREZXRhaWxzKGRldGFpbHMsIGl0ZW0pIHtcclxuICAgICAgICAgICAgZGV0YWlscy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFRyYW5zKCdpdGVtX3Byb3BlcnRpZXNfbW9kYWxfaXRlbV90eXBlJyksXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogVHJhbnMoJ2l0ZW1fcHJvcGVydGllc19tb2RhbF9maWxlX3R5cGVfJyArIGl0ZW0udHlwZSlcclxuICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogVHJhbnMoJ2l0ZW1fcHJvcGVydGllc19tb2RhbF9uYW1lJyksXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogaXRlbS5mdWxsX25hbWVcclxuICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogVHJhbnMoJ2l0ZW1fcHJvcGVydGllc19tb2RhbF9kYXRlJyksXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogaXRlbS5kYXRlXHJcbiAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFRyYW5zKCdpdGVtX3Byb3BlcnRpZXNfbW9kYWxfc2l6ZScpLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0uZ2V0U2l6ZSgpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVzb2x2ZSBmb2xkZXIgZGV0YWlsc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGl0ZW1cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZURpckRldGFpbHMoaXRlbSkge1xyXG4gICAgICAgICAgICB2YXIgZGV0YWlscyA9IFtdO1xyXG4gICAgICAgICAgICBkZWZhdWx0RGV0YWlscyhkZXRhaWxzLCBpdGVtKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkZXRhaWxzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVzb2x2ZSBmaWxlIGRldGFpbHNcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBpdGVtXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHJlc29sdmVGaWxlRGV0YWlscyhpdGVtKSB7XHJcbiAgICAgICAgICAgIHZhciBkZXRhaWxzID0gW107XHJcbiAgICAgICAgICAgIGRlZmF1bHREZXRhaWxzKGRldGFpbHMsIGl0ZW0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGl0ZW0uZGlyICE9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgZGV0YWlscy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBUcmFucygnaXRlbV9wcm9wZXJ0aWVzX21vZGFsX2l0ZW1fZGlyJyksXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0uZGlyXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZGV0YWlscy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFRyYW5zKCdpdGVtX3Byb3BlcnRpZXNfbW9kYWxfaXRlbV9leHRlbnNpb24nKSxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLmV4dFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdpbWFnZScpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBkZXRhaWxzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFRyYW5zKCdpdGVtX3Byb3BlcnRpZXNfbW9kYWxfaXRlbV91cmwnKSxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJzxhIGhyZWY9XCJ7dXJsfVwiIHRhcmdldD1cIl9ibGFua1wiPnt0aXRsZX08L2E+Jy5zdXBwbGFudCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogaXRlbS51cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBUcmFucygnaXRlbV9wcm9wZXJ0aWVzX21vZGFsX3NpemVfZGltJykuc3VwcGxhbnQoaXRlbS5kaW1lbnNpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBuZy5mb3JFYWNoKCRzY29wZS5pbWdTaXplcygpLCBmdW5jdGlvbiAoYXJyLCBzaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlscy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogVHJhbnMoJ2l0ZW1fcHJvcGVydGllc19tb2RhbF9zaXplX3VybF90aXRsZScpLnN1cHBsYW50KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IFRyYW5zKCdpdGVtX3Byb3BlcnRpZXNfbW9kYWxfc2l6ZV9rZXlfJyArIHNpemUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJzxhIGhyZWY9XCJ7dXJsfT90aHVtYj17c2l6ZX1cIiB0YXJnZXQ9XCJfYmxhbmtcIj57dGl0bGV9PC9hPicuc3VwcGxhbnQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBpdGVtLnVybCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IHNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogVHJhbnMoJ2l0ZW1fcHJvcGVydGllc19tb2RhbF9zaXplX2RpbScpLnN1cHBsYW50KGFycilcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGV0YWlscy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBUcmFucygnaXRlbV9wcm9wZXJ0aWVzX21vZGFsX2l0ZW1fdXJsJyksXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICc8YSBocmVmPVwie3VybH1cIiB0YXJnZXQ9XCJfYmxhbmtcIj57ZnVsbF9uYW1lfTwvYT4nLnN1cHBsYW50KGl0ZW0pXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRldGFpbHM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCk7IiwiKGZ1bmN0aW9uIChuZywgY3JpcCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuY29udHJvbGxlcignUm9vdENvbnRyb2xsZXInLCBSb290Q29udHJvbGxlcik7XHJcblxyXG4gICAgUm9vdENvbnRyb2xsZXIuJGluamVjdCA9IFtcclxuICAgICAgICAnJHNjb3BlJywgJ0NyaXBNYW5hZ2VyTG9jYXRpb24nLCAnQ3JpcE1hbmFnZXJDb250ZW50JywgJ0NyaXBNYW5hZ2VyVHJhbnMnXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIFJvb3RDb250cm9sbGVyKCRzY29wZSwgTG9jYXRpb24sIENvbnRlbnQsIFRyYW5zKSB7XHJcblxyXG4gICAgICAgIGFjdGl2YXRlKCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgICAgICAgICAvLyBpbml0aWFsaXNlIGZpbGUgbWFuYWdlciBpbml0aWFsIGxvY2F0aW9uIGFuZCBsb2FkIHRyYW5zbGF0aW9uc1xyXG4gICAgICAgICAgICBUcmFucygpLmluaXQoKTtcclxuICAgICAgICAgICAgTG9jYXRpb24uaW5pdCgpO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmRlc2VsZWN0ID0gZGVzZWxlY3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBkZXNlbGVjdCgpIHtcclxuICAgICAgICAgICAgQ29udGVudC5kZXNlbGVjdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoYW5ndWxhciwgd2luZG93LmNyaXAgfHwgKHdpbmRvdy5jcmlwID0ge30pKTsiLCIoZnVuY3Rpb24gKGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyXHJcbiAgICAgICAgLnNlcnZpY2UoJ0RpcicsIERpcik7XHJcblxyXG4gICAgRGlyLiRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRyZXNvdXJjZScsICckcm9vdFNjb3BlJ1xyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBEaXIoJHJlc291cmNlLCAkcm9vdFNjb3BlKSB7XHJcbiAgICAgICAgcmV0dXJuICRyZXNvdXJjZSgkcm9vdFNjb3BlLmRpclVybCgnOmRpci86bmFtZScpLCB7XHJcbiAgICAgICAgICAgIGRpcjogJ0BkaXInLFxyXG4gICAgICAgICAgICBuYW1lOiAnQG5hbWUnXHJcbiAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAnY3JlYXRlJzoge3VybDogJHJvb3RTY29wZS5kaXJVcmwoJzpkaXIvOm5hbWUnLCAnY3JlYXRlJyksIG1ldGhvZDogJ1BPU1QnfSxcclxuICAgICAgICAgICAgJ2RlbGV0ZURpcic6IHt1cmw6ICRyb290U2NvcGUuZGlyVXJsKCc6ZGlyJywgJ2RlbGV0ZScpLCBtZXRob2Q6ICdHRVQnfSxcclxuICAgICAgICAgICAgJ2RlbGV0ZUZpbGUnOiB7dXJsOiAkcm9vdFNjb3BlLmZpbGVVcmwoJzpkaXIvOm5hbWUnLCAnZGVsZXRlJyksIG1ldGhvZDogJ0dFVCd9LFxyXG4gICAgICAgICAgICAncmVuYW1lRGlyJzoge3VybDogJHJvb3RTY29wZS5kaXJVcmwoJzpkaXInLCAncmVuYW1lJyksIG1ldGhvZDogJ0dFVCd9LFxyXG4gICAgICAgICAgICAncmVuYW1lRmlsZSc6IHt1cmw6ICRyb290U2NvcGUuZmlsZVVybCgnOmRpcicsICdyZW5hbWUnKSwgbWV0aG9kOiAnR0VUJ31cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSkod2luZG93LmNyaXAgfHwgKHdpbmRvdy5jcmlwID0ge30pKTsiLCIoZnVuY3Rpb24gKG5nLCBjcmlwKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgY3JpcC5maWxlbWFuYWdlclxyXG4gICAgICAgIC5zZXJ2aWNlKCdDcmlwTWFuYWdlclRyYW5zbGF0aW9ucycsIFRyYW5zbGF0aW9ucyk7XHJcblxyXG4gICAgVHJhbnNsYXRpb25zLiRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRyZXNvdXJjZScsICckcm9vdFNjb3BlJ1xyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBUcmFuc2xhdGlvbnMoJHJlc291cmNlLCAkcm9vdFNjb3BlKSB7XHJcbiAgICAgICAgcmV0dXJuICRyZXNvdXJjZSgkcm9vdFNjb3BlLmJhc2VVcmwoJ3RyYW5zbGF0aW9ucycpKTtcclxuICAgIH1cclxufSkoYW5ndWxhciwgd2luZG93LmNyaXApOyIsIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyXHJcbiAgICAgICAgLnNlcnZpY2UoJ0NyaXBNYW5hZ2VyQWN0aW9ucycsIEFjdGlvbnMpO1xyXG5cclxuICAgIEFjdGlvbnMuJGluamVjdCA9IFtcclxuICAgICAgICAnQ3JlYXRlRm9sZGVyU2VydmljZScsICdEZWxldGVTZXJ2aWNlJywgJ1JlbmFtZVNlcnZpY2UnXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIEFjdGlvbnMoQ3JlYXRlRm9sZGVyLCBEZWxldGUsIFJlbmFtZSkge1xyXG4gICAgICAgIHZhciBzY29wZSA9IHt9O1xyXG4gICAgICAgIG5nLmV4dGVuZChzY29wZSwgQ3JlYXRlRm9sZGVyLCBEZWxldGUsIFJlbmFtZSk7XHJcblxyXG4gICAgICAgIHJldHVybiBzY29wZTtcclxuICAgIH1cclxufSkoYW5ndWxhciwgd2luZG93LmNyaXApOyIsIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuc2VydmljZSgnQ3JpcE1hbmFnZXJCcmVhZGNydW1iJywgQnJlYWRjcnVtYik7XHJcblxyXG4gICAgQnJlYWRjcnVtYi4kaW5qZWN0ID0gW107XHJcblxyXG4gICAgZnVuY3Rpb24gQnJlYWRjcnVtYigpIHtcclxuICAgICAgICB2YXIgYnJlYWRjcnVtYiA9IHtcclxuICAgICAgICAgICAgaXRlbXM6IFtdLFxyXG4gICAgICAgICAgICBoYXNJdGVtczogaGFzSXRlbXMsXHJcbiAgICAgICAgICAgIGN1cnJlbnQ6IGN1cnJlbnQsXHJcbiAgICAgICAgICAgIHNldDogc2V0TG9jYXRpb25cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gYnJlYWRjcnVtYjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IGN1cnJlbnQgZm9sZGVyIGxvY2F0aW9uIG9iamVjdFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge29iamVjdH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjdXJyZW50KCkge1xyXG4gICAgICAgICAgICBpZiAoYnJlYWRjcnVtYi5pdGVtcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7ZGlyOiAnJywgbmFtZTogJyd9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYnJlYWRjcnVtYi5pdGVtc1ticmVhZGNydW1iLml0ZW1zLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2hlY2sgaXMgdGhlcmUgYW55IGl0ZW0gaW4gYnJlYWRjcnVtYlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gaGFzSXRlbXMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhIWJyZWFkY3J1bWIuaXRlbXMubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2V0IG5ldyBsb2NhdGlvblxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGZvbGRlclxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmb2xkZXIuZGlyXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZvbGRlci5uYW1lXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0TG9jYXRpb24oZm9sZGVyKSB7XHJcbiAgICAgICAgICAgIG9uTG9jYXRpb25DaGFuZ2Uoe2RpcjogZm9sZGVyLmRpciwgbmFtZTogZm9sZGVyLm5hbWV9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVwZGF0ZSBicmVhZGNydW1iIGFycmF5IHdoZW4gbWFuYWdlciBwcm9wZXJ0eSBpcyBjaGFuZ2VkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gdmFsXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbC5kaXJcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsLm5hbWVcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBvbkxvY2F0aW9uQ2hhbmdlKHZhbCkge1xyXG4gICAgICAgICAgICB2YXIgc3RyaW5nX3ZhbHVlID0gdmFsLmRpciB8fCAnJztcclxuICAgICAgICAgICAgYnJlYWRjcnVtYi5pdGVtcy5zcGxpY2UoMCwgYnJlYWRjcnVtYi5pdGVtcy5sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHZhbC5uYW1lICE9PSAnJyAmJiB2YWwubmFtZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgc3RyaW5nX3ZhbHVlICs9ICcvJyArIHZhbC5uYW1lO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBuZy5mb3JFYWNoKHN0cmluZ192YWx1ZS5zcGxpdCgnXFwvJyksIGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodiAhPT0gJycgJiYgdiAhPT0gbnVsbCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBjcmVhdGUgY3VycmVudCBkaXIgZnJvbSBwcmV2aW91cyBpdGVtLCBpZiBpdCBleGlzdHNcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGlyID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJyZWFkY3J1bWIuaXRlbXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBvbmx5IG9uZSBwcmV2aW91cyBpdGVtLCB1c2UgaXRgcyBuYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChicmVhZGNydW1iLml0ZW1zLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyID0gYnJlYWRjcnVtYi5pdGVtc1swXS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG90aGVyIHdheSwgY29uY2F0IHByZXYgZGlyIHdpdGggbmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpciA9ICd7ZGlyfS97bmFtZX0nLnN1cHBsYW50KGJyZWFkY3J1bWIuaXRlbXNbYnJlYWRjcnVtYi5pdGVtcy5sZW5ndGggLSAxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFkY3J1bWIuaXRlbXMucHVzaCh7bmFtZTogdiwgZGlyOiBkaXIsIGlzQWN0aXZlOiBmYWxzZX0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIG1hcmsgbGFzdCBpdGVtIGFzIGFjdGl2ZSwgdGhpcyB3aWxsIGhlbHAgbWFyayBpdGVtIGFzIGFjdGl2ZVxyXG4gICAgICAgICAgICBpZiAoYnJlYWRjcnVtYi5pdGVtcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBicmVhZGNydW1iLml0ZW1zW2JyZWFkY3J1bWIuaXRlbXMubGVuZ3RoIC0gMV0uaXNBY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCk7IiwiKGZ1bmN0aW9uIChuZywgY3JpcCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuc2VydmljZSgnQ3JpcE1hbmFnZXJDb250ZW50JywgQ29udGVudCk7XHJcblxyXG4gICAgQ29udGVudC4kaW5qZWN0ID0gWydJdGVtU2VydmljZScsICdTZWxlY3RTZXJ2aWNlJ107XHJcblxyXG4gICAgZnVuY3Rpb24gQ29udGVudChJdGVtU2VydmljZSwgU2VsZWN0U2VydmljZSkge1xyXG4gICAgICAgIHZhciBjb250ZW50ID0ge1xyXG4gICAgICAgICAgICBpdGVtczogW10sXHJcbiAgICAgICAgICAgIGdldDogZ2V0SXRlbXMsXHJcbiAgICAgICAgICAgIGFkZDogYWRkLFxyXG4gICAgICAgICAgICByZW1vdmU6IHJlbW92ZSxcclxuICAgICAgICAgICAgcmVtb3ZlSXRlbXM6IHJlbW92ZUl0ZW1zXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbmcuZXh0ZW5kKGNvbnRlbnQsIFNlbGVjdFNlcnZpY2UpO1xyXG5cclxuICAgICAgICByZXR1cm4gY29udGVudDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IGFsbCBjb250ZW50IGl0ZW1zXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0SXRlbXMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb250ZW50Lml0ZW1zO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVtb3ZlIGFsbCBpdGVtcyBpbiBjb250ZW50XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlSXRlbXMoKSB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuaXRlbXMuc3BsaWNlKDAsIGNvbnRlbnQuaXRlbXMubGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFkZCBpdGVtIHRvIGNvbnRlbnRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBpdGVtXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gYWRkKGl0ZW0pIHtcclxuICAgICAgICAgICAgaWYgKCFuZy5pc0RlZmluZWQoaXRlbS5pc19leHRlbmRlZCkpIHtcclxuICAgICAgICAgICAgICAgIEl0ZW1TZXJ2aWNlLmV4dGVuZEl0ZW0oaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnRlbnQuaXRlbXMucHVzaChpdGVtKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlbW92ZSBzaW5nbGUgaXRlbVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGl0ZW1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiByZW1vdmUoaXRlbSkge1xyXG4gICAgICAgICAgICBjb250ZW50Lml0ZW1zLnNwbGljZShjb250ZW50Lml0ZW1zLmluZGV4T2YoaXRlbSksIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoYW5ndWxhciwgd2luZG93LmNyaXApOyIsIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyXHJcbiAgICAgICAgLnNlcnZpY2UoJ0l0ZW1TZXJ2aWNlJywgSXRlbVNlcnZpY2UpO1xyXG5cclxuICAgIEl0ZW1TZXJ2aWNlLiRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRsb2cnLCAnJHJvb3RTY29wZScsICdDcmlwTWFuYWdlclRyYW5zJ1xyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBJdGVtU2VydmljZSgkbG9nLCAkcm9vdFNjb3BlLCBUcmFucykge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICdleHRlbmQnOiBleHRlbmQsXHJcbiAgICAgICAgICAgICdleHRlbmRJdGVtJzogZXh0ZW5kSXRlbVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEV4dGVuZCBEaXIgcmVzb3VyY2UgcmVxdWVzdCByZXNwb25zZSB3aXRoIHJlcXVpcmVkIGluZm9ybWF0aW9uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcmVzb3VyY2VEYXRhXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZXh0ZW5kKHJlc291cmNlRGF0YSkge1xyXG4gICAgICAgICAgICBuZy5leHRlbmQocmVzb3VyY2VEYXRhLCB7XHJcbiAgICAgICAgICAgICAgICAnZ2V0SXRlbXMnOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgbmcuZm9yRWFjaChyZXNvdXJjZURhdGEsIGZ1bmN0aW9uICh2LCBrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuZEl0ZW0odiwgayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHVzaCh2KTtcclxuICAgICAgICAgICAgICAgICAgICB9LCBpdGVtcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZW5lcmF0ZSBVSSBpZCBmb3IgaXRlbVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGtleVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gaWRHZW4oa2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnbGlzdC1pdGVtLScgKyBrZXk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQga2V5IGZyb20gaWRlbnRpZmllciAocmV2ZXJzZSBtZXRob2QgZnJvbSBpZEdlbilcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyXHJcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBnZXRLZXkoaWRlbnRpZmllcikge1xyXG4gICAgICAgICAgICByZXR1cm4gaWRlbnRpZmllci5zdWJzdHJpbmcoMTApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV0ZXJtaW5lIGlzIGl0ZW0gYSBmb2xkZXJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBpdGVtXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gaXNEaXIoaXRlbSkge1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbSAmJiBuZy5pc0RlZmluZWQoaXRlbS50eXBlKSAmJiBpdGVtLnR5cGUgPT09ICdkaXInO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV0ZXJtaW5lIGlzIGl0ZW0gYW4gYSBmb2xkZXIgdXBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBpdGVtXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gaXNEaXJVcChpdGVtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpc0RpcihpdGVtKSAmJiAoaXRlbS5uYW1lID09ICcnIHx8IGl0ZW0ubmFtZSA9PSBudWxsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEV4dGVuZCBzaW5nbGUgaXRlbSB3aXRoIHJlcXVpcmVkIGluZm9ybWF0aW9uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gaXRlbVxyXG4gICAgICAgICAqIEBwYXJhbSBrZXlcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBleHRlbmRJdGVtKGl0ZW0sIGtleSkge1xyXG4gICAgICAgICAgICBuZy5leHRlbmQoaXRlbSwge1xyXG4gICAgICAgICAgICAgICAgaXNfZXh0ZW5kZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICByZW5hbWU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgaWRlbnRpZmllcjogaWRHZW4oa2V5KSxcclxuICAgICAgICAgICAgICAgIGlzRGlyOiBpc0RpcihpdGVtKSxcclxuICAgICAgICAgICAgICAgIGlzRGlyVXA6IGlzRGlyVXAoaXRlbSksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGU6IHVwZGF0ZSxcclxuICAgICAgICAgICAgICAgIGRlbGV0ZTogZGVsZXRlSXRlbSxcclxuICAgICAgICAgICAgICAgIGdldEZ1bGxOYW1lOiBnZXRGdWxsTmFtZSxcclxuICAgICAgICAgICAgICAgIHNhdmVOZXdOYW1lOiBzYXZlTmV3TmFtZSxcclxuICAgICAgICAgICAgICAgIGdldFNpemU6IGdldFNpemVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVcGRhdGUgaXRlbSBjaGFuZ2VzIGlmIHRoZXkgYXJlIHByZXNlbnRlZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge2l0ZW19XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yZW5hbWUpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVOZXdOYW1lKCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBpdGVtIG5hbWUgKGlnbm9yaW5nIGZ1bGxfbmFtZSBwcm9wZXJ0eSB2YWx1ZSlcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0RnVsbE5hbWUoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGlyIHx8IHRoaXMuZXh0ID09PSAnJylcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5hbWU7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHJldHVybiAne25hbWV9LntleHR9Jy5zdXBwbGFudCh0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNhdmUgaXRlbSBuYW1lIGlmIGl0IGlzIGNoYW5nZWRcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBzYXZlTmV3TmFtZSgpIHtcclxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAga2V5ID0gZ2V0S2V5KHNlbGYuaWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIHNlbGYucmVuYW1lID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLmZ1bGxfbmFtZSAhPT0gc2VsZi5nZXRGdWxsTmFtZSgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWV0aG9kID0gc2VsZi5pc0RpciA/ICckcmVuYW1lRGlyJyA6ICckcmVuYW1lRmlsZSc7XHJcbiAgICAgICAgICAgICAgICBzZWxmW21ldGhvZF0oe1xyXG4gICAgICAgICAgICAgICAgICAgICdvbGQnOiBzZWxmLmZ1bGxfbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAnbmV3Jzogc2VsZi5nZXRGdWxsTmFtZSgpXHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZy5leHRlbmQoc2VsZiwgZXh0ZW5kSXRlbShyZXNwb25zZSwga2V5KSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZWxldGUgaXRlbSBkZXRlY3RpbmcgaXQgdHlwZSAoZmlsZSBvciBkaXIpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZGVsZXRlSXRlbSgpIHtcclxuICAgICAgICAgICAgdmFyIG1ldGhvZCA9IHRoaXMuaXNEaXIgPyAnJGRlbGV0ZURpcicgOiAnJGRlbGV0ZUZpbGUnO1xyXG4gICAgICAgICAgICB0aGlzW21ldGhvZF0oe25hbWU6IHRoaXMuZnVsbF9uYW1lfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgdXNlciBmcmllbmRseSBpdGVtIHNpemVcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBnZXRTaXplKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaXplLnRvQnl0ZXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKGFuZ3VsYXIsIHdpbmRvdy5jcmlwIHx8ICh3aW5kb3cuY3JpcCA9IHt9KSk7IiwiKGZ1bmN0aW9uIChuZywgY3JpcCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuc2VydmljZSgnQ3JpcE1hbmFnZXJMb2NhdGlvbicsIENoYW5nZUxvY2F0aW9uU2VydmljZSk7XHJcblxyXG4gICAgQ2hhbmdlTG9jYXRpb25TZXJ2aWNlLiRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRjb29raWVzJywgJ0RpcicsICdJdGVtU2VydmljZScsICdDcmlwTWFuYWdlckJyZWFkY3J1bWInLCAnQ3JpcE1hbmFnZXJDb250ZW50J1xyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBDaGFuZ2VMb2NhdGlvblNlcnZpY2UoJGNvb2tpZXMsIERpciwgSXRlbVNlcnZpY2UsIEJyZWFkY3J1bWIsIENvbnRlbnQpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpbml0OiBpbml0aWFsTG9hZCxcclxuICAgICAgICAgICAgY2hhbmdlOiBjaGFuZ2UsXHJcbiAgICAgICAgICAgIGN1cnJlbnQ6IHt9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2hhbmdlIGxvY2F0aW9uIHRvIGluaXRpYWwgZm9sZGVyXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gaW5pdGlhbExvYWQoKSB7XHJcbiAgICAgICAgICAgIGNoYW5nZShnZXRMb2NhdGlvbkZyb21Db29raWUoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDaGFuZ2UgY3VycmVudCBsb2NhdGlvblxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IFtmb2xkZXJdXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2hhbmdlKGZvbGRlcikge1xyXG4gICAgICAgICAgICB2YXIgcGF0aCA9IHtkaXI6IG51bGwsIG5hbWU6IG51bGx9O1xyXG4gICAgICAgICAgICBpZiAobmcuaXNEZWZpbmVkKGZvbGRlcikpIHtcclxuICAgICAgICAgICAgICAgIHBhdGguZGlyID0gbmcuaXNFbXB0eShmb2xkZXIuZGlyKSA/IG51bGwgOiBmb2xkZXIuZGlyO1xyXG4gICAgICAgICAgICAgICAgcGF0aC5uYW1lID0gbmcuaXNFbXB0eShmb2xkZXIubmFtZSkgPyBudWxsIDogZm9sZGVyLm5hbWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIERpci5xdWVyeShwYXRoLCBmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlQ29va2llKHBhdGgpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEFwcGVuZCByZXNwb25zZSB3aXRoIHJlcXVpcmVkIGluZm9ybWF0aW9uXHJcbiAgICAgICAgICAgICAgICBJdGVtU2VydmljZS5leHRlbmQocik7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIG9sZCBjb250ZW50XHJcbiAgICAgICAgICAgICAgICBDb250ZW50LnJlbW92ZUl0ZW1zKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZGVzZWxlY3QsIGlmIGFueSBpdGVtIGlzIHNlbGVjdGVkXHJcbiAgICAgICAgICAgICAgICBDb250ZW50LmRlc2VsZWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ2hhbmdlIGJyZWFkY3J1bWIgcGF0aFxyXG4gICAgICAgICAgICAgICAgQnJlYWRjcnVtYi5zZXQocGF0aCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQWRkIG5ldyBjb250ZW50XHJcbiAgICAgICAgICAgICAgICBuZy5mb3JFYWNoKHIuZ2V0SXRlbXMoKSwgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBDb250ZW50LmFkZChpdGVtKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBtYW5hZ2VyIGxhc3QgbG9jYXRpb24gZnJvbSBjb29raWVzXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyB7e2Rpcjogc3RyaW5nLCBuYW1lOiBzdHJpbmd9fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGdldExvY2F0aW9uRnJvbUNvb2tpZSgpIHtcclxuICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0ge2RpcjogbnVsbCwgbmFtZTogbnVsbH07XHJcblxyXG4gICAgICAgICAgICB2YXIgY29va2llRGlyID0gJGNvb2tpZXMuZ2V0KCdsb2NhdGlvbi1kaXInKSxcclxuICAgICAgICAgICAgICAgIG5hbWUgPSAkY29va2llcy5nZXQoJ2xvY2F0aW9uLWRpci1uYW1lJyk7XHJcbiAgICAgICAgICAgIGlmIChuZy5oYXNWYWx1ZShjb29raWVEaXIpIHx8IG5nLmhhc1ZhbHVlKG5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbi5kaXIgPSBjb29raWVEaXI7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFuYW1lIHx8IG5hbWUgPT09ICdudWxsJyB8fCBuYW1lID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbG9jYXRpb24ubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVwZGF0ZSBjb29raWVzIGZvciBuZXcgbWFuYWdlciBpbnN0YW5jZSwgdG8gYmUgb3BlbmVkIGluIHNhbWUgbG9jYXRpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBsb2NhdGlvblxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhdGlvbi5kaXJcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbG9jYXRpb24ubmFtZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUNvb2tpZShsb2NhdGlvbikge1xyXG4gICAgICAgICAgICAkY29va2llcy5wdXQoJ2xvY2F0aW9uLWRpcicsIGxvY2F0aW9uLmRpciB8fCAnJyk7XHJcbiAgICAgICAgICAgICRjb29raWVzLnB1dCgnbG9jYXRpb24tZGlyLW5hbWUnLCBsb2NhdGlvbi5uYW1lIHx8ICcnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKGFuZ3VsYXIsIHdpbmRvdy5jcmlwKTsiLCIoZnVuY3Rpb24gKG5nLCBjcmlwKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgY3JpcC5maWxlbWFuYWdlclxyXG4gICAgICAgIC5zZXJ2aWNlKCdDcmlwTWFuYWdlclRyYW5zJywgVHJhbnMpO1xyXG5cclxuICAgIFRyYW5zLiRpbmplY3QgPSBbXHJcbiAgICAgICAgJ0NyaXBNYW5hZ2VyVHJhbnNsYXRpb25zJ1xyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBUcmFucyhUcmFuc2xhdGlvbnMpIHtcclxuICAgICAgICB2YXIgdHJhbnNsYXRpb25zID0ge307XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgIGlmIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2xhdGlvbnNba2V5XTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbnMgPSBUcmFuc2xhdGlvbnMuZ2V0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxufSkoYW5ndWxhciwgd2luZG93LmNyaXApOyIsIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyXHJcbiAgICAgICAgLnNlcnZpY2UoJ0NyZWF0ZUZvbGRlclNlcnZpY2UnLCBDcmVhdGVGb2xkZXJTZXJ2aWNlKTtcclxuXHJcbiAgICBDcmVhdGVGb2xkZXJTZXJ2aWNlLiRpbmplY3QgPSBbXHJcbiAgICAgICAgJ0RpcicsICdDcmlwTWFuYWdlckJyZWFkY3J1bWInLCAnQ3JpcE1hbmFnZXJDb250ZW50JywgJ1JlbmFtZVNlcnZpY2UnXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIENyZWF0ZUZvbGRlclNlcnZpY2UoRGlyLCBCcmVhZGNydW1iLCBDb250ZW50LCBSZW5hbWUpIHtcclxuICAgICAgICB2YXIgY3JlYXRlID0ge1xyXG4gICAgICAgICAgICBfY3JlYXRlSW5Qcm9ncmVzczogZmFsc2UsXHJcbiAgICAgICAgICAgIGNhbkNyZWF0ZUZvbGRlcjogY2FuQ3JlYXRlRm9sZGVyLFxyXG4gICAgICAgICAgICBjcmVhdGVGb2xkZXI6IGNyZWF0ZUZvbGRlclxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBjcmVhdGU7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrIGlzIGZvbGRlciBjYW4gYmUgY3JlYXRlZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2FuQ3JlYXRlRm9sZGVyKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gIWNyZWF0ZS5fY3JlYXRlSW5Qcm9ncmVzc1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlIG5ldyBmb2xkZXJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXHJcbiAgICAgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gW2NhbGxiYWNrXVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUZvbGRlcihuYW1lLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICBpZiAoIWNhbkNyZWF0ZUZvbGRlcigpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgY3JlYXRlLl9jcmVhdGVJblByb2dyZXNzID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIERpci5jcmVhdGUoQnJlYWRjcnVtYi5jdXJyZW50KCksIHtuYW1lOiBuYW1lfSwgZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZS5fY3JlYXRlSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIE5vdGlmeSBjb250cm9sbGVycyB0byBoYW5kbGUgVUkgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgQ29udGVudC5hZGQocik7XHJcbiAgICAgICAgICAgICAgICBDb250ZW50LnNlbGVjdFNpbmdsZShyKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZy5pc0RlZmluZWQoY2FsbGJhY2spICYmIG5nLmlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbn0pKGFuZ3VsYXIsIHdpbmRvdy5jcmlwKTsiLCIoZnVuY3Rpb24gKG5nLCBjcmlwKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgY3JpcC5maWxlbWFuYWdlclxyXG4gICAgICAgIC5zZXJ2aWNlKCdEZWxldGVTZXJ2aWNlJywgRGVsZXRlU2VydmljZSk7XHJcblxyXG4gICAgZnVuY3Rpb24gRGVsZXRlU2VydmljZSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjYW5EZWxldGU6IGNhbkRlbGV0ZSxcclxuICAgICAgICAgICAgZGVsZXRlOiBkZWxldGVJdGVtXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2hlY2sgYXJlIHRoZSBpdGVtIGRlbGV0YWJsZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufG9iamVjdH0gaXRlbVxyXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXRlbS5pc0RpclVwXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2FuRGVsZXRlKGl0ZW0pIHtcclxuICAgICAgICAgICAgaWYgKCFpdGVtKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuICFpdGVtLmlzRGlyVXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZWxldGUgaXRlbVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGl0ZW1cclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gW2V2ZW50XVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGRlbGV0ZUl0ZW0oaXRlbSkge1xyXG4gICAgICAgICAgICBpZiAoIWNhbkRlbGV0ZShpdGVtKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtLmRlbGV0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoYW5ndWxhciwgd2luZG93LmNyaXAgfHwgKHdpbmRvdy5jcmlwID0ge30pKTsiLCIoZnVuY3Rpb24gKG5nLCBjcmlwKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgY3JpcC5maWxlbWFuYWdlclxyXG4gICAgICAgIC5zZXJ2aWNlKCdSZW5hbWVTZXJ2aWNlJywgUmVuYW1lU2VydmljZSk7XHJcblxyXG4gICAgZnVuY3Rpb24gUmVuYW1lU2VydmljZSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjYW5SZW5hbWU6IGNhblJlbmFtZSxcclxuICAgICAgICAgICAgZW5hYmxlUmVuYW1lOiBlbmFibGVSZW5hbWUsXHJcbiAgICAgICAgICAgIHJlbmFtZTogcmVuYW1lXHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrIGlzIHRoZSBpdGVtIGNhbiBiZSByZW5hbWVkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW58b2JqZWN0fSBpdGVtXHJcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBpdGVtLmlzRGlyVXBcclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjYW5SZW5hbWUoaXRlbSkge1xyXG4gICAgICAgICAgICBpZiAoIWl0ZW0pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gIWl0ZW0uaXNEaXJVcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEVuYWJsZSBpdGVtIHJlbmFtZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufG9iamVjdH0gaXRlbVxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpdGVtLmlkZW50aWZpZXJcclxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGl0ZW0ucmVuYW1lXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZW5hYmxlUmVuYW1lKGl0ZW0pIHtcclxuICAgICAgICAgICAgaWYgKCFjYW5SZW5hbWUoaXRlbSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKGl0ZW0ucmVuYW1lID0gdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZW5hbWUgaXRlbVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufG9iamVjdH0gaXRlbVxyXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGl0ZW0udXBkYXRlXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gcmVuYW1lKGl0ZW0pIHtcclxuICAgICAgICAgICAgaWYgKCFjYW5SZW5hbWUoaXRlbSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaXRlbS51cGRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCk7IiwiKGZ1bmN0aW9uIChuZywgY3JpcCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuc2VydmljZSgnU2VsZWN0U2VydmljZScsIFNlbGVjdFNlcnZpY2UpO1xyXG5cclxuICAgIGZ1bmN0aW9uIFNlbGVjdFNlcnZpY2UoKSB7XHJcbiAgICAgICAgdmFyIHNlbGVjdCA9IHtcclxuICAgICAgICAgICAgc2VsZWN0ZWQ6IFtdLFxyXG4gICAgICAgICAgICBzZWxlY3Q6IHNlbGVjdEl0ZW0sXHJcbiAgICAgICAgICAgIHNlbGVjdFNpbmdsZTogc2VsZWN0U2luZ2xlSXRlbSxcclxuICAgICAgICAgICAgZGVzZWxlY3Q6IGRlc2VsZWN0U2VsZWN0ZWRJdGVtcyxcclxuICAgICAgICAgICAgaXNTZWxlY3RlZDogaXNTZWxlY3RlZEl0ZW0sXHJcbiAgICAgICAgICAgIGlzU2VsZWN0ZWRPbmU6IGlzU2VsZWN0ZWRPbmVJdGVtLFxyXG4gICAgICAgICAgICBpc1NlbGVjdGVkQW55OiBpc1NlbGVjdGVkQW55SXRlbSxcclxuICAgICAgICAgICAgZ2V0U2VsZWN0ZWRJdGVtOiBnZXRTZWxlY3RlZEl0ZW0sXHJcbiAgICAgICAgICAgIGdldFNlbGVjdGVkSXRlbXM6IGdldFNlbGVjdGVkSXRlbXMsXHJcbiAgICAgICAgICAgIHVwZGF0ZVNlbGVjdGVkOiB1cGRhdGVTZWxlY3RlZEl0ZW1zXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV0ZXJtaW5lcyBpcyBhbnkgaXRlbSBzZWxlY3RlZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gaXNTZWxlY3RlZEFueUl0ZW0oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhIXNlbGVjdC5zZWxlY3RlZC5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlcm1pbmVzIGlzIGl0ZW0gaW4gc2VsZWN0ZWQgaXRlbXMgY29sbGVjdGlvblxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGl0ZW1cclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBpc1NlbGVjdGVkSXRlbShpdGVtKSB7XHJcbiAgICAgICAgICAgIGlmICghaXNTZWxlY3RlZEFueUl0ZW0oKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBpc1NlbGVjdGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBuZy5mb3JFYWNoKHNlbGVjdC5zZWxlY3RlZCwgZnVuY3Rpb24gKHNlbGVjdGVkX2l0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChuZy5lcXVhbHMoaXRlbSwgc2VsZWN0ZWRfaXRlbSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaXNTZWxlY3RlZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERldGVybWluZXMgaXMgc2VsZWN0ZWQgb25seSBvbmUgaXRlbVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gaXNTZWxlY3RlZE9uZUl0ZW0oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3Quc2VsZWN0ZWQubGVuZ3RoID09PSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IHNpbmdsZSBzZWxlY3RlZCBpdGVtXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyB7b2JqZWN0fGJvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0U2VsZWN0ZWRJdGVtKCkge1xyXG4gICAgICAgICAgICBpZiAoIWlzU2VsZWN0ZWRPbmVJdGVtKCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0LnNlbGVjdGVkWzBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IGFsbCBzZWxlY3RlZCBpdGVtc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGdldFNlbGVjdGVkSXRlbXMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3Quc2VsZWN0ZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBZGQgaXRlbSB0byBjb2xsZWN0aW9uIG9mIHNlbGVjdGVkIGl0ZW1zXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gaXRlbVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHNlbGVjdEl0ZW0oaXRlbSkge1xyXG4gICAgICAgICAgICBzZWxlY3Quc2VsZWN0ZWQucHVzaChpdGVtKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERlc2VsZWN0IGFsbCBzZWxlY3RlZCBpdGVtcyBhbmQgdXBkYXRlIGNoYW5nZXMgaW4gdGhlbVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGRlc2VsZWN0U2VsZWN0ZWRJdGVtcygpIHtcclxuICAgICAgICAgICAgdXBkYXRlU2VsZWN0ZWRJdGVtcygpO1xyXG4gICAgICAgICAgICBzZWxlY3Quc2VsZWN0ZWQuc3BsaWNlKDAsIHNlbGVjdC5zZWxlY3RlZC5sZW5ndGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGVzZWxlY3QgYWxsIHNlbGVjdGVkIGl0ZW1zIGFuZCBhZGQgdGhpcyBvbmUgYXMgc2VsZWN0ZWRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBpdGVtXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gc2VsZWN0U2luZ2xlSXRlbShpdGVtKSB7XHJcbiAgICAgICAgICAgIGRlc2VsZWN0U2VsZWN0ZWRJdGVtcygpO1xyXG4gICAgICAgICAgICBzZWxlY3RJdGVtKGl0ZW0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVXBkYXRlIGNoYW5nZXMgaW4gc2VsZWN0ZWQgaXRlbXNcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVTZWxlY3RlZEl0ZW1zKCkge1xyXG4gICAgICAgICAgICBuZy5mb3JFYWNoKGdldFNlbGVjdGVkSXRlbXMoKSwgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0udXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbn0pKGFuZ3VsYXIsIHdpbmRvdy5jcmlwKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
