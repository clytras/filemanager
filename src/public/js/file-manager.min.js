!function(e,n){"use strict";n.filemanager=e.module("crip.file-manager",["crip.core","crip.transparent-progressbar","angular-loading-bar","ngFileUpload","ngCookies","ngResource","ngSanitize","ngMaterial"])}(angular,window.crip||(window.crip={})),function(e,n){"use strict";function t(){}n.filemanager.config(t),t.$inject=[]}(angular,window.crip||(window.crip={})),function(e,n,t){"use strict";function r(e){function n(n,t){e.$broadcast(n,t)}e.fireBroadcast=n}t.filemanager.run(r),r.$inject=["$rootScope"]}(angular,jQuery,window.crip||(window.crip={})),function(e,n,t){"use strict";function r(n,t,r,i,a,o,c,l,u,s,d){function f(){n.canDeleteSelected=p,n.deleteSelected=m,n.canCreateFolder=g,n.createFolder=h,n.canRenameSelected=v,n.enableRenameSelected=w,n.canOpenSelected=C,n.openSelected=_,n.hasProperties=M,n.openProperties=S,n.canUpload=$,n.hasUploads=D,n.addFiles=b,n.upload=I,n.cancelUpload=y,n.allMediaAllowed=U,n.order=u,n.filters=s}function p(){return i.canDelete(a.getSelectedItem())}function m(n){e.isDefined(n)&&e.isDefined(n.stopPropagation)&&n.stopPropagation(),i["delete"](a.getSelectedItem()),a.deselect()}function g(){return i.canCreateFolder()}function h(e){i.createFolder(e,w)}function v(){return i.canRename(a.getSelectedItem())}function w(n){t.hide();var o=a.getSelectedItem();e.isDefined(n)&&e.isDefined(n.stopPropagation)&&n.stopPropagation(),o&&(i.enableRename(o),r('#{identifier} input[name="name"]'.supplant(o)))}function C(){return a.getSelectedItem().isDir}function _(){C()&&o.change(a.getSelectedItem())}function M(){return a.hasProperties(a.getSelectedItem())}function S(e){M()&&(e.stopPropagation(),l.open(a.getSelectedItem()))}function $(){return!0}function D(){return c.hasFiles()}function b(e){c.add(e)}function I(){c.start()}function y(){c.clean()}function U(){return d.isAllMediaAllowed()}f()}t.filemanager.controller("ActionsController",r),r.$inject=["$scope","$mdMenu","focus","CripManagerActions","CripManagerContent","CripManagerLocation","CripManagerUploader","CripPropertiesModal","CripManagerContentOrder","CripManagerContentFilter","CripManagerSettings"]}(angular,jQuery,window.crip||(window.crip={})),function(e,n){"use strict";function t(e,n,t){function r(){e.goTo=i,e.goToRoot=a,e.breadcrumbHasItems=o,e.getBreadcrumbItems=c}function i(e){t.change(e)}function a(){i()}function o(){return n.hasItems()}function c(){return n.items}r()}n.filemanager.controller("BreadcrumbController",t),t.$inject=["$scope","CripManagerBreadcrumb","CripManagerLocation"]}(angular,window.crip),function(e,n){"use strict";function t(e,n,t,r,i){function a(){n.order=r,n.filter=i,n.getContent=function(){return t.get()}}a()}n.filemanager.controller("DirContentController",t),t.$inject=["$log","$scope","CripManagerContent","CripManagerContentOrder","CripManagerContentFilter"]}(angular,window.crip||(window.crip={})),function(e,n){"use strict";function t(e,n){function t(){e.hasUploads=r,e.files=i}function r(){return n.hasFiles()}function i(){return n.files}t()}n.filemanager.controller("FileUploadController",t),t.$inject=["$scope","CripManagerUploader"]}(angular,window.crip),function(e,n){"use strict";function t(e,n,t,r,i,a,o,c){function l(){n.click=u,n.dblclick=s,n.isSelected=d,n.enableRename=f,n.canDelete=p,n.deleteItem=m,n.hasProperties=g,n.openProperties=h,n.openMenu=v,n.canOpen=w,n.openDir=C,n.canRename=_}function u(e,n){e.stopPropagation(),i.updateSelected(),i.deselect(),i.selectSingle(n),t.hide()}function s(e,n){e.stopPropagation(),n.isDir&&a.change(n)}function d(e){return i.isSelected(e)}function f(e){e.stopPropagation&&e.stopPropagation(),t.hide();var n;e.is_extended?(n=e,i.selectSingle(n)):n=i.getSelectedItem(),o.enableRename(n),r('#{identifier} input[name="name"]'.supplant(n))}function p(e){return o.canDelete(e)}function m(e){o["delete"](e)}function g(e){return i.hasProperties(e)}function h(e){c.open(e)}function v(e,n){t.hide().then(function(){e.menu.$mdOpenMenu(n)})}function w(e){return e.isDir}function C(e){w(e)&&a.change(e)}function _(e){return!e.isDirUp}l()}n.filemanager.controller("ItemController",t),t.$inject=["$log","$scope","$mdMenu","focus","CripManagerContent","CripManagerLocation","CripManagerActions","CripPropertiesModal"]}(angular,window.crip||(window.crip={})),function(e,n){"use strict";function t(n,t,r,i,a){function o(){n.info(a),t.item=l(a),t.thumb=a.thumb,t.name=a.full_name,t.close=c}function c(){r.hide()}function l(e){return e.isDir?s(e):d(e)}function u(e,t){n.log("item_properties_modal_file_type_"+t.type),e.push({name:i("item_properties_modal_item_type"),value:i("item_properties_modal_file_type_"+t.type)},{name:i("item_properties_modal_name"),value:t.full_name},{name:i("item_properties_modal_date"),value:t.updated_at},{name:i("item_properties_modal_size"),value:t.getSize()})}function s(e){var n=[];return u(n,e),n}function d(n){var t=[];return u(t,n),""!==n.dir&&t.push({name:i("item_properties_modal_item_dir"),value:n.dir}),t.push({name:i("item_properties_modal_item_extension"),value:n.extension}),"image"===n.type&&e.hasValue(n.thumbs)?(t.push({name:i("item_properties_modal_item_url"),value:'<a href="{url}" target="_blank">{title}</a>'.supplant({url:n.url,title:i("item_properties_modal_size_dim").supplant(n.size)})}),e.forEach(n.thumbs,function(e,n){t.push({name:i("item_properties_modal_size_url_title").supplant({size:i("item_properties_modal_size_key_"+n)}),value:'<a href="{url}" target="_blank">{title}</a>'.supplant({url:e.url,title:i("item_properties_modal_size_dim").supplant(e.size)})})})):t.push({name:i("item_properties_modal_item_url"),value:'<a href="{url}" target="_blank">{full_name}</a>'.supplant(n)}),t}o()}n.filemanager.controller("ItemPropertiesController",t),t.$inject=["$log","$scope","$mdDialog","CripManagerTrans","item"]}(angular,window.crip),function(e,n){"use strict";function t(e,n,t,r,i,a){function o(){i().init(),t.init(),e.deselect=c,e.refreshContent=l}function c(){r.deselect(),n.hide()}function l(){t.change(a.current())}o()}n.filemanager.controller("RootController",t),t.$inject=["$scope","$mdMenu","CripManagerLocation","CripManagerContent","CripManagerTrans","CripManagerBreadcrumb"]}(angular,window.crip||(window.crip={})),function(e){"use strict";function n(e,n){return e(n.dirUrl(":dir/:name"),{dir:"@dir",name:"@name"},{create:{url:n.dirUrl(":dir/:name","create"),method:"POST"},deleteDir:{url:n.dirUrl(":dir","delete"),method:"GET"},deleteFile:{url:n.fileUrl(":dir/:name","delete"),method:"GET"},renameDir:{url:n.dirUrl(":dir","rename"),method:"GET"},renameFile:{url:n.fileUrl(":dir","rename"),method:"GET"}})}e.filemanager.service("Dir",n),n.$inject=["$resource","CripManagerSettings"]}(window.crip||(window.crip={})),function(e,n){"use strict";function t(e,n){return e(n.baseUrl("translations"))}n.filemanager.service("CripManagerTranslations",t),t.$inject=["$resource","CripManagerSettings"]}(angular,window.crip),function(e,n){"use strict";function t(n,t,r){var i={};return e.extend(i,n,t,r),i}n.filemanager.service("CripManagerActions",t),t.$inject=["CreateFolderService","DeleteService","RenameService"]}(angular,window.crip),function(e,n){"use strict";function t(n,t){function r(){return 0===f.items.length?{dir:"",name:""}:f.items[f.items.length-1]}function i(){return!!f.items.length}function a(e){o({dir:e.dir,name:e.name})}function o(n){var t=d.apply(n);f.items.splice(0,f.items.length),c(t),e.forEach(t.split("/").clean("",null),function(e){var n="";f.items.length>0&&(n=1===f.items.length?f.items[0].name:"{dir}/{name}".supplant(f.items[f.items.length-1])),f.items.push({name:e,dir:n,isActive:!1})}),f.items.length>0&&(f.items[f.items.length-1].isActive=!0)}function c(t){f.urlChangeIgnore=!0;var r="string"==typeof t?t.split("/"):t;r.clean(),r.length>0&&e.hasValue(r[0])?n.search("l",r):n.search("l",null),f.urlChangeIgnore=!1}function l(){return n.search()}function u(n,r){f.urlChangeIgnore||e.equals(n,r)||t.fireBroadcast("url-change",[s(n)])}function s(n){var t=null;return e.hasValue(n.l)&&(t=n.l,"object"==typeof t&&(t=t.join("/"))),t}function d(e){return this.dir=this.dir||"",this.name=this.name||"",e="{dir}/{name}".supplant(this),e.split("/").clean().join("/")}var f={items:[],hasItems:i,current:r,set:a,urlChangeIgnore:!1,resolveUrlObject:s,toString:d};return t.$watch(l,u),f}n.filemanager.service("CripManagerBreadcrumb",t),t.$inject=["$location","$rootScope"]}(angular,window.crip),function(e,n){"use strict";function t(n,t,r){function i(){return u.items}function a(){u.items.splice(0,u.items.length)}function o(t){return e.isDefined(t.is_extended)||n.extendItem(t),"Dir"!=typeof t&&(t=new r(t)),u.items.push(t),t}function c(e){u.items.splice(u.items.indexOf(e),1)}function l(e){return e?!e.isDirUp:!1}var u={items:[],get:i,add:o,remove:c,removeItems:a,hasProperties:l};return e.extend(u,t),u}n.filemanager.service("CripManagerContent",t),t.$inject=["ItemService","SelectService","Dir"]}(angular,window.crip),function(e,n){"use strict";function t(e,n){function t(e,t,r){return e.isDir?!0:n.isAllMediaAllowed()?i[e.type]:n.allowedMediaType()==e.type}function r(e){"boolean"==typeof i[e]&&(i[e]=!i[e])}var i={dir:t,toggle:r,image:!0,media:!0,document:!0};return i}n.filemanager.service("CripManagerContentFilter",t),t.$inject=["$log","CripManagerSettings"]}(angular,window.crip),function(e,n){"use strict";function t(e){function n(e){var n=-Number.MAX_VALUE/2;return"number"==typeof e[i.field]?e.isDir?(e.isDirUp||(n+=e[i.field]+1),i.isReverse&&(n*=-1,e.isDirUp&&(n+=Number.MAX_VALUE/2))):n=e[i.field]:(n=i.isReverse?"1 {field}":"z {field}",e.isDir&&(n=e.isDirUp?i.isReverse?"zzz":"0 0":i.isReverse?"z {field}":"1 {field}"),n=n.supplant({field:e[i.field]})),n}function t(e){return-1!==a.indexOf(e)?!!i[e]:!1}function r(e){if(-1!==a.indexOf(e)){for(var n in a)a.hasOwnProperty(n)&&a[n]!=e&&(i[a[n]]=!1);i.field=e,i[e]?i.isReverse=!i.isReverse:i[e]=!0}}var i={by:n,isBy:t,set:r,field:"full_name",isReverse:!1,full_name:!0,bytes:!1,updated_at:!1},a=["full_name","bytes","updated_at"];return i}n.filemanager.service("CripManagerContentOrder",t),t.$inject=["$log"]}(angular,window.crip),function(e,n){"use strict";function t(n,t,r){function i(n){e.extend(n,{getItems:function(){var t=[];return e.forEach(n,function(e,n){u(e,n),this.push(e)},t),t}})}function a(e){return"list-item-"+e}function o(e){return e.substring(10)}function c(n){return n&&e.isDefined(n.type)&&"dir"===n.type}function l(e){return c(e)&&(""==e.name||null==e.name)}function u(n,t){e.extend(n,{is_extended:!0,rename:!1,identifier:a(t),isDir:c(n),isDirUp:l(n),update:s,"delete":p,getFullName:d,saveNewName:f,getSize:m})}function s(){return this.rename&&this.saveNewName(),this}function d(){return this.isDir||""===this.extension?this.name:"{name}.{extension}".supplant(this)}function f(){var n=this,t=o(n.identifier),r=n.menu;if(n.rename=!1,n.full_name!==n.getFullName()){var i=n.isDir?"$renameDir":"$renameFile";n[i]({old:n.full_name,"new":n.getFullName()},function(i){e.extend(n,u(i,t),{menu:r})})}}function p(){var e=this.isDir?"$deleteDir":"$deleteFile";this[e]({name:this.full_name})}function m(){return this.bytes.toBytes()}return{extend:i,extendItem:u}}n.filemanager.service("ItemService",t),t.$inject=["$log","$rootScope","CripManagerTrans"]}(angular,window.crip||(window.crip={})),function(e,n){"use strict";function t(n,t,r,i,a,o,c){function l(){u(s())}function u(n){var t={dir:null,name:null};e.isDefined(n)&&(t.dir=e.isEmpty(n.dir)?null:n.dir,t.name=e.isEmpty(n.name)?null:n.name),i.query(t,function(n){d(t),a.extend(n),c.removeItems(),c.deselect(),o.set(t),e.forEach(n.getItems(),function(e){c.add(e)})})}function s(){var r={dir:null,name:null},i=o.resolveUrlObject(t.search());if(e.hasValue(i))return r.dir=i,r;var a=n.get("location-dir"),c=n.get("location-dir-name");return(e.hasValue(a)||e.hasValue(c))&&(r.dir=a,e.isEmpty(c)&&(c=""),r.name=c),r}function d(e){n.put("location-dir",e.dir||""),n.put("location-dir-name",e.name||"")}return r.$on("url-change",function(e,n){u({dir:n[0]})}),{init:l,change:u,current:{}}}n.filemanager.service("CripManagerLocation",t),t.$inject=["$cookies","$location","$rootScope","Dir","ItemService","CripManagerBreadcrumb","CripManagerContent"]}(angular,window.crip),function(e,n){"use strict";function t(e,n,t){function r(r){return t.hasProperties(r)?void e.show({clickOutsideToClose:!0,openFrom:"#"+r.identifier,closeTo:"#"+r.identifier,templateUrl:n.templatePath("item-properties-modal"),controller:"ItemPropertiesController",locals:{item:r}}):!1}return{open:r}}n.filemanager.service("CripPropertiesModal",t),t.$inject=["$mdDialog","CripManagerSettings","CripManagerContent"]}(angular,window.crip),function(e,n,t){"use strict";function r(n){function r(e,n){var t=e.data(n);return t.length>0&&(t=JSON.parse(t.replaceAll("'",'"'))),t}function i(e,n){return o("dir",e,n)}function a(e,n){return o("file",e,n)}function o(n,t,r){var i=n+"/";return e.isDefined(r)&&(i+=r+"/"),i+=t,c(i)}function c(e){return p.base_url+e}function l(e,n){var t={url:publicUrl(),name:e,ext:n||"html"};return"{url}/templates/{name}.{ext}".supplant(t)}function u(){return-1===f.indexOf(p.params.type)?"file":p.params.type}function s(){return"file"===u()}var d=t("#settings"),f=["image","media","document"],p={base_url:d.data("base-url"),public_url:d.data("public-url"),params:r(d,"params"),img_sizes:JSON.parse(d.data("sizes").replaceAll("'",'"')),dirUrl:i,fileUrl:a,baseUrl:c,templatePath:l,allowedMediaType:u,isAllMediaAllowed:s};return p}n.filemanager.service("CripManagerSettings",r),r.$inject=["$log"]}(angular,window.crip,jQuery),function(e,n){"use strict";function t(e){var n={};return function(t){return t?n[t]:{init:function(){n=e.get()}}}}n.filemanager.service("CripManagerTrans",t),t.$inject=["CripManagerTranslations"]}(angular,window.crip),function(e,n){"use strict";function t(n,t,r,i){function a(n){e.forEach(n,function(n){n.progress=0,n.id=s.files.length,n.isHtml5=e.isHtml5,n.error=!1,s.files.push(n)})}function o(){return s.files.length>0}function c(){return o()?(s.settings.url.dir=t.toString.apply(t.current()),void e.forEach(s.files,l)):!1}function l(e){var n=i.upload({url:"{root}/{dir}".supplant(s.settings.url),data:{file:e}});n.then(function(n){e.progress=100,s.files.removeItem(e.id,"id"),r.add(n.data)},function(n){e.error=!0,e.progress=100},function(n){e.progress=Math.min(100,parseInt(90*n.loaded/n.total))})}function u(){s.files=[]}var s={files:[],add:a,hasFiles:o,start:c,clean:u,settings:{status:200,error:"",url:{root:n.fileUrl("upload"),dir:""}}};return s}n.filemanager.service("CripManagerUploader",t),t.$inject=["CripManagerSettings","CripManagerBreadcrumb","CripManagerContent","Upload"]}(angular,window.crip),function(e,n){"use strict";function t(n,t,r,i){function a(){return!c._createInProgress}function o(i,o){return a()?(c._createInProgress=!0,void n.create(t.current(),{name:i},function(n){c._createInProgress=!1;var t=r.add(n);r.selectSingle(t),e.isFunction(o)&&o(t)})):!1}var c={_createInProgress:!1,canCreateFolder:a,createFolder:o};return c}n.filemanager.service("CreateFolderService",t),t.$inject=["Dir","CripManagerBreadcrumb","CripManagerContent","RenameService"]}(angular,window.crip),function(e,n){"use strict";function t(){function e(e){return e?!e.isDirUp:!1}function n(n){return e(n)?n["delete"]():!1}return{canDelete:e,"delete":n}}n.filemanager.service("DeleteService",t)}(angular,window.crip||(window.crip={})),function(e,n){"use strict";function t(){function e(e){return e?!e.isDirUp:!1}function n(n){return e(n)?n.rename=!0:!1}function t(n){return e(n)?n.update():!1}return{canRename:e,enableRename:n,rename:t}}n.filemanager.service("RenameService",t)}(angular,window.crip),function(e,n){"use strict";function t(){function n(){return!!s.selected.length}function t(t){if(!n())return!1;var r=!1;return e.forEach(s.selected,function(n){e.equals(t,n)&&(r=!0)}),r}function r(){return 1===s.selected.length}function i(){return r()?s.selected[0]:!1}function a(){return s.selected}function o(e){s.selected.push(e)}function c(){u(),s.selected.splice(0,s.selected.length)}function l(e){c(),o(e)}function u(){e.forEach(a(),function(e){e.update()})}var s={selected:[],select:o,selectSingle:l,deselect:c,isSelected:t,isSelectedOne:r,isSelectedAny:n,getSelectedItem:i,getSelectedItems:a,updateSelected:u};return s}n.filemanager.service("SelectService",t)}(angular,window.crip);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9zb3VyY2UvbW9kdWxlLmpzIiwiL3NvdXJjZS9jb25maWcuanMiLCIvc291cmNlL3J1bi5qcyIsIi9zb3VyY2UvY29udHJvbGxlcnMvQWN0aW9uc0NvbnRyb2xsZXIuanMiLCIvc291cmNlL2NvbnRyb2xsZXJzL0JyZWFkY3J1bWJDb250cm9sbGVyLmpzIiwiL3NvdXJjZS9jb250cm9sbGVycy9EaXJDb250ZW50Q29udHJvbGxlci5qcyIsIi9zb3VyY2UvY29udHJvbGxlcnMvRmlsZVVwbG9hZENvbnRyb2xsZXIuanMiLCIvc291cmNlL2NvbnRyb2xsZXJzL0l0ZW1Db250cm9sbGVyLmpzIiwiL3NvdXJjZS9jb250cm9sbGVycy9JdGVtUHJvcGVydGllc0NvbnRyb2xsZXIuanMiLCIvc291cmNlL2NvbnRyb2xsZXJzL1Jvb3RDb250cm9sbGVyLmpzIiwiL3NvdXJjZS9yZXNvdXJjZXMvRGlyLmpzIiwiL3NvdXJjZS9yZXNvdXJjZXMvVHJhbnNsYXRpb25zLmpzIiwiL3NvdXJjZS9zZXJ2aWNlcy9BY3Rpb25zLmpzIiwiL3NvdXJjZS9zZXJ2aWNlcy9CcmVhZGNydW1iLmpzIiwiL3NvdXJjZS9zZXJ2aWNlcy9Db250ZW50LmpzIiwiL3NvdXJjZS9zZXJ2aWNlcy9Db250ZW50RmlsdGVyLmpzIiwiL3NvdXJjZS9zZXJ2aWNlcy9Db250ZW50T3JkZXIuanMiLCIvc291cmNlL3NlcnZpY2VzL0l0ZW1TZXJ2aWNlLmpzIiwiL3NvdXJjZS9zZXJ2aWNlcy9Mb2NhdGlvbi5qcyIsIi9zb3VyY2Uvc2VydmljZXMvUHJvcGVydGllc01vZGFsLmpzIiwiL3NvdXJjZS9zZXJ2aWNlcy9TZXR0aW5ncy5qcyIsIi9zb3VyY2Uvc2VydmljZXMvVHJhbnMuanMiLCIvc291cmNlL3NlcnZpY2VzL1VwbG9hZGVyLmpzIiwiL3NvdXJjZS9zZXJ2aWNlcy9hY3Rpb25zL0NyZWF0ZUZvbGRlclNlcnZpY2UuanMiLCIvc291cmNlL3NlcnZpY2VzL2FjdGlvbnMvRGVsZXRlU2VydmljZS5qcyIsIi9zb3VyY2Uvc2VydmljZXMvYWN0aW9ucy9SZW5hbWVTZXJ2aWNlLmpzIiwiL3NvdXJjZS9zZXJ2aWNlcy9jb250ZW50L1NlbGVjdFNlcnZpY2UuanMiXSwibmFtZXMiOlsibmciLCJjcmlwIiwiZmlsZW1hbmFnZXIiLCJtb2R1bGUiLCJhbmd1bGFyIiwid2luZG93IiwiTWFuYWdlckdyaWRDb25maWciLCJjb25maWciLCIkaW5qZWN0IiwiJCIsIlJ1biIsIiRyb290U2NvcGUiLCJicm9hZGNhc3QiLCJldmVudE5hbWUiLCJhcmdzIiwiJGJyb2FkY2FzdCIsImZpcmVCcm9hZGNhc3QiLCJydW4iLCJqUXVlcnkiLCJBY3Rpb25zQ29udHJvbGxlciIsIiRzY29wZSIsIiRtZE1lbnUiLCJmb2N1cyIsIkFjdGlvbnMiLCJDb250ZW50IiwiTG9jYXRpb24iLCJVcGxvYWRlciIsIlByb3BlcnRpZXNNb2RhbCIsIkNvbnRlbnRPcmRlciIsIkNvbnRlbnRGaWx0ZXIiLCJTZXR0aW5ncyIsImFjdGl2YXRlIiwiY2FuRGVsZXRlU2VsZWN0ZWQiLCJkZWxldGVTZWxlY3RlZCIsImNhbkNyZWF0ZUZvbGRlciIsImNyZWF0ZUZvbGRlciIsImNhblJlbmFtZVNlbGVjdGVkIiwiZW5hYmxlUmVuYW1lU2VsZWN0ZWQiLCJjYW5PcGVuU2VsZWN0ZWQiLCJvcGVuU2VsZWN0ZWQiLCJoYXNQcm9wZXJ0aWVzIiwib3BlblByb3BlcnRpZXMiLCJjYW5VcGxvYWQiLCJoYXNVcGxvYWRzIiwiYWRkRmlsZXMiLCJ1cGxvYWQiLCJjYW5jZWxVcGxvYWQiLCJhbGxNZWRpYUFsbG93ZWQiLCJvcmRlciIsImZpbHRlcnMiLCJjYW5EZWxldGUiLCJnZXRTZWxlY3RlZEl0ZW0iLCIkZXZlbnQiLCJpc0RlZmluZWQiLCJzdG9wUHJvcGFnYXRpb24iLCJkZXNlbGVjdCIsIm5hbWUiLCJjYW5SZW5hbWUiLCJoaWRlIiwiaXRlbSIsImVuYWJsZVJlbmFtZSIsInN1cHBsYW50IiwiaXNEaXIiLCJjaGFuZ2UiLCJvcGVuIiwiaGFzRmlsZXMiLCJmaWxlcyIsImFkZCIsInN0YXJ0IiwiY2xlYW4iLCJpc0FsbE1lZGlhQWxsb3dlZCIsImNvbnRyb2xsZXIiLCJCcmVhZGNydW1iQ29udHJvbGxlciIsIkJyZWFkY3J1bWIiLCJnb1RvIiwiZ29Ub1Jvb3QiLCJicmVhZGNydW1iSGFzSXRlbXMiLCJnZXRCcmVhZGNydW1iSXRlbXMiLCJmb2xkZXIiLCJoYXNJdGVtcyIsIml0ZW1zIiwiRGlyQ29udGVudENvbnRyb2xsZXIiLCIkbG9nIiwiZmlsdGVyIiwiZ2V0Q29udGVudCIsImdldCIsIkZpbGVVcGxvYWRDb250cm9sbGVyIiwiSXRlbUNvbnRyb2xsZXIiLCJjbGljayIsImRibGNsaWNrIiwiaXNTZWxlY3RlZCIsImRlbGV0ZUl0ZW0iLCJvcGVuTWVudSIsImNhbk9wZW4iLCJvcGVuRGlyIiwiZSIsInVwZGF0ZVNlbGVjdGVkIiwic2VsZWN0U2luZ2xlIiwiaXNfZXh0ZW5kZWQiLCJ0aGVuIiwibWVudSIsIiRtZE9wZW5NZW51IiwiZGlyIiwiaXNEaXJVcCIsIkl0ZW1Qcm9wZXJ0aWVzQ29udHJvbGxlciIsIiRtZERpYWxvZyIsIlRyYW5zIiwiaW5mbyIsInJlc29sdmVJdGVtRGV0YWlscyIsInRodW1iIiwiZnVsbF9uYW1lIiwiY2xvc2UiLCJyZXNvbHZlRGlyRGV0YWlscyIsInJlc29sdmVGaWxlRGV0YWlscyIsImRlZmF1bHREZXRhaWxzIiwiZGV0YWlscyIsImxvZyIsInR5cGUiLCJwdXNoIiwidmFsdWUiLCJ1cGRhdGVkX2F0IiwiZ2V0U2l6ZSIsImV4dGVuc2lvbiIsImhhc1ZhbHVlIiwidGh1bWJzIiwidXJsIiwidGl0bGUiLCJzaXplIiwiZm9yRWFjaCIsInZhbCIsIlJvb3RDb250cm9sbGVyIiwiaW5pdCIsInJlZnJlc2hDb250ZW50IiwiY3VycmVudCIsIkRpciIsIiRyZXNvdXJjZSIsImRpclVybCIsImNyZWF0ZSIsIm1ldGhvZCIsImRlbGV0ZURpciIsImRlbGV0ZUZpbGUiLCJmaWxlVXJsIiwicmVuYW1lRGlyIiwicmVuYW1lRmlsZSIsInNlcnZpY2UiLCJUcmFuc2xhdGlvbnMiLCJiYXNlVXJsIiwiQ3JlYXRlRm9sZGVyIiwiRGVsZXRlIiwiUmVuYW1lIiwic2NvcGUiLCJleHRlbmQiLCIkbG9jYXRpb24iLCJicmVhZGNydW1iIiwibGVuZ3RoIiwic2V0TG9jYXRpb24iLCJvbkxvY2F0aW9uQ2hhbmdlIiwic3RyaW5nX3ZhbHVlIiwidG9TdHJpbmciLCJhcHBseSIsInNwbGljZSIsInNldFVybExvY2F0aW9uIiwic3BsaXQiLCJ2IiwiaXNBY3RpdmUiLCJwYXJ0cyIsInVybENoYW5nZUlnbm9yZSIsImxvY2F0aW9uIiwic2VhcmNoIiwib25VcmxMb2NhdGlvbkNoYW5nZSIsIm4iLCJvIiwiZXF1YWxzIiwicmVzb2x2ZVVybE9iamVjdCIsInBhdGgiLCJsIiwiam9pbiIsInRoaXMiLCJzZXQiLCIkd2F0Y2giLCJJdGVtU2VydmljZSIsIlNlbGVjdFNlcnZpY2UiLCJnZXRJdGVtcyIsImNvbnRlbnQiLCJyZW1vdmVJdGVtcyIsImV4dGVuZEl0ZW0iLCJyZW1vdmUiLCJpbmRleE9mIiwiaW5kZXgiLCJhcnJheSIsImFsbG93ZWRNZWRpYVR5cGUiLCJ0b2dnbGUiLCJmaWVsZCIsImltYWdlIiwibWVkaWEiLCJkb2N1bWVudCIsIm9yZGVyQnkiLCJyZXN1bHQiLCJOdW1iZXIiLCJNQVhfVkFMVUUiLCJpc1JldmVyc2UiLCJpc0J5IiwiYWxsb3dlZCIsInNldEZpZWxkIiwicCIsImhhc093blByb3BlcnR5IiwiYnkiLCJieXRlcyIsInJlc291cmNlRGF0YSIsImsiLCJpZEdlbiIsImtleSIsImdldEtleSIsImlkZW50aWZpZXIiLCJzdWJzdHJpbmciLCJyZW5hbWUiLCJ1cGRhdGUiLCJkZWxldGUiLCJnZXRGdWxsTmFtZSIsInNhdmVOZXdOYW1lIiwic2VsZiIsIm9sZCIsIm5ldyIsInJlc3BvbnNlIiwidG9CeXRlcyIsIkNoYW5nZUxvY2F0aW9uU2VydmljZSIsIiRjb29raWVzIiwiaW5pdGlhbExvYWQiLCJnZXRMb2NhdGlvbkZyb21Db29raWUiLCJpc0VtcHR5IiwicXVlcnkiLCJyIiwidXBkYXRlQ29va2llIiwiY29va2llRGlyIiwicHV0IiwiJG9uIiwiZXZlbnQiLCJzaG93IiwiY2xpY2tPdXRzaWRlVG9DbG9zZSIsIm9wZW5Gcm9tIiwiY2xvc2VUbyIsInRlbXBsYXRlVXJsIiwidGVtcGxhdGVQYXRoIiwibG9jYWxzIiwicmVzb2x2ZVBhcmFtcyIsIiRlbGVtZW50IiwiZGF0YV9rZXkiLCJwYXJhbXMiLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwicmVwbGFjZUFsbCIsImFjdGlvbiIsImFjdGlvblVybCIsInJvb3QiLCJhcHBlbmRCYXNlIiwic2V0dGluZ3MiLCJiYXNlX3VybCIsInRlbXBsYXRlX25hbWUiLCJ0bXAiLCJwdWJsaWNVcmwiLCJleHQiLCJhbGxvd2VkX21lZGlhX3R5cGVzIiwiJHNldHRpbmdzIiwicHVibGljX3VybCIsImltZ19zaXplcyIsInRyYW5zbGF0aW9ucyIsIlVwbG9hZCIsImFkZEZpbGUiLCJmaWxlIiwicHJvZ3Jlc3MiLCJpZCIsInVwbG9hZGVyIiwiaXNIdG1sNSIsImVycm9yIiwib25TaW5nbGVGaWxlIiwicmVtb3ZlSXRlbSIsImV2dCIsIk1hdGgiLCJtaW4iLCJwYXJzZUludCIsImxvYWRlZCIsInRvdGFsIiwic3RhdHVzIiwiQ3JlYXRlRm9sZGVyU2VydmljZSIsIl9jcmVhdGVJblByb2dyZXNzIiwiY2FsbGJhY2siLCJpc0Z1bmN0aW9uIiwiRGVsZXRlU2VydmljZSIsIlJlbmFtZVNlcnZpY2UiLCJpc1NlbGVjdGVkQW55SXRlbSIsInNlbGVjdCIsInNlbGVjdGVkIiwiaXNTZWxlY3RlZEl0ZW0iLCJzZWxlY3RlZF9pdGVtIiwiaXNTZWxlY3RlZE9uZUl0ZW0iLCJnZXRTZWxlY3RlZEl0ZW1zIiwic2VsZWN0SXRlbSIsImRlc2VsZWN0U2VsZWN0ZWRJdGVtcyIsInVwZGF0ZVNlbGVjdGVkSXRlbXMiLCJzZWxlY3RTaW5nbGVJdGVtIiwiaXNTZWxlY3RlZE9uZSIsImlzU2VsZWN0ZWRBbnki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LEVBQUFDLFNBQUExSSxRQVFBLFFBQUFrSixHQUFBalAsR0FDQStPLElBQ0FELEVBQUE5TyxHQU1BLFFBQUFnUCxLQUNBM1MsRUFBQWdJLFFBQUF3SyxJQUFBLFNBQUE3TyxHQUNBQSxFQUFBNkosV0EzR0EsR0FBQTJFLElBQ0FDLFlBQ0FELE9BQUFNLEVBQ0F4TSxhQUFBMk0sRUFDQXJQLFNBQUFtUCxFQUNBaE4sV0FBQTJNLEVBQ0FRLGNBQUFOLEVBQ0FPLGNBQUFaLEVBQ0EvTyxnQkFBQUEsRUFDQXFQLGlCQUFBQSxFQUNBeE0sZUFBQTJNLEVBR0EsT0FBQVIsR0FqQkFsUyxFQUFBQyxZQUNBOEksUUFBQSxnQkFBQXFDLElBbUhBakwsUUFBQUMsT0FBQUoiLCJmaWxlIjoiZmlsZS1tYW5hZ2VyLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyID0gbmcubW9kdWxlKCdjcmlwLmZpbGUtbWFuYWdlcicsIFtcclxuICAgICAgICAnY3JpcC5jb3JlJyxcclxuICAgICAgICAnY3JpcC50cmFuc3BhcmVudC1wcm9ncmVzc2JhcicsXHJcbiAgICAgICAgJ2FuZ3VsYXItbG9hZGluZy1iYXInLFxyXG4gICAgICAgICduZ0ZpbGVVcGxvYWQnLFxyXG4gICAgICAgICduZ0Nvb2tpZXMnLFxyXG4gICAgICAgICduZ1Jlc291cmNlJyxcclxuICAgICAgICAnbmdTYW5pdGl6ZScsXHJcbiAgICAgICAgJ25nTWF0ZXJpYWwnXHJcbiAgICBdKVxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCB8fCAod2luZG93LmNyaXAgPSB7fSkpOyIsIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyXHJcbiAgICAgICAgLmNvbmZpZyhNYW5hZ2VyR3JpZENvbmZpZyk7XHJcblxyXG4gICAgTWFuYWdlckdyaWRDb25maWcuJGluamVjdCA9IFtdO1xyXG5cclxuICAgIGZ1bmN0aW9uIE1hbmFnZXJHcmlkQ29uZmlnKCkge1xyXG5cclxuXHJcbiAgICB9XHJcblxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCB8fCAod2luZG93LmNyaXAgPSB7fSkpOyIsIihmdW5jdGlvbiAobmcsICQsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyXHJcbiAgICAgICAgLnJ1bihSdW4pO1xyXG5cclxuICAgIFJ1bi4kaW5qZWN0ID0gW1xyXG4gICAgICAgICckcm9vdFNjb3BlJ1xyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBSdW4oJHJvb3RTY29wZSkge1xyXG4gICAgICAgICRyb290U2NvcGUuZmlyZUJyb2FkY2FzdCA9IGJyb2FkY2FzdDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRmlyZSBldmVudCBvbiByb290IHNjb3BlIGZvciBhbGwgY29udHJvbGxlcnNcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWVcclxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBhcmdzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gYnJvYWRjYXN0KGV2ZW50TmFtZSwgYXJncykge1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoZXZlbnROYW1lLCBhcmdzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKGFuZ3VsYXIsIGpRdWVyeSwgd2luZG93LmNyaXAgfHwgKHdpbmRvdy5jcmlwID0ge30pKTsiLCIoZnVuY3Rpb24gKG5nLCAkLCBjcmlwKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgY3JpcC5maWxlbWFuYWdlclxyXG4gICAgICAgIC5jb250cm9sbGVyKCdBY3Rpb25zQ29udHJvbGxlcicsIEFjdGlvbnNDb250cm9sbGVyKTtcclxuXHJcbiAgICBBY3Rpb25zQ29udHJvbGxlci4kaW5qZWN0ID0gW1xyXG4gICAgICAgICckc2NvcGUnLCAnJG1kTWVudScsICdmb2N1cycsICdDcmlwTWFuYWdlckFjdGlvbnMnLCAnQ3JpcE1hbmFnZXJDb250ZW50JywgJ0NyaXBNYW5hZ2VyTG9jYXRpb24nLFxyXG4gICAgICAgICdDcmlwTWFuYWdlclVwbG9hZGVyJywgJ0NyaXBQcm9wZXJ0aWVzTW9kYWwnLCAnQ3JpcE1hbmFnZXJDb250ZW50T3JkZXInLCAnQ3JpcE1hbmFnZXJDb250ZW50RmlsdGVyJyxcclxuICAgICAgICAnQ3JpcE1hbmFnZXJTZXR0aW5ncydcclxuICAgIF07XHJcblxyXG4gICAgZnVuY3Rpb24gQWN0aW9uc0NvbnRyb2xsZXIoJHNjb3BlLCAkbWRNZW51LCBmb2N1cywgQWN0aW9ucywgQ29udGVudCwgTG9jYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVcGxvYWRlciwgUHJvcGVydGllc01vZGFsLCBDb250ZW50T3JkZXIsIENvbnRlbnRGaWx0ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZXR0aW5ncykge1xyXG4gICAgICAgIGFjdGl2YXRlKCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuY2FuRGVsZXRlU2VsZWN0ZWQgPSBjYW5EZWxldGVTZWxlY3RlZDtcclxuICAgICAgICAgICAgJHNjb3BlLmRlbGV0ZVNlbGVjdGVkID0gZGVsZXRlU2VsZWN0ZWQ7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuY2FuQ3JlYXRlRm9sZGVyID0gY2FuQ3JlYXRlRm9sZGVyO1xyXG4gICAgICAgICAgICAkc2NvcGUuY3JlYXRlRm9sZGVyID0gY3JlYXRlRm9sZGVyO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmNhblJlbmFtZVNlbGVjdGVkID0gY2FuUmVuYW1lU2VsZWN0ZWQ7XHJcbiAgICAgICAgICAgICRzY29wZS5lbmFibGVSZW5hbWVTZWxlY3RlZCA9IGVuYWJsZVJlbmFtZVNlbGVjdGVkO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmNhbk9wZW5TZWxlY3RlZCA9IGNhbk9wZW5TZWxlY3RlZDtcclxuICAgICAgICAgICAgJHNjb3BlLm9wZW5TZWxlY3RlZCA9IG9wZW5TZWxlY3RlZDtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5oYXNQcm9wZXJ0aWVzID0gaGFzUHJvcGVydGllcztcclxuICAgICAgICAgICAgJHNjb3BlLm9wZW5Qcm9wZXJ0aWVzID0gb3BlblByb3BlcnRpZXM7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuY2FuVXBsb2FkID0gY2FuVXBsb2FkO1xyXG4gICAgICAgICAgICAkc2NvcGUuaGFzVXBsb2FkcyA9IGhhc1VwbG9hZHM7XHJcbiAgICAgICAgICAgICRzY29wZS5hZGRGaWxlcyA9IGFkZEZpbGVzO1xyXG4gICAgICAgICAgICAkc2NvcGUudXBsb2FkID0gdXBsb2FkO1xyXG4gICAgICAgICAgICAkc2NvcGUuY2FuY2VsVXBsb2FkID0gY2FuY2VsVXBsb2FkO1xyXG4gICAgICAgICAgICAkc2NvcGUuYWxsTWVkaWFBbGxvd2VkID0gYWxsTWVkaWFBbGxvd2VkO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLm9yZGVyID0gQ29udGVudE9yZGVyO1xyXG4gICAgICAgICAgICAkc2NvcGUuZmlsdGVycyA9IENvbnRlbnRGaWx0ZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlcm1pbmVzIGlmIHNlbGVjdGVkIGl0ZW0gY2FuIGJlIGRlbGV0ZWRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNhbkRlbGV0ZVNlbGVjdGVkKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gQWN0aW9ucy5jYW5EZWxldGUoQ29udGVudC5nZXRTZWxlY3RlZEl0ZW0oKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZWxldGUgc2VsZWN0ZWQgaXRlbVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtICRldmVudFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGRlbGV0ZVNlbGVjdGVkKCRldmVudCkge1xyXG4gICAgICAgICAgICAvLyBpZiBldmVudCBpcyBwcmVzZW50ZWQsIHN0b3AgaXQgcHJvcGFnYXRpb25cclxuICAgICAgICAgICAgaWYgKG5nLmlzRGVmaW5lZCgkZXZlbnQpICYmIG5nLmlzRGVmaW5lZCgkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBBY3Rpb25zLmRlbGV0ZShDb250ZW50LmdldFNlbGVjdGVkSXRlbSgpKTtcclxuICAgICAgICAgICAgQ29udGVudC5kZXNlbGVjdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV0ZXJtaW5lcyBpZiBjYW4gY3JlYXRlIG5ldyBmb2xkZXJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNhbkNyZWF0ZUZvbGRlcigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEFjdGlvbnMuY2FuQ3JlYXRlRm9sZGVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDcmVhdGUgbmV3IGZvbGRlclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVGb2xkZXIobmFtZSkge1xyXG4gICAgICAgICAgICBBY3Rpb25zLmNyZWF0ZUZvbGRlcihuYW1lLCBlbmFibGVSZW5hbWVTZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlcm1pbmVzIGlmIHNlbGVjdGVkIGl0ZW0gY2FuIGJlIHJlbmFtZWRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNhblJlbmFtZVNlbGVjdGVkKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gQWN0aW9ucy5jYW5SZW5hbWUoQ29udGVudC5nZXRTZWxlY3RlZEl0ZW0oKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBFbmFibGUgcmVuYW1lIGZvciBzZWxlY3RlZCBpdGVtXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gJGV2ZW50XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZW5hYmxlUmVuYW1lU2VsZWN0ZWQoJGV2ZW50KSB7XHJcbiAgICAgICAgICAgIC8vIGNsb3NlIG1lbnUgaWYgaXMgb3BlbiB3aGVuIGVuYWJsaW5nIHJlbmFtZSBmdW5jdGlvblxyXG4gICAgICAgICAgICAkbWRNZW51LmhpZGUoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBpdGVtID0gQ29udGVudC5nZXRTZWxlY3RlZEl0ZW0oKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGlmIGV2ZW50IGlzIHByZXNlbnRlZCwgc3RvcCBpdCBwcm9wYWdhdGlvblxyXG4gICAgICAgICAgICBpZiAobmcuaXNEZWZpbmVkKCRldmVudCkgJiYgbmcuaXNEZWZpbmVkKCRldmVudC5zdG9wUHJvcGFnYXRpb24pKSB7XHJcbiAgICAgICAgICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBBY3Rpb25zLmVuYWJsZVJlbmFtZShpdGVtKTtcclxuICAgICAgICAgICAgICAgIGZvY3VzKCcje2lkZW50aWZpZXJ9IGlucHV0W25hbWU9XCJuYW1lXCJdJy5zdXBwbGFudChpdGVtKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERldGVybWluZXMgaWYgY2FuIG9wZW4gc2VsZWN0ZWQgaXRlbVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2FuT3BlblNlbGVjdGVkKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gQ29udGVudC5nZXRTZWxlY3RlZEl0ZW0oKS5pc0RpcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE9wZW4gc2VsZWN0ZWQgZGlyZWN0b3J5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gb3BlblNlbGVjdGVkKCkge1xyXG4gICAgICAgICAgICBpZiAoIWNhbk9wZW5TZWxlY3RlZCgpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgTG9jYXRpb24uY2hhbmdlKENvbnRlbnQuZ2V0U2VsZWN0ZWRJdGVtKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV0ZXJtaW5lcyBpcyBzZWxlY3RlZCBpdGVtIGNhbiBwcm92aWRlIHByb3BlcnRpZXNcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGhhc1Byb3BlcnRpZXMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBDb250ZW50Lmhhc1Byb3BlcnRpZXMoQ29udGVudC5nZXRTZWxlY3RlZEl0ZW0oKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBPcGVuIGl0ZW0gcHJvcGVydGllcyBwb3AtdXBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSAkZXZlbnRcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBvcGVuUHJvcGVydGllcygkZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKCFoYXNQcm9wZXJ0aWVzKCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIFByb3BlcnRpZXNNb2RhbC5vcGVuKENvbnRlbnQuZ2V0U2VsZWN0ZWRJdGVtKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV0ZXJtaW5lcyBpZiBmaWxlIGNhbiBiZSB1cGxvYWRlZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2FuVXBsb2FkKCkge1xyXG4gICAgICAgICAgICAvLyBhdCB0aGlzIG1vbWVudCB3ZSBjYW4gdXBsb2FkIHRvIGFueSBvcGVuIGRpclxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERldGVybWluZXMgaWYgdGhlcmUgZmlsZXMgaW4gcXVldWUgZm9yIHVwbG9hZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gaGFzVXBsb2FkcygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFVwbG9hZGVyLmhhc0ZpbGVzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBZGQgZmlsZXMgZm9yIHVwbG9hZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gZmlsZXNcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBhZGRGaWxlcyhmaWxlcykge1xyXG4gICAgICAgICAgICBVcGxvYWRlci5hZGQoZmlsZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU3RhcnQgdXBsb2FkIGZpbGVzIGZyb20gcXVldWVcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiB1cGxvYWQoKSB7XHJcbiAgICAgICAgICAgIFVwbG9hZGVyLnN0YXJ0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBjYW5jZWxVcGxvYWQoKSB7XHJcbiAgICAgICAgICAgIFVwbG9hZGVyLmNsZWFuKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBhbGxNZWRpYUFsbG93ZWQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBTZXR0aW5ncy5pc0FsbE1lZGlhQWxsb3dlZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoYW5ndWxhciwgalF1ZXJ5LCB3aW5kb3cuY3JpcCB8fCAod2luZG93LmNyaXAgPSB7fSkpOyIsIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0JyZWFkY3J1bWJDb250cm9sbGVyJywgQnJlYWRjcnVtYkNvbnRyb2xsZXIpO1xyXG5cclxuICAgIEJyZWFkY3J1bWJDb250cm9sbGVyLiRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRzY29wZScsICdDcmlwTWFuYWdlckJyZWFkY3J1bWInLCAnQ3JpcE1hbmFnZXJMb2NhdGlvbidcclxuICAgIF07XHJcblxyXG4gICAgZnVuY3Rpb24gQnJlYWRjcnVtYkNvbnRyb2xsZXIoJHNjb3BlLCBCcmVhZGNydW1iLCBMb2NhdGlvbikge1xyXG4gICAgICAgIGFjdGl2YXRlKCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZ29UbyA9IGdvVG87XHJcbiAgICAgICAgICAgICRzY29wZS5nb1RvUm9vdCA9IGdvVG9Sb290O1xyXG4gICAgICAgICAgICAkc2NvcGUuYnJlYWRjcnVtYkhhc0l0ZW1zID0gYnJlYWRjcnVtYkhhc0l0ZW1zO1xyXG4gICAgICAgICAgICAkc2NvcGUuZ2V0QnJlYWRjcnVtYkl0ZW1zID0gZ2V0QnJlYWRjcnVtYkl0ZW1zO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR28gdG8gc3BlY2lmaWVkIGZvbGRlclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGZvbGRlclxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmb2xkZXIuZGlyXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZvbGRlci5uYW1lXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZ29Ubyhmb2xkZXIpIHtcclxuICAgICAgICAgICAgTG9jYXRpb24uY2hhbmdlKGZvbGRlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHbyB0byByb290IGZvbGRlciBsb2NhdGlvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGdvVG9Sb290KCkge1xyXG4gICAgICAgICAgICBnb1RvKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlcm1pbmVzIGlzIEJyZWFkY3J1bWIgYW55IGl0ZW1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGJyZWFkY3J1bWJIYXNJdGVtcygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEJyZWFkY3J1bWIuaGFzSXRlbXMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBCcmVhZGNydW1iIGl0ZW0gY29sbGVjdGlvblxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGdldEJyZWFkY3J1bWJJdGVtcygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEJyZWFkY3J1bWIuaXRlbXM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCk7IiwiKGZ1bmN0aW9uIChuZywgY3JpcCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuY29udHJvbGxlcignRGlyQ29udGVudENvbnRyb2xsZXInLCBEaXJDb250ZW50Q29udHJvbGxlcik7XHJcblxyXG4gICAgRGlyQ29udGVudENvbnRyb2xsZXIuJGluamVjdCA9IFtcclxuICAgICAgICAnJGxvZycsICckc2NvcGUnLCAnQ3JpcE1hbmFnZXJDb250ZW50JywgJ0NyaXBNYW5hZ2VyQ29udGVudE9yZGVyJywgJ0NyaXBNYW5hZ2VyQ29udGVudEZpbHRlcidcclxuICAgIF07XHJcblxyXG4gICAgZnVuY3Rpb24gRGlyQ29udGVudENvbnRyb2xsZXIoJGxvZywgJHNjb3BlLCBDb250ZW50LCBDb250ZW50T3JkZXIsIENvbnRlbnRGaWx0ZXIpIHtcclxuICAgICAgICBhY3RpdmF0ZSgpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLm9yZGVyID0gQ29udGVudE9yZGVyO1xyXG4gICAgICAgICAgICAkc2NvcGUuZmlsdGVyID0gQ29udGVudEZpbHRlcjtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5nZXRDb250ZW50ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29udGVudC5nZXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbn0pKGFuZ3VsYXIsIHdpbmRvdy5jcmlwIHx8ICh3aW5kb3cuY3JpcCA9IHt9KSk7IiwiKGZ1bmN0aW9uIChuZywgY3JpcCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuY29udHJvbGxlcignRmlsZVVwbG9hZENvbnRyb2xsZXInLCBGaWxlVXBsb2FkQ29udHJvbGxlcik7XHJcblxyXG4gICAgRmlsZVVwbG9hZENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJ0NyaXBNYW5hZ2VyVXBsb2FkZXInXTtcclxuXHJcbiAgICBmdW5jdGlvbiBGaWxlVXBsb2FkQ29udHJvbGxlcigkc2NvcGUsIFVwbG9hZGVyKSB7XHJcbiAgICAgICAgYWN0aXZhdGUoKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5oYXNVcGxvYWRzID0gaGFzVXBsb2FkcztcclxuICAgICAgICAgICAgJHNjb3BlLmZpbGVzID0gZmlsZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlcm1pbmVzIGlmIHRoZXJlIGZpbGVzIGluIHF1ZXVlIGZvciB1cGxvYWRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGhhc1VwbG9hZHMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBVcGxvYWRlci5oYXNGaWxlcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IGZpbGVzIGZyb20gcXVldWVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheX1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBmaWxlcygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFVwbG9hZGVyLmZpbGVzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCk7IiwiKGZ1bmN0aW9uIChuZywgY3JpcCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuY29udHJvbGxlcignSXRlbUNvbnRyb2xsZXInLCBJdGVtQ29udHJvbGxlcik7XHJcblxyXG4gICAgSXRlbUNvbnRyb2xsZXIuJGluamVjdCA9IFtcclxuICAgICAgICAnJGxvZycsICckc2NvcGUnLCAnJG1kTWVudScsICdmb2N1cycsICdDcmlwTWFuYWdlckNvbnRlbnQnLCAnQ3JpcE1hbmFnZXJMb2NhdGlvbicsXHJcbiAgICAgICAgJ0NyaXBNYW5hZ2VyQWN0aW9ucycsICdDcmlwUHJvcGVydGllc01vZGFsJ1xyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBJdGVtQ29udHJvbGxlcigkbG9nLCAkc2NvcGUsICRtZE1lbnUsIGZvY3VzLCBDb250ZW50LCBMb2NhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFjdGlvbnMsIFByb3BlcnRpZXNNb2RhbCkge1xyXG4gICAgICAgIGFjdGl2YXRlKCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuY2xpY2sgPSBjbGljaztcclxuICAgICAgICAgICAgJHNjb3BlLmRibGNsaWNrID0gZGJsY2xpY2s7XHJcbiAgICAgICAgICAgICRzY29wZS5pc1NlbGVjdGVkID0gaXNTZWxlY3RlZDtcclxuICAgICAgICAgICAgJHNjb3BlLmVuYWJsZVJlbmFtZSA9IGVuYWJsZVJlbmFtZTtcclxuICAgICAgICAgICAgJHNjb3BlLmNhbkRlbGV0ZSA9IGNhbkRlbGV0ZTtcclxuICAgICAgICAgICAgJHNjb3BlLmRlbGV0ZUl0ZW0gPSBkZWxldGVJdGVtO1xyXG4gICAgICAgICAgICAkc2NvcGUuaGFzUHJvcGVydGllcyA9IGhhc1Byb3BlcnRpZXM7XHJcbiAgICAgICAgICAgICRzY29wZS5vcGVuUHJvcGVydGllcyA9IG9wZW5Qcm9wZXJ0aWVzO1xyXG4gICAgICAgICAgICAkc2NvcGUub3Blbk1lbnUgPSBvcGVuTWVudTtcclxuICAgICAgICAgICAgJHNjb3BlLmNhbk9wZW4gPSBjYW5PcGVuO1xyXG4gICAgICAgICAgICAkc2NvcGUub3BlbkRpciA9IG9wZW5EaXI7XHJcbiAgICAgICAgICAgICRzY29wZS5jYW5SZW5hbWUgPSBjYW5SZW5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBPbiBpdGVtIGNsaWNrXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZVxyXG4gICAgICAgICAqIEBwYXJhbSBpdGVtXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xpY2soZSwgaXRlbSkge1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgQ29udGVudC51cGRhdGVTZWxlY3RlZCgpO1xyXG4gICAgICAgICAgICBDb250ZW50LmRlc2VsZWN0KCk7XHJcbiAgICAgICAgICAgIENvbnRlbnQuc2VsZWN0U2luZ2xlKGl0ZW0pO1xyXG4gICAgICAgICAgICAkbWRNZW51LmhpZGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE9uIGl0ZW0gZG91YmxlIGNsaWNrXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZVxyXG4gICAgICAgICAqIEBwYXJhbSBpdGVtXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZGJsY2xpY2soZSwgaXRlbSkge1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAvLyRsb2cuaW5mbygnZGJsY2xpY2snLCBpdGVtKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpdGVtLmlzRGlyKSB7XHJcbiAgICAgICAgICAgICAgICBMb2NhdGlvbi5jaGFuZ2UoaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERldGVybWluZXMgaXMgaXRlbSBzZWxlY3RlZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGl0ZW1cclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBpc1NlbGVjdGVkKGl0ZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbnRlbnQuaXNTZWxlY3RlZChpdGVtKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEVuYWJsZSBpdGVtIHJlbmFtZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtICRldmVudFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGVuYWJsZVJlbmFtZSgkZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKCRldmVudC5zdG9wUHJvcGFnYXRpb24pXHJcbiAgICAgICAgICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICAkbWRNZW51LmhpZGUoKTtcclxuICAgICAgICAgICAgdmFyIGl0ZW07XHJcblxyXG4gICAgICAgICAgICBpZigkZXZlbnQuaXNfZXh0ZW5kZWQpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0gPSAkZXZlbnQ7XHJcbiAgICAgICAgICAgICAgICBDb250ZW50LnNlbGVjdFNpbmdsZShpdGVtKTtcclxuICAgICAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgICAgICBpdGVtID0gQ29udGVudC5nZXRTZWxlY3RlZEl0ZW0oKTtcclxuXHJcbiAgICAgICAgICAgIEFjdGlvbnMuZW5hYmxlUmVuYW1lKGl0ZW0pO1xyXG4gICAgICAgICAgICBmb2N1cygnI3tpZGVudGlmaWVyfSBpbnB1dFtuYW1lPVwibmFtZVwiXScuc3VwcGxhbnQoaXRlbSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2FuRGVsZXRlKGl0ZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIEFjdGlvbnMuY2FuRGVsZXRlKGl0ZW0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGVsZXRlIGl0ZW0gZnJvbSBmaWxlIHN5c3RlbVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGl0ZW1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBkZWxldGVJdGVtKGl0ZW0pIHtcclxuICAgICAgICAgICAgQWN0aW9ucy5kZWxldGUoaXRlbSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBoYXNQcm9wZXJ0aWVzKGl0ZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbnRlbnQuaGFzUHJvcGVydGllcyhpdGVtKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5Qcm9wZXJ0aWVzKGl0ZW0pIHtcclxuICAgICAgICAgICAgUHJvcGVydGllc01vZGFsLm9wZW4oaXRlbSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBvcGVuTWVudShpdGVtLCAkZXZlbnQpIHtcclxuICAgICAgICAgICAgJG1kTWVudS5oaWRlKCkudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLm1lbnUuJG1kT3Blbk1lbnUoJGV2ZW50KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBjYW5PcGVuKGl0ZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0uaXNEaXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBvcGVuRGlyKGRpcikge1xyXG4gICAgICAgICAgICBpZiAoIWNhbk9wZW4oZGlyKSlcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIExvY2F0aW9uLmNoYW5nZShkaXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2FuUmVuYW1lKGl0ZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuICFpdGVtLmlzRGlyVXA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCB8fCAod2luZG93LmNyaXAgPSB7fSkpOyIsIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuY29udHJvbGxlcignSXRlbVByb3BlcnRpZXNDb250cm9sbGVyJywgSXRlbVByb3BlcnRpZXNDb250cm9sbGVyKTtcclxuXHJcbiAgICBJdGVtUHJvcGVydGllc0NvbnRyb2xsZXIuJGluamVjdCA9IFtcclxuICAgICAgICAnJGxvZycsICckc2NvcGUnLCAnJG1kRGlhbG9nJywgJ0NyaXBNYW5hZ2VyVHJhbnMnLCAnaXRlbSdcclxuICAgIF07XHJcblxyXG4gICAgZnVuY3Rpb24gSXRlbVByb3BlcnRpZXNDb250cm9sbGVyKCRsb2csICRzY29wZSwgJG1kRGlhbG9nLCBUcmFucywgaXRlbSkge1xyXG4gICAgICAgIGFjdGl2YXRlKCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgICAgICAgICAkbG9nLmluZm8oaXRlbSk7XHJcbiAgICAgICAgICAgICRzY29wZS5pdGVtID0gcmVzb2x2ZUl0ZW1EZXRhaWxzKGl0ZW0pO1xyXG4gICAgICAgICAgICAkc2NvcGUudGh1bWIgPSBpdGVtLnRodW1iO1xyXG4gICAgICAgICAgICAkc2NvcGUubmFtZSA9IGl0ZW0uZnVsbF9uYW1lO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmNsb3NlID0gY2xvc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIaWRlIG1vZGFsXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xvc2UoKSB7XHJcbiAgICAgICAgICAgICRtZERpYWxvZy5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXNvbHZlIGl0ZW0gZGV0YWlsc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGl0ZW1cclxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZUl0ZW1EZXRhaWxzKGl0ZW0pIHtcclxuICAgICAgICAgICAgaWYgKGl0ZW0uaXNEaXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlRGlyRGV0YWlscyhpdGVtKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlRmlsZURldGFpbHMoaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBpdGVtIGRlZmF1bHQgZGV0YWlsc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gZGV0YWlsc1xyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBpdGVtXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGl0ZW0uZnVsbF9uYW1lXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGl0ZW0udXBkYXRlZF9hdFxyXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGl0ZW0uZ2V0U2l6ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGRlZmF1bHREZXRhaWxzKGRldGFpbHMsIGl0ZW0pIHtcclxuICAgICAgICAgICAgJGxvZy5sb2coJ2l0ZW1fcHJvcGVydGllc19tb2RhbF9maWxlX3R5cGVfJyArIGl0ZW0udHlwZSk7XHJcbiAgICAgICAgICAgIGRldGFpbHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBUcmFucygnaXRlbV9wcm9wZXJ0aWVzX21vZGFsX2l0ZW1fdHlwZScpLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IFRyYW5zKCdpdGVtX3Byb3BlcnRpZXNfbW9kYWxfZmlsZV90eXBlXycgKyBpdGVtLnR5cGUpXHJcbiAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFRyYW5zKCdpdGVtX3Byb3BlcnRpZXNfbW9kYWxfbmFtZScpLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0uZnVsbF9uYW1lXHJcbiAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFRyYW5zKCdpdGVtX3Byb3BlcnRpZXNfbW9kYWxfZGF0ZScpLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0udXBkYXRlZF9hdFxyXG4gICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBUcmFucygnaXRlbV9wcm9wZXJ0aWVzX21vZGFsX3NpemUnKSxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLmdldFNpemUoKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlc29sdmUgZm9sZGVyIGRldGFpbHNcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBpdGVtXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHJlc29sdmVEaXJEZXRhaWxzKGl0ZW0pIHtcclxuICAgICAgICAgICAgdmFyIGRldGFpbHMgPSBbXTtcclxuICAgICAgICAgICAgZGVmYXVsdERldGFpbHMoZGV0YWlscywgaXRlbSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGV0YWlscztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlc29sdmUgZmlsZSBkZXRhaWxzXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gaXRlbVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheX1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiByZXNvbHZlRmlsZURldGFpbHMoaXRlbSkge1xyXG4gICAgICAgICAgICB2YXIgZGV0YWlscyA9IFtdO1xyXG4gICAgICAgICAgICBkZWZhdWx0RGV0YWlscyhkZXRhaWxzLCBpdGVtKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpdGVtLmRpciAhPT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGRldGFpbHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogVHJhbnMoJ2l0ZW1fcHJvcGVydGllc19tb2RhbF9pdGVtX2RpcicpLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLmRpclxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGRldGFpbHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBUcmFucygnaXRlbV9wcm9wZXJ0aWVzX21vZGFsX2l0ZW1fZXh0ZW5zaW9uJyksXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogaXRlbS5leHRlbnNpb25cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnaW1hZ2UnICYmIG5nLmhhc1ZhbHVlKGl0ZW0udGh1bWJzKSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGRldGFpbHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogVHJhbnMoJ2l0ZW1fcHJvcGVydGllc19tb2RhbF9pdGVtX3VybCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnPGEgaHJlZj1cInt1cmx9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+e3RpdGxlfTwvYT4nLnN1cHBsYW50KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBpdGVtLnVybCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFRyYW5zKCdpdGVtX3Byb3BlcnRpZXNfbW9kYWxfc2l6ZV9kaW0nKS5zdXBwbGFudChpdGVtLnNpemUpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG5nLmZvckVhY2goaXRlbS50aHVtYnMsIGZ1bmN0aW9uICh2YWwsIHNpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBUcmFucygnaXRlbV9wcm9wZXJ0aWVzX21vZGFsX3NpemVfdXJsX3RpdGxlJykuc3VwcGxhbnQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogVHJhbnMoJ2l0ZW1fcHJvcGVydGllc19tb2RhbF9zaXplX2tleV8nICsgc2l6ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnPGEgaHJlZj1cInt1cmx9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+e3RpdGxlfTwvYT4nLnN1cHBsYW50KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogdmFsLnVybCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBUcmFucygnaXRlbV9wcm9wZXJ0aWVzX21vZGFsX3NpemVfZGltJykuc3VwcGxhbnQodmFsLnNpemUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRldGFpbHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogVHJhbnMoJ2l0ZW1fcHJvcGVydGllc19tb2RhbF9pdGVtX3VybCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnPGEgaHJlZj1cInt1cmx9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+e2Z1bGxfbmFtZX08L2E+Jy5zdXBwbGFudChpdGVtKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkZXRhaWxzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoYW5ndWxhciwgd2luZG93LmNyaXApOyIsIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1Jvb3RDb250cm9sbGVyJywgUm9vdENvbnRyb2xsZXIpO1xyXG5cclxuICAgIFJvb3RDb250cm9sbGVyLiRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRzY29wZScsICckbWRNZW51JywgJ0NyaXBNYW5hZ2VyTG9jYXRpb24nLCAnQ3JpcE1hbmFnZXJDb250ZW50JywgJ0NyaXBNYW5hZ2VyVHJhbnMnLCAnQ3JpcE1hbmFnZXJCcmVhZGNydW1iJ1xyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBSb290Q29udHJvbGxlcigkc2NvcGUsICRtZE1lbnUsIExvY2F0aW9uLCBDb250ZW50LCBUcmFucywgQnJlYWRjcnVtYikge1xyXG5cclxuICAgICAgICBhY3RpdmF0ZSgpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuICAgICAgICAgICAgLy8gaW5pdGlhbGlzZSBmaWxlIG1hbmFnZXIgaW5pdGlhbCBsb2NhdGlvbiBhbmQgbG9hZCB0cmFuc2xhdGlvbnNcclxuICAgICAgICAgICAgVHJhbnMoKS5pbml0KCk7XHJcbiAgICAgICAgICAgIExvY2F0aW9uLmluaXQoKTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5kZXNlbGVjdCA9IGRlc2VsZWN0O1xyXG4gICAgICAgICAgICAkc2NvcGUucmVmcmVzaENvbnRlbnQgPSByZWZyZXNoQ29udGVudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGRlc2VsZWN0KCkge1xyXG4gICAgICAgICAgICBDb250ZW50LmRlc2VsZWN0KCk7XHJcbiAgICAgICAgICAgICRtZE1lbnUuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVmcmVzaENvbnRlbnQoKSB7XHJcbiAgICAgICAgICAgIExvY2F0aW9uLmNoYW5nZShCcmVhZGNydW1iLmN1cnJlbnQoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCB8fCAod2luZG93LmNyaXAgPSB7fSkpOyIsIihmdW5jdGlvbiAoY3JpcCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuc2VydmljZSgnRGlyJywgRGlyKTtcclxuXHJcbiAgICBEaXIuJGluamVjdCA9IFtcclxuICAgICAgICAnJHJlc291cmNlJywgJ0NyaXBNYW5hZ2VyU2V0dGluZ3MnXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIERpcigkcmVzb3VyY2UsIFNldHRpbmdzKSB7XHJcbiAgICAgICAgcmV0dXJuICRyZXNvdXJjZShTZXR0aW5ncy5kaXJVcmwoJzpkaXIvOm5hbWUnKSwge1xyXG4gICAgICAgICAgICBkaXI6ICdAZGlyJyxcclxuICAgICAgICAgICAgbmFtZTogJ0BuYW1lJ1xyXG4gICAgICAgIH0sIHtcclxuICAgICAgICAgICAgJ2NyZWF0ZSc6IHt1cmw6IFNldHRpbmdzLmRpclVybCgnOmRpci86bmFtZScsICdjcmVhdGUnKSwgbWV0aG9kOiAnUE9TVCd9LFxyXG4gICAgICAgICAgICAnZGVsZXRlRGlyJzoge3VybDogU2V0dGluZ3MuZGlyVXJsKCc6ZGlyJywgJ2RlbGV0ZScpLCBtZXRob2Q6ICdHRVQnfSxcclxuICAgICAgICAgICAgJ2RlbGV0ZUZpbGUnOiB7dXJsOiBTZXR0aW5ncy5maWxlVXJsKCc6ZGlyLzpuYW1lJywgJ2RlbGV0ZScpLCBtZXRob2Q6ICdHRVQnfSxcclxuICAgICAgICAgICAgJ3JlbmFtZURpcic6IHt1cmw6IFNldHRpbmdzLmRpclVybCgnOmRpcicsICdyZW5hbWUnKSwgbWV0aG9kOiAnR0VUJ30sXHJcbiAgICAgICAgICAgICdyZW5hbWVGaWxlJzoge3VybDogU2V0dGluZ3MuZmlsZVVybCgnOmRpcicsICdyZW5hbWUnKSwgbWV0aG9kOiAnR0VUJ31cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSkod2luZG93LmNyaXAgfHwgKHdpbmRvdy5jcmlwID0ge30pKTsiLCIoZnVuY3Rpb24gKG5nLCBjcmlwKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgY3JpcC5maWxlbWFuYWdlclxyXG4gICAgICAgIC5zZXJ2aWNlKCdDcmlwTWFuYWdlclRyYW5zbGF0aW9ucycsIFRyYW5zbGF0aW9ucyk7XHJcblxyXG4gICAgVHJhbnNsYXRpb25zLiRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRyZXNvdXJjZScsICdDcmlwTWFuYWdlclNldHRpbmdzJ1xyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBUcmFuc2xhdGlvbnMoJHJlc291cmNlLCBTZXR0aW5ncykge1xyXG4gICAgICAgIHJldHVybiAkcmVzb3VyY2UoU2V0dGluZ3MuYmFzZVVybCgndHJhbnNsYXRpb25zJykpO1xyXG4gICAgfVxyXG5cclxufSkoYW5ndWxhciwgd2luZG93LmNyaXApOyIsIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyXHJcbiAgICAgICAgLnNlcnZpY2UoJ0NyaXBNYW5hZ2VyQWN0aW9ucycsIEFjdGlvbnMpO1xyXG5cclxuICAgIEFjdGlvbnMuJGluamVjdCA9IFtcclxuICAgICAgICAnQ3JlYXRlRm9sZGVyU2VydmljZScsICdEZWxldGVTZXJ2aWNlJywgJ1JlbmFtZVNlcnZpY2UnXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIEFjdGlvbnMoQ3JlYXRlRm9sZGVyLCBEZWxldGUsIFJlbmFtZSkge1xyXG4gICAgICAgIHZhciBzY29wZSA9IHt9O1xyXG4gICAgICAgIG5nLmV4dGVuZChzY29wZSwgQ3JlYXRlRm9sZGVyLCBEZWxldGUsIFJlbmFtZSk7XHJcblxyXG4gICAgICAgIHJldHVybiBzY29wZTtcclxuICAgIH1cclxufSkoYW5ndWxhciwgd2luZG93LmNyaXApOyIsIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuc2VydmljZSgnQ3JpcE1hbmFnZXJCcmVhZGNydW1iJywgQnJlYWRjcnVtYik7XHJcblxyXG4gICAgQnJlYWRjcnVtYi4kaW5qZWN0ID0gWyckbG9jYXRpb24nLCAnJHJvb3RTY29wZSddO1xyXG5cclxuICAgIGZ1bmN0aW9uIEJyZWFkY3J1bWIoJGxvY2F0aW9uLCAkcm9vdFNjb3BlKSB7XHJcbiAgICAgICAgdmFyIGJyZWFkY3J1bWIgPSB7XHJcbiAgICAgICAgICAgIGl0ZW1zOiBbXSxcclxuICAgICAgICAgICAgaGFzSXRlbXM6IGhhc0l0ZW1zLFxyXG4gICAgICAgICAgICBjdXJyZW50OiBjdXJyZW50LFxyXG4gICAgICAgICAgICBzZXQ6IHNldExvY2F0aW9uLFxyXG4gICAgICAgICAgICB1cmxDaGFuZ2VJZ25vcmU6IGZhbHNlLFxyXG4gICAgICAgICAgICByZXNvbHZlVXJsT2JqZWN0OiByZXNvbHZlVXJsT2JqZWN0LFxyXG4gICAgICAgICAgICB0b1N0cmluZzogdG9TdHJpbmdcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBXYXRjaCBsb2NhdGlvbiBjaGFuZ2UgYW5kIGZpcmUgZXZlbnQsIGlmIGl0IGlzIGNoYW5nZWQgYnkgdXNlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgICRyb290U2NvcGUuJHdhdGNoKGxvY2F0aW9uLCBvblVybExvY2F0aW9uQ2hhbmdlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGJyZWFkY3J1bWI7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBjdXJyZW50IGZvbGRlciBsb2NhdGlvbiBvYmplY3RcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtvYmplY3R9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY3VycmVudCgpIHtcclxuICAgICAgICAgICAgaWYgKGJyZWFkY3J1bWIuaXRlbXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge2RpcjogJycsIG5hbWU6ICcnfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGJyZWFkY3J1bWIuaXRlbXNbYnJlYWRjcnVtYi5pdGVtcy5sZW5ndGggLSAxXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrIGlzIHRoZXJlIGFueSBpdGVtIGluIGJyZWFkY3J1bWJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGhhc0l0ZW1zKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gISFicmVhZGNydW1iLml0ZW1zLmxlbmd0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNldCBuZXcgbG9jYXRpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBmb2xkZXJcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZm9sZGVyLmRpclxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmb2xkZXIubmFtZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHNldExvY2F0aW9uKGZvbGRlcikge1xyXG4gICAgICAgICAgICBvbkxvY2F0aW9uQ2hhbmdlKHtkaXI6IGZvbGRlci5kaXIsIG5hbWU6IGZvbGRlci5uYW1lfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVcGRhdGUgYnJlYWRjcnVtYiBhcnJheSB3aGVuIG1hbmFnZXIgcHJvcGVydHkgaXMgY2hhbmdlZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IHZhbFxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWwuZGlyXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbC5uYW1lXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gb25Mb2NhdGlvbkNoYW5nZSh2YWwpIHtcclxuICAgICAgICAgICAgdmFyIHN0cmluZ192YWx1ZSA9IHRvU3RyaW5nLmFwcGx5KHZhbCk7XHJcbiAgICAgICAgICAgIGJyZWFkY3J1bWIuaXRlbXMuc3BsaWNlKDAsIGJyZWFkY3J1bWIuaXRlbXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgc2V0VXJsTG9jYXRpb24oc3RyaW5nX3ZhbHVlKTtcclxuICAgICAgICAgICAgbmcuZm9yRWFjaChzdHJpbmdfdmFsdWUuc3BsaXQoJ1xcLycpLmNsZWFuKCcnLCBudWxsKSwgZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBjdXJyZW50IGRpciBmcm9tIHByZXZpb3VzIGl0ZW0sIGlmIGl0IGV4aXN0c1xyXG4gICAgICAgICAgICAgICAgdmFyIGRpciA9ICcnO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJyZWFkY3J1bWIuaXRlbXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIG9ubHkgb25lIHByZXZpb3VzIGl0ZW0sIHVzZSBpdGBzIG5hbWVcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYnJlYWRjcnVtYi5pdGVtcy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlyID0gYnJlYWRjcnVtYi5pdGVtc1swXS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBvdGhlciB3YXksIGNvbmNhdCBwcmV2IGRpciB3aXRoIG5hbWVcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlyID0gJ3tkaXJ9L3tuYW1lfScuc3VwcGxhbnQoYnJlYWRjcnVtYi5pdGVtc1ticmVhZGNydW1iLml0ZW1zLmxlbmd0aCAtIDFdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYnJlYWRjcnVtYi5pdGVtcy5wdXNoKHtuYW1lOiB2LCBkaXI6IGRpciwgaXNBY3RpdmU6IGZhbHNlfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gbWFyayBsYXN0IGl0ZW0gYXMgYWN0aXZlLCB0aGlzIHdpbGwgaGVscCBtYXJrIGl0ZW0gYXMgYWN0aXZlXHJcbiAgICAgICAgICAgIGlmIChicmVhZGNydW1iLml0ZW1zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGJyZWFkY3J1bWIuaXRlbXNbYnJlYWRjcnVtYi5pdGVtcy5sZW5ndGggLSAxXS5pc0FjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNldCBjdXJyZW50IGxvY2F0aW9uIHRvIHVybFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheXxTdHJpbmd9IHBhcnRzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0VXJsTG9jYXRpb24ocGFydHMpIHtcclxuICAgICAgICAgICAgYnJlYWRjcnVtYi51cmxDaGFuZ2VJZ25vcmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB2YXIgbG9jYXRpb24gPSB0eXBlb2YgcGFydHMgPT09ICdzdHJpbmcnID8gcGFydHMuc3BsaXQoJ1xcLycpIDogcGFydHM7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uLmNsZWFuKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAobG9jYXRpb24ubGVuZ3RoID4gMCAmJiBuZy5oYXNWYWx1ZShsb2NhdGlvblswXSkpIHtcclxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5zZWFyY2goJ2wnLCBsb2NhdGlvbik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24uc2VhcmNoKCdsJywgbnVsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWRjcnVtYi51cmxDaGFuZ2VJZ25vcmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBjdXJyZW50IHVybCBsb2NhdGlvbiBvYmplY3RcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHsqfE9iamVjdH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBsb2NhdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRsb2NhdGlvbi5zZWFyY2goKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9uVXJsTG9jYXRpb25DaGFuZ2Uobiwgbykge1xyXG4gICAgICAgICAgICBpZiAoIWJyZWFkY3J1bWIudXJsQ2hhbmdlSWdub3JlICYmICFuZy5lcXVhbHMobiwgbykpIHtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuZmlyZUJyb2FkY2FzdCgndXJsLWNoYW5nZScsIFtyZXNvbHZlVXJsT2JqZWN0KG4pXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlc29sdmUgJGxvY2F0aW9uIG9iamVjdCBybyBwYXRoIHN0cmluZ1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGxvY2F0aW9uXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheXxTdHJpbmd9IGxvY2F0aW9uLmxcclxuICAgICAgICAgKiBAcmV0dXJucyB7U3RyaW5nfG51bGx9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZVVybE9iamVjdChsb2NhdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgcGF0aCA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmIChuZy5oYXNWYWx1ZShsb2NhdGlvbi5sKSkge1xyXG4gICAgICAgICAgICAgICAgcGF0aCA9IGxvY2F0aW9uLmw7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHBhdGggPT09ICdvYmplY3QnKVxyXG4gICAgICAgICAgICAgICAgICAgIHBhdGggPSBwYXRoLmpvaW4oJy8nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb252ZXJ0IGNvbnRleHQgdG8gc3RyaW5nIHZhbHVlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gW3ZhbHVlXVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gdG9TdHJpbmcodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXIgPSB0aGlzLmRpciB8fCAnJztcclxuICAgICAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5uYW1lIHx8ICcnO1xyXG4gICAgICAgICAgICB2YWx1ZSA9ICd7ZGlyfS97bmFtZX0nLnN1cHBsYW50KHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnNwbGl0KCdcXC8nKS5jbGVhbigpLmpvaW4oJ1xcLycpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoYW5ndWxhciwgd2luZG93LmNyaXApOyIsIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyXHJcbiAgICAgICAgLnNlcnZpY2UoJ0NyaXBNYW5hZ2VyQ29udGVudCcsIENvbnRlbnQpO1xyXG5cclxuICAgIENvbnRlbnQuJGluamVjdCA9IFsnSXRlbVNlcnZpY2UnLCAnU2VsZWN0U2VydmljZScsICdEaXInXTtcclxuXHJcbiAgICBmdW5jdGlvbiBDb250ZW50KEl0ZW1TZXJ2aWNlLCBTZWxlY3RTZXJ2aWNlLCBEaXIpIHtcclxuICAgICAgICB2YXIgY29udGVudCA9IHtcclxuICAgICAgICAgICAgaXRlbXM6IFtdLFxyXG4gICAgICAgICAgICBnZXQ6IGdldEl0ZW1zLFxyXG4gICAgICAgICAgICBhZGQ6IGFkZCxcclxuICAgICAgICAgICAgcmVtb3ZlOiByZW1vdmUsXHJcbiAgICAgICAgICAgIHJlbW92ZUl0ZW1zOiByZW1vdmVJdGVtcyxcclxuICAgICAgICAgICAgaGFzUHJvcGVydGllczogaGFzUHJvcGVydGllc1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIG5nLmV4dGVuZChjb250ZW50LCBTZWxlY3RTZXJ2aWNlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBhbGwgY29udGVudCBpdGVtc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge0FycmF5fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGdldEl0ZW1zKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gY29udGVudC5pdGVtcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlbW92ZSBhbGwgaXRlbXMgaW4gY29udGVudFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZUl0ZW1zKCkge1xyXG4gICAgICAgICAgICBjb250ZW50Lml0ZW1zLnNwbGljZSgwLCBjb250ZW50Lml0ZW1zLmxlbmd0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBZGQgaXRlbSB0byBjb250ZW50XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaXRlbVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gYWRkKGl0ZW0pIHtcclxuICAgICAgICAgICAgaWYgKCFuZy5pc0RlZmluZWQoaXRlbS5pc19leHRlbmRlZCkpIHtcclxuICAgICAgICAgICAgICAgIEl0ZW1TZXJ2aWNlLmV4dGVuZEl0ZW0oaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKHR5cGVvZiBpdGVtICE9PSAnRGlyJykge1xyXG4gICAgICAgICAgICAgICAgaXRlbSA9IG5ldyBEaXIoaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnRlbnQuaXRlbXMucHVzaChpdGVtKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVtb3ZlIHNpbmdsZSBpdGVtXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gaXRlbVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZShpdGVtKSB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuaXRlbXMuc3BsaWNlKGNvbnRlbnQuaXRlbXMuaW5kZXhPZihpdGVtKSwgMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlcm1pbmVzIGlzIGl0ZW0gaGFzIHByb3BlcnRpZXNcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBpdGVtXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gaGFzUHJvcGVydGllcyhpdGVtKSB7XHJcbiAgICAgICAgICAgIGlmKCFpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiAhaXRlbS5pc0RpclVwXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCk7IiwiKGZ1bmN0aW9uIChuZywgY3JpcCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuc2VydmljZSgnQ3JpcE1hbmFnZXJDb250ZW50RmlsdGVyJywgQ29udGVudEZpbHRlcik7XHJcblxyXG4gICAgQ29udGVudEZpbHRlci4kaW5qZWN0ID0gWyckbG9nJywgJ0NyaXBNYW5hZ2VyU2V0dGluZ3MnXTtcclxuXHJcbiAgICBmdW5jdGlvbiBDb250ZW50RmlsdGVyKCRsb2csIFNldHRpbmdzKSB7XHJcbiAgICAgICAgdmFyIGZpbHRlcnMgPSB7XHJcbiAgICAgICAgICAgIGRpcjogZGlyLFxyXG4gICAgICAgICAgICB0b2dnbGU6IHRvZ2dsZSxcclxuICAgICAgICAgICAgaW1hZ2U6IHRydWUsXHJcbiAgICAgICAgICAgIG1lZGlhOiB0cnVlLFxyXG4gICAgICAgICAgICBkb2N1bWVudDogdHJ1ZVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBmaWx0ZXJzO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBkaXIodmFsdWUsIGluZGV4LCBhcnJheSkge1xyXG4gICAgICAgICAgICAvLyBJZiBpdGVtIGlzIGRpciwgaXQgd2lsbCBiZSB2aXNpYmxlXHJcbiAgICAgICAgICAgIGlmICh2YWx1ZS5pc0RpcilcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgLy8gaWYgYW55IHR5cGUgaXMgYWxsb3dlZFxyXG4gICAgICAgICAgICBpZiAoU2V0dGluZ3MuaXNBbGxNZWRpYUFsbG93ZWQoKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXJzW3ZhbHVlLnR5cGVdO1xyXG5cclxuICAgICAgICAgICAgLy8gaWYgZmlsdGVyIGVuYWJsZSBwcm9wZXJ0eSBpcyBkaXNhYmxlZCwgY29tcGFyZSB3aXRoIGFsbG93ZWQgdHlwZVxyXG4gICAgICAgICAgICByZXR1cm4gU2V0dGluZ3MuYWxsb3dlZE1lZGlhVHlwZSgpID09IHZhbHVlLnR5cGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiB0b2dnbGUoZmllbGQpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBmaWx0ZXJzW2ZpZWxkXSA9PT0gJ2Jvb2xlYW4nKVxyXG4gICAgICAgICAgICAgICAgZmlsdGVyc1tmaWVsZF0gPSAhZmlsdGVyc1tmaWVsZF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCk7IiwiKGZ1bmN0aW9uIChuZywgY3JpcCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuc2VydmljZSgnQ3JpcE1hbmFnZXJDb250ZW50T3JkZXInLCBDb250ZW50T3JkZXIpO1xyXG5cclxuICAgIENvbnRlbnRPcmRlci4kaW5qZWN0ID0gWyckbG9nJ107XHJcblxyXG4gICAgZnVuY3Rpb24gQ29udGVudE9yZGVyKCRsb2cpIHtcclxuICAgICAgICB2YXIgb3JkZXIgPSB7XHJcbiAgICAgICAgICAgIGJ5OiBvcmRlckJ5LFxyXG4gICAgICAgICAgICBpc0J5OiBpc0J5LFxyXG4gICAgICAgICAgICBzZXQ6IHNldEZpZWxkLFxyXG4gICAgICAgICAgICBmaWVsZDogJ2Z1bGxfbmFtZScsXHJcbiAgICAgICAgICAgIGlzUmV2ZXJzZTogZmFsc2UsXHJcblxyXG4gICAgICAgICAgICBmdWxsX25hbWU6IHRydWUsXHJcbiAgICAgICAgICAgIGJ5dGVzOiBmYWxzZSxcclxuICAgICAgICAgICAgdXBkYXRlZF9hdDogZmFsc2VcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgYWxsb3dlZCA9IFsnZnVsbF9uYW1lJywgJ2J5dGVzJywgJ3VwZGF0ZWRfYXQnXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG9yZGVyO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBpdGVtXHJcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudW1iZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gb3JkZXJCeShpdGVtKSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSAtTnVtYmVyLk1BWF9WQUxVRSAvIDI7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlbVtvcmRlci5maWVsZF0gPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5pc0Rpcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXRlbS5pc0RpclVwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gaXRlbVtvcmRlci5maWVsZF0gKyAxO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBmb3IgcmV2ZXJzZSBzb3J0LCBkaXJzIHNob3VsZCBub3QgY2hhbmdlIHBvc2l0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyLmlzUmV2ZXJzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKj0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmlzRGlyVXApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gTnVtYmVyLk1BWF9WQUxVRSAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGl0ZW1bb3JkZXIuZmllbGRdO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9yZGVyLmlzUmV2ZXJzZSlcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAnMSB7ZmllbGR9JztcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAneiB7ZmllbGR9JztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5pc0Rpcikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRpciB1cCBzaG91bGQgYmUgb24gZmlyc3QgcGxhY2VcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5pc0RpclVwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmRlci5pc1JldmVyc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAnenp6JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gJzAgMCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXIuaXNSZXZlcnNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gJ3oge2ZpZWxkfSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9ICcxIHtmaWVsZH0nO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5zdXBwbGFudCh7ZmllbGQ6IGl0ZW1bb3JkZXIuZmllbGRdfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vJGxvZy5pbmZvKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJcyBjdXJyZW50IG9yZGVyIGJ5IGZpZWxkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmllbGRcclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBpc0J5KGZpZWxkKSB7XHJcbiAgICAgICAgICAgIGlmIChhbGxvd2VkLmluZGV4T2YoZmllbGQpICE9PSAtMSlcclxuICAgICAgICAgICAgICAgIHJldHVybiAhIW9yZGVyW2ZpZWxkXTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNldCBmaWVsZCBhcyBjdXJyZW50bHkgc29ydGFibGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWVsZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHNldEZpZWxkKGZpZWxkKSB7XHJcbiAgICAgICAgICAgIGlmIChhbGxvd2VkLmluZGV4T2YoZmllbGQpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBhbGxvd2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFsbG93ZWQuaGFzT3duUHJvcGVydHkocCkgJiYgYWxsb3dlZFtwXSAhPSBmaWVsZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJbYWxsb3dlZFtwXV0gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBvcmRlci5maWVsZCA9IGZpZWxkO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghb3JkZXJbZmllbGRdKVxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyW2ZpZWxkXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXIuaXNSZXZlcnNlID0gIW9yZGVyLmlzUmV2ZXJzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoYW5ndWxhciwgd2luZG93LmNyaXApOyIsIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyXHJcbiAgICAgICAgLnNlcnZpY2UoJ0l0ZW1TZXJ2aWNlJywgSXRlbVNlcnZpY2UpO1xyXG5cclxuICAgIEl0ZW1TZXJ2aWNlLiRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRsb2cnLCAnJHJvb3RTY29wZScsICdDcmlwTWFuYWdlclRyYW5zJ1xyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBJdGVtU2VydmljZSgkbG9nLCAkcm9vdFNjb3BlLCBUcmFucykge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICdleHRlbmQnOiBleHRlbmQsXHJcbiAgICAgICAgICAgICdleHRlbmRJdGVtJzogZXh0ZW5kSXRlbVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEV4dGVuZCBEaXIgcmVzb3VyY2UgcmVxdWVzdCByZXNwb25zZSB3aXRoIHJlcXVpcmVkIGluZm9ybWF0aW9uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcmVzb3VyY2VEYXRhXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZXh0ZW5kKHJlc291cmNlRGF0YSkge1xyXG4gICAgICAgICAgICBuZy5leHRlbmQocmVzb3VyY2VEYXRhLCB7XHJcbiAgICAgICAgICAgICAgICAnZ2V0SXRlbXMnOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgbmcuZm9yRWFjaChyZXNvdXJjZURhdGEsIGZ1bmN0aW9uICh2LCBrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuZEl0ZW0odiwgayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHVzaCh2KTtcclxuICAgICAgICAgICAgICAgICAgICB9LCBpdGVtcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZW5lcmF0ZSBVSSBpZCBmb3IgaXRlbVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGtleVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gaWRHZW4oa2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnbGlzdC1pdGVtLScgKyBrZXk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQga2V5IGZyb20gaWRlbnRpZmllciAocmV2ZXJzZSBtZXRob2QgZnJvbSBpZEdlbilcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyXHJcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBnZXRLZXkoaWRlbnRpZmllcikge1xyXG4gICAgICAgICAgICByZXR1cm4gaWRlbnRpZmllci5zdWJzdHJpbmcoMTApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV0ZXJtaW5lIGlzIGl0ZW0gYSBmb2xkZXJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBpdGVtXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gaXNEaXIoaXRlbSkge1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbSAmJiBuZy5pc0RlZmluZWQoaXRlbS50eXBlKSAmJiBpdGVtLnR5cGUgPT09ICdkaXInO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV0ZXJtaW5lIGlzIGl0ZW0gYW4gYSBmb2xkZXIgdXBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBpdGVtXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gaXNEaXJVcChpdGVtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpc0RpcihpdGVtKSAmJiAoaXRlbS5uYW1lID09ICcnIHx8IGl0ZW0ubmFtZSA9PSBudWxsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEV4dGVuZCBzaW5nbGUgaXRlbSB3aXRoIHJlcXVpcmVkIGluZm9ybWF0aW9uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gaXRlbVxyXG4gICAgICAgICAqIEBwYXJhbSBrZXlcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBleHRlbmRJdGVtKGl0ZW0sIGtleSkge1xyXG4gICAgICAgICAgICBuZy5leHRlbmQoaXRlbSwge1xyXG4gICAgICAgICAgICAgICAgaXNfZXh0ZW5kZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICByZW5hbWU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgaWRlbnRpZmllcjogaWRHZW4oa2V5KSxcclxuICAgICAgICAgICAgICAgIGlzRGlyOiBpc0RpcihpdGVtKSxcclxuICAgICAgICAgICAgICAgIGlzRGlyVXA6IGlzRGlyVXAoaXRlbSksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGU6IHVwZGF0ZSxcclxuICAgICAgICAgICAgICAgIGRlbGV0ZTogZGVsZXRlSXRlbSxcclxuICAgICAgICAgICAgICAgIGdldEZ1bGxOYW1lOiBnZXRGdWxsTmFtZSxcclxuICAgICAgICAgICAgICAgIHNhdmVOZXdOYW1lOiBzYXZlTmV3TmFtZSxcclxuICAgICAgICAgICAgICAgIGdldFNpemU6IGdldFNpemVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVcGRhdGUgaXRlbSBjaGFuZ2VzIGlmIHRoZXkgYXJlIHByZXNlbnRlZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge2l0ZW19XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yZW5hbWUpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVOZXdOYW1lKCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBpdGVtIG5hbWUgKGlnbm9yaW5nIGZ1bGxfbmFtZSBwcm9wZXJ0eSB2YWx1ZSlcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0RnVsbE5hbWUoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGlyIHx8IHRoaXMuZXh0ZW5zaW9uID09PSAnJylcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5hbWU7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHJldHVybiAne25hbWV9LntleHRlbnNpb259Jy5zdXBwbGFudCh0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNhdmUgaXRlbSBuYW1lIGlmIGl0IGlzIGNoYW5nZWRcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBzYXZlTmV3TmFtZSgpIHtcclxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAga2V5ID0gZ2V0S2V5KHNlbGYuaWRlbnRpZmllciksXHJcbiAgICAgICAgICAgICAgICBtZW51ID0gc2VsZi5tZW51O1xyXG4gICAgICAgICAgICBzZWxmLnJlbmFtZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5mdWxsX25hbWUgIT09IHNlbGYuZ2V0RnVsbE5hbWUoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1ldGhvZCA9IHNlbGYuaXNEaXIgPyAnJHJlbmFtZURpcicgOiAnJHJlbmFtZUZpbGUnO1xyXG4gICAgICAgICAgICAgICAgc2VsZlttZXRob2RdKHtcclxuICAgICAgICAgICAgICAgICAgICAnb2xkJzogc2VsZi5mdWxsX25hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgJ25ldyc6IHNlbGYuZ2V0RnVsbE5hbWUoKVxyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmcuZXh0ZW5kKHNlbGYsIGV4dGVuZEl0ZW0ocmVzcG9uc2UsIGtleSksIHttZW51OiBtZW51fSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZWxldGUgaXRlbSBkZXRlY3RpbmcgaXQgdHlwZSAoZmlsZSBvciBkaXIpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZGVsZXRlSXRlbSgpIHtcclxuICAgICAgICAgICAgdmFyIG1ldGhvZCA9IHRoaXMuaXNEaXIgPyAnJGRlbGV0ZURpcicgOiAnJGRlbGV0ZUZpbGUnO1xyXG4gICAgICAgICAgICB0aGlzW21ldGhvZF0oe25hbWU6IHRoaXMuZnVsbF9uYW1lfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgdXNlciBmcmllbmRseSBpdGVtIHNpemVcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBnZXRTaXplKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ieXRlcy50b0J5dGVzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCB8fCAod2luZG93LmNyaXAgPSB7fSkpOyIsIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyXHJcbiAgICAgICAgLnNlcnZpY2UoJ0NyaXBNYW5hZ2VyTG9jYXRpb24nLCBDaGFuZ2VMb2NhdGlvblNlcnZpY2UpO1xyXG5cclxuICAgIENoYW5nZUxvY2F0aW9uU2VydmljZS4kaW5qZWN0ID0gW1xyXG4gICAgICAgICckY29va2llcycsICckbG9jYXRpb24nLCAnJHJvb3RTY29wZScsICdEaXInLCAnSXRlbVNlcnZpY2UnLCAnQ3JpcE1hbmFnZXJCcmVhZGNydW1iJywgJ0NyaXBNYW5hZ2VyQ29udGVudCdcclxuICAgIF07XHJcblxyXG4gICAgZnVuY3Rpb24gQ2hhbmdlTG9jYXRpb25TZXJ2aWNlKCRjb29raWVzLCAkbG9jYXRpb24sICRyb290U2NvcGUsIERpciwgSXRlbVNlcnZpY2UsIEJyZWFkY3J1bWIsIENvbnRlbnQpIHtcclxuXHJcbiAgICAgICAgJHJvb3RTY29wZS4kb24oJ3VybC1jaGFuZ2UnLCBmdW5jdGlvbiAoZXZlbnQsIGFyZ3MpIHtcclxuICAgICAgICAgICAgY2hhbmdlKHtkaXI6IGFyZ3NbMF19KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW5pdDogaW5pdGlhbExvYWQsXHJcbiAgICAgICAgICAgIGNoYW5nZTogY2hhbmdlLFxyXG4gICAgICAgICAgICBjdXJyZW50OiB7fVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoYW5nZSBsb2NhdGlvbiB0byBpbml0aWFsIGZvbGRlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGluaXRpYWxMb2FkKCkge1xyXG4gICAgICAgICAgICBjaGFuZ2UoZ2V0TG9jYXRpb25Gcm9tQ29va2llKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2hhbmdlIGN1cnJlbnQgbG9jYXRpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbZm9sZGVyXVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNoYW5nZShmb2xkZXIpIHtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSB7ZGlyOiBudWxsLCBuYW1lOiBudWxsfTtcclxuICAgICAgICAgICAgaWYgKG5nLmlzRGVmaW5lZChmb2xkZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBwYXRoLmRpciA9IG5nLmlzRW1wdHkoZm9sZGVyLmRpcikgPyBudWxsIDogZm9sZGVyLmRpcjtcclxuICAgICAgICAgICAgICAgIHBhdGgubmFtZSA9IG5nLmlzRW1wdHkoZm9sZGVyLm5hbWUpID8gbnVsbCA6IGZvbGRlci5uYW1lO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBEaXIucXVlcnkocGF0aCwgZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZUNvb2tpZShwYXRoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBBcHBlbmQgcmVzcG9uc2Ugd2l0aCByZXF1aXJlZCBpbmZvcm1hdGlvblxyXG4gICAgICAgICAgICAgICAgSXRlbVNlcnZpY2UuZXh0ZW5kKHIpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBvbGQgY29udGVudFxyXG4gICAgICAgICAgICAgICAgQ29udGVudC5yZW1vdmVJdGVtcygpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGRlc2VsZWN0LCBpZiBhbnkgaXRlbSBpcyBzZWxlY3RlZFxyXG4gICAgICAgICAgICAgICAgQ29udGVudC5kZXNlbGVjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIENoYW5nZSBicmVhZGNydW1iIHBhdGhcclxuICAgICAgICAgICAgICAgIEJyZWFkY3J1bWIuc2V0KHBhdGgpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEFkZCBuZXcgY29udGVudFxyXG4gICAgICAgICAgICAgICAgbmcuZm9yRWFjaChyLmdldEl0ZW1zKCksIGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ29udGVudC5hZGQoaXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgbWFuYWdlciBsYXN0IGxvY2F0aW9uIGZyb20gY29va2llc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge3tkaXI6IHN0cmluZywgbmFtZTogc3RyaW5nfX1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBnZXRMb2NhdGlvbkZyb21Db29raWUoKSB7XHJcbiAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IHtkaXI6IG51bGwsIG5hbWU6IG51bGx9LFxyXG4gICAgICAgICAgICAgICAgdXJsID0gQnJlYWRjcnVtYi5yZXNvbHZlVXJsT2JqZWN0KCRsb2NhdGlvbi5zZWFyY2goKSk7XHJcblxyXG4gICAgICAgICAgICAvLyBpZiB1cmwgY29udGFpbnMgbG9jYXRpb24sIGlnbm9yZSBjb29raWVzIHZhbHVlXHJcbiAgICAgICAgICAgIGlmIChuZy5oYXNWYWx1ZSh1cmwpKSB7XHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbi5kaXIgPSB1cmw7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvY2F0aW9uO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgY29va2llRGlyID0gJGNvb2tpZXMuZ2V0KCdsb2NhdGlvbi1kaXInKSxcclxuICAgICAgICAgICAgICAgIG5hbWUgPSAkY29va2llcy5nZXQoJ2xvY2F0aW9uLWRpci1uYW1lJyk7XHJcbiAgICAgICAgICAgIGlmIChuZy5oYXNWYWx1ZShjb29raWVEaXIpIHx8IG5nLmhhc1ZhbHVlKG5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbi5kaXIgPSBjb29raWVEaXI7XHJcbiAgICAgICAgICAgICAgICBpZiAobmcuaXNFbXB0eShuYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWUgPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbG9jYXRpb247XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVcGRhdGUgY29va2llcyBmb3IgbmV3IG1hbmFnZXIgaW5zdGFuY2UsIHRvIGJlIG9wZW5lZCBpbiBzYW1lIGxvY2F0aW9uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gbG9jYXRpb25cclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbG9jYXRpb24uZGlyXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGxvY2F0aW9uLm5hbWVcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVDb29raWUobG9jYXRpb24pIHtcclxuICAgICAgICAgICAgJGNvb2tpZXMucHV0KCdsb2NhdGlvbi1kaXInLCBsb2NhdGlvbi5kaXIgfHwgJycpO1xyXG4gICAgICAgICAgICAkY29va2llcy5wdXQoJ2xvY2F0aW9uLWRpci1uYW1lJywgbG9jYXRpb24ubmFtZSB8fCAnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCk7IiwiKGZ1bmN0aW9uIChuZywgY3JpcCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuc2VydmljZSgnQ3JpcFByb3BlcnRpZXNNb2RhbCcsIFByb3BlcnRpZXNNb2RhbCk7XHJcblxyXG4gICAgUHJvcGVydGllc01vZGFsLiRpbmplY3QgPSBbJyRtZERpYWxvZycsICdDcmlwTWFuYWdlclNldHRpbmdzJywgJ0NyaXBNYW5hZ2VyQ29udGVudCddO1xyXG5cclxuICAgIGZ1bmN0aW9uIFByb3BlcnRpZXNNb2RhbCgkbWREaWFsb2csIFNldHRpbmdzLCBDb250ZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgb3Blbjogb3BlblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE9wZW4gaXRlbSBwcm9wZXJ0aWVzIG1vZGFsXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gaXRlbVxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpdGVtLmlkZW50aWZpZXJcclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBvcGVuKGl0ZW0pIHtcclxuICAgICAgICAgICAgaWYoIUNvbnRlbnQuaGFzUHJvcGVydGllcyhpdGVtKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkbWREaWFsb2cuc2hvdyh7XHJcbiAgICAgICAgICAgICAgICBjbGlja091dHNpZGVUb0Nsb3NlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgb3BlbkZyb206ICcjJyArIGl0ZW0uaWRlbnRpZmllcixcclxuICAgICAgICAgICAgICAgIGNsb3NlVG86ICcjJyArIGl0ZW0uaWRlbnRpZmllcixcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBTZXR0aW5ncy50ZW1wbGF0ZVBhdGgoJ2l0ZW0tcHJvcGVydGllcy1tb2RhbCcpLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0l0ZW1Qcm9wZXJ0aWVzQ29udHJvbGxlcicsXHJcbiAgICAgICAgICAgICAgICBsb2NhbHM6IHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtOiBpdGVtXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0pKGFuZ3VsYXIsIHdpbmRvdy5jcmlwKTsiLCIoZnVuY3Rpb24gKG5nLCBjcmlwLCAkKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgY3JpcC5maWxlbWFuYWdlclxyXG4gICAgICAgIC5zZXJ2aWNlKCdDcmlwTWFuYWdlclNldHRpbmdzJywgU2V0dGluZ3MpO1xyXG5cclxuICAgIFNldHRpbmdzLiRpbmplY3QgPSBbJyRsb2cnXTtcclxuXHJcbiAgICBmdW5jdGlvbiBTZXR0aW5ncygkbG9nKSB7XHJcbiAgICAgICAgdmFyICRzZXR0aW5ncyA9ICQoJyNzZXR0aW5ncycpLFxyXG4gICAgICAgICAgICBhbGxvd2VkX21lZGlhX3R5cGVzID0gWydpbWFnZScsICdtZWRpYScsICdkb2N1bWVudCddLFxyXG4gICAgICAgICAgICBzZXR0aW5ncyA9IHtcclxuICAgICAgICAgICAgICAgIGJhc2VfdXJsOiAkc2V0dGluZ3MuZGF0YSgnYmFzZS11cmwnKSxcclxuICAgICAgICAgICAgICAgIHB1YmxpY191cmw6ICRzZXR0aW5ncy5kYXRhKCdwdWJsaWMtdXJsJyksXHJcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHJlc29sdmVQYXJhbXMoJHNldHRpbmdzLCAncGFyYW1zJyksXHJcbiAgICAgICAgICAgICAgICBpbWdfc2l6ZXM6IEpTT04ucGFyc2UoJHNldHRpbmdzLmRhdGEoJ3NpemVzJykucmVwbGFjZUFsbChcIidcIiwgJ1wiJykpLFxyXG4gICAgICAgICAgICAgICAgZGlyVXJsOiBkaXJVcmwsXHJcbiAgICAgICAgICAgICAgICBmaWxlVXJsOiBmaWxlVXJsLFxyXG4gICAgICAgICAgICAgICAgYmFzZVVybDogYXBwZW5kQmFzZSxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlUGF0aDogdGVtcGxhdGVQYXRoLFxyXG4gICAgICAgICAgICAgICAgYWxsb3dlZE1lZGlhVHlwZTogYWxsb3dlZE1lZGlhVHlwZSxcclxuICAgICAgICAgICAgICAgIGlzQWxsTWVkaWFBbGxvd2VkOiBpc0FsbE1lZGlhQWxsb3dlZFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gc2V0dGluZ3M7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBiYWNrZW5kIHBhcmFtZXRlcnMgaWYgdGhleSBhcmUgcHJlc2VudGVkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gJGVsZW1lbnRcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGF0YV9rZXlcclxuICAgICAgICAgKiBAcmV0dXJucyB7b2JqZWN0fEFycmF5fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHJlc29sdmVQYXJhbXMoJGVsZW1lbnQsIGRhdGFfa2V5KSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSAkZWxlbWVudC5kYXRhKGRhdGFfa2V5KTtcclxuICAgICAgICAgICAgaWYgKHBhcmFtcy5sZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAgICAgcGFyYW1zID0gSlNPTi5wYXJzZShwYXJhbXMucmVwbGFjZUFsbChcIidcIiwgJ1wiJykpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHBhcmFtcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBwbHVnaW4gZGlyIGFjdGlvbiB1cmxcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkaXJcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2FjdGlvbl1cclxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGRpclVybChkaXIsIGFjdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gYWN0aW9uVXJsKCdkaXInLCBkaXIsIGFjdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgcGx1Z2luIGZpbGUgYWN0aW9uIHVybFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGRpclxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbYWN0aW9uXVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZmlsZVVybChkaXIsIGFjdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gYWN0aW9uVXJsKCdmaWxlJywgZGlyLCBhY3Rpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHJvb3RcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGlyXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFthY3Rpb25dXHJcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBhY3Rpb25Vcmwocm9vdCwgZGlyLCBhY3Rpb24pIHtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSByb290ICsgJy8nO1xyXG4gICAgICAgICAgICBpZiAobmcuaXNEZWZpbmVkKGFjdGlvbikpIHtcclxuICAgICAgICAgICAgICAgIHBhdGggKz0gYWN0aW9uICsgJy8nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcGF0aCArPSBkaXI7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYXBwZW5kQmFzZShwYXRoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBwbHVnaW4gYmFzZSB1cmxcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoXHJcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBhcHBlbmRCYXNlKHBhdGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNldHRpbmdzLmJhc2VfdXJsICsgcGF0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBmdWxsIHBhdGggdG8gdGVtcGxhdGVcclxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGVtcGxhdGVfbmFtZVxyXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbZXh0ZW5zaW9uXVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHRlbXBsYXRlUGF0aCh0ZW1wbGF0ZV9uYW1lLCBleHRlbnNpb24pIHtcclxuICAgICAgICAgICAgdmFyIHRtcCA9IHtcclxuICAgICAgICAgICAgICAgIHVybDogcHVibGljVXJsKCksXHJcbiAgICAgICAgICAgICAgICBuYW1lOiB0ZW1wbGF0ZV9uYW1lLFxyXG4gICAgICAgICAgICAgICAgZXh0OiBleHRlbnNpb24gfHwgJ2h0bWwnXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gJ3t1cmx9L3RlbXBsYXRlcy97bmFtZX0ue2V4dH0nLnN1cHBsYW50KHRtcCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgYWxsb3dlZCBtZWRpYSB0eXBlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGFsbG93ZWRNZWRpYVR5cGUoKSB7XHJcbiAgICAgICAgICAgIGlmIChhbGxvd2VkX21lZGlhX3R5cGVzLmluZGV4T2Yoc2V0dGluZ3MucGFyYW1zWyd0eXBlJ10pID09PSAtMSlcclxuICAgICAgICAgICAgICAgIHJldHVybiAnZmlsZSc7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc2V0dGluZ3MucGFyYW1zWyd0eXBlJ107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBpc0FsbE1lZGlhQWxsb3dlZCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFsbG93ZWRNZWRpYVR5cGUoKSA9PT0gJ2ZpbGUnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoYW5ndWxhciwgd2luZG93LmNyaXAsIGpRdWVyeSk7IiwiKGZ1bmN0aW9uIChuZywgY3JpcCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuc2VydmljZSgnQ3JpcE1hbmFnZXJUcmFucycsIFRyYW5zKTtcclxuXHJcbiAgICBUcmFucy4kaW5qZWN0ID0gW1xyXG4gICAgICAgICdDcmlwTWFuYWdlclRyYW5zbGF0aW9ucydcclxuICAgIF07XHJcblxyXG4gICAgZnVuY3Rpb24gVHJhbnMoVHJhbnNsYXRpb25zKSB7XHJcbiAgICAgICAgdmFyIHRyYW5zbGF0aW9ucyA9IHt9O1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICBpZiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNsYXRpb25zW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRpb25zID0gVHJhbnNsYXRpb25zLmdldCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbn0pKGFuZ3VsYXIsIHdpbmRvdy5jcmlwKTsiLCIoZnVuY3Rpb24gKG5nLCBjcmlwKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgY3JpcC5maWxlbWFuYWdlclxyXG4gICAgICAgIC5zZXJ2aWNlKCdDcmlwTWFuYWdlclVwbG9hZGVyJywgVXBsb2FkZXIpO1xyXG5cclxuICAgIFVwbG9hZGVyLiRpbmplY3QgPSBbJ0NyaXBNYW5hZ2VyU2V0dGluZ3MnLCAnQ3JpcE1hbmFnZXJCcmVhZGNydW1iJywgJ0NyaXBNYW5hZ2VyQ29udGVudCcsICdVcGxvYWQnXTtcclxuXHJcbiAgICBmdW5jdGlvbiBVcGxvYWRlcihTZXR0aW5ncywgQnJlYWRjcnVtYiwgQ29udGVudCwgVXBsb2FkKSB7XHJcblxyXG4gICAgICAgIHZhciB1cGxvYWRlciA9IHtcclxuICAgICAgICAgICAgZmlsZXM6IFtdLFxyXG4gICAgICAgICAgICBhZGQ6IGFkZEZpbGUsXHJcbiAgICAgICAgICAgIGhhc0ZpbGVzOiBoYXNGaWxlcyxcclxuICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0LFxyXG4gICAgICAgICAgICBjbGVhbjogY2xlYW4sXHJcbiAgICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDIwMCxcclxuICAgICAgICAgICAgICAgIGVycm9yOiAnJyxcclxuICAgICAgICAgICAgICAgIHVybDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvb3Q6IFNldHRpbmdzLmZpbGVVcmwoJ3VwbG9hZCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpcjogJydcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB1cGxvYWRlcjtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYWRkRmlsZShmaWxlcykge1xyXG4gICAgICAgICAgICBuZy5mb3JFYWNoKGZpbGVzLCBmdW5jdGlvbiAoZmlsZSkge1xyXG4gICAgICAgICAgICAgICAgZmlsZS5wcm9ncmVzcyA9IDA7XHJcbiAgICAgICAgICAgICAgICBmaWxlLmlkID0gdXBsb2FkZXIuZmlsZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgZmlsZS5pc0h0bWw1ID0gbmcuaXNIdG1sNTtcclxuICAgICAgICAgICAgICAgIGZpbGUuZXJyb3IgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHVwbG9hZGVyLmZpbGVzLnB1c2goZmlsZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV0ZXJtaW5lcyBpZiB0aGVyZSBmaWxlcyBpbiBxdWV1ZSBmb3IgdXBsb2FkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBoYXNGaWxlcygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVwbG9hZGVyLmZpbGVzLmxlbmd0aCA+IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTdGFydCB1cGxvYWQgYWxsIGZpbGVzIGZyb20gcXVldWVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHN0YXJ0KCkge1xyXG4gICAgICAgICAgICBpZiAoIWhhc0ZpbGVzKCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvLyBnZXQgY3VycmVudCBkaXIgZnJvbSBCcmVhZGNydW1iIGFuZCBjb252ZXJ0IGl0IHRvIHN0cmluZ1xyXG4gICAgICAgICAgICB1cGxvYWRlci5zZXR0aW5ncy51cmwuZGlyID0gQnJlYWRjcnVtYi50b1N0cmluZy5hcHBseShCcmVhZGNydW1iLmN1cnJlbnQoKSk7XHJcblxyXG4gICAgICAgICAgICBuZy5mb3JFYWNoKHVwbG9hZGVyLmZpbGVzLCBvblNpbmdsZUZpbGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVXBsb2FkIHNpbmdsZSBmaWxlIHdyYXBwZXJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBmaWxlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gb25TaW5nbGVGaWxlKGZpbGUpIHtcclxuICAgICAgICAgICAgdmFyIHVwbG9hZCA9IFVwbG9hZC51cGxvYWQoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiAne3Jvb3R9L3tkaXJ9Jy5zdXBwbGFudCh1cGxvYWRlci5zZXR0aW5ncy51cmwpLFxyXG4gICAgICAgICAgICAgICAgZGF0YToge2ZpbGU6IGZpbGV9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdXBsb2FkLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBmaWxlLnByb2dyZXNzID0gMTAwO1xyXG4gICAgICAgICAgICAgICAgdXBsb2FkZXIuZmlsZXMucmVtb3ZlSXRlbShmaWxlLmlkLCAnaWQnKTtcclxuICAgICAgICAgICAgICAgIENvbnRlbnQuYWRkKHJlc3BvbnNlLmRhdGEpO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogYWRkIG5vdGlmaWNhdGlvbiBhYm91dCBlcnJvclxyXG4gICAgICAgICAgICAgICAgZmlsZS5lcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBmaWxlLnByb2dyZXNzID0gMTAwO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgICAgICBmaWxlLnByb2dyZXNzID0gTWF0aC5taW4oMTAwLCBwYXJzZUludCg5MC4wICogZXZ0LmxvYWRlZCAvIGV2dC50b3RhbCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlbW92ZSBhbGwgZmlsZXMgZnJvbSB1cGxvYWRzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xlYW4oKSB7XHJcbiAgICAgICAgICAgIHVwbG9hZGVyLmZpbGVzID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufSkoYW5ndWxhciwgd2luZG93LmNyaXApOyIsIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyXHJcbiAgICAgICAgLnNlcnZpY2UoJ0NyZWF0ZUZvbGRlclNlcnZpY2UnLCBDcmVhdGVGb2xkZXJTZXJ2aWNlKTtcclxuXHJcbiAgICBDcmVhdGVGb2xkZXJTZXJ2aWNlLiRpbmplY3QgPSBbXHJcbiAgICAgICAgJ0RpcicsICdDcmlwTWFuYWdlckJyZWFkY3J1bWInLCAnQ3JpcE1hbmFnZXJDb250ZW50JywgJ1JlbmFtZVNlcnZpY2UnXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIENyZWF0ZUZvbGRlclNlcnZpY2UoRGlyLCBCcmVhZGNydW1iLCBDb250ZW50LCBSZW5hbWUpIHtcclxuICAgICAgICB2YXIgY3JlYXRlID0ge1xyXG4gICAgICAgICAgICBfY3JlYXRlSW5Qcm9ncmVzczogZmFsc2UsXHJcbiAgICAgICAgICAgIGNhbkNyZWF0ZUZvbGRlcjogY2FuQ3JlYXRlRm9sZGVyLFxyXG4gICAgICAgICAgICBjcmVhdGVGb2xkZXI6IGNyZWF0ZUZvbGRlclxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBjcmVhdGU7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrIGlzIGZvbGRlciBjYW4gYmUgY3JlYXRlZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2FuQ3JlYXRlRm9sZGVyKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gIWNyZWF0ZS5fY3JlYXRlSW5Qcm9ncmVzc1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlIG5ldyBmb2xkZXJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXHJcbiAgICAgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gW2NhbGxiYWNrXVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUZvbGRlcihuYW1lLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICBpZiAoIWNhbkNyZWF0ZUZvbGRlcigpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgY3JlYXRlLl9jcmVhdGVJblByb2dyZXNzID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIERpci5jcmVhdGUoQnJlYWRjcnVtYi5jdXJyZW50KCksIHtuYW1lOiBuYW1lfSwgZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZS5fY3JlYXRlSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIE5vdGlmeSBjb250cm9sbGVycyB0byBoYW5kbGUgVUkgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBDb250ZW50LmFkZChyKTtcclxuICAgICAgICAgICAgICAgIENvbnRlbnQuc2VsZWN0U2luZ2xlKGl0ZW0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChuZy5pc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCk7IiwiKGZ1bmN0aW9uIChuZywgY3JpcCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuc2VydmljZSgnRGVsZXRlU2VydmljZScsIERlbGV0ZVNlcnZpY2UpO1xyXG5cclxuICAgIGZ1bmN0aW9uIERlbGV0ZVNlcnZpY2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY2FuRGVsZXRlOiBjYW5EZWxldGUsXHJcbiAgICAgICAgICAgIGRlbGV0ZTogZGVsZXRlSXRlbVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrIGFyZSB0aGUgaXRlbSBkZWxldGFibGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbnxvYmplY3R9IGl0ZW1cclxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGl0ZW0uaXNEaXJVcFxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNhbkRlbGV0ZShpdGVtKSB7XHJcbiAgICAgICAgICAgIGlmICghaXRlbSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAhaXRlbS5pc0RpclVwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGVsZXRlIGl0ZW1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBpdGVtXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IFtldmVudF1cclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBkZWxldGVJdGVtKGl0ZW0pIHtcclxuICAgICAgICAgICAgaWYgKCFjYW5EZWxldGUoaXRlbSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaXRlbS5kZWxldGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKGFuZ3VsYXIsIHdpbmRvdy5jcmlwIHx8ICh3aW5kb3cuY3JpcCA9IHt9KSk7IiwiKGZ1bmN0aW9uIChuZywgY3JpcCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGNyaXAuZmlsZW1hbmFnZXJcclxuICAgICAgICAuc2VydmljZSgnUmVuYW1lU2VydmljZScsIFJlbmFtZVNlcnZpY2UpO1xyXG5cclxuICAgIGZ1bmN0aW9uIFJlbmFtZVNlcnZpY2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY2FuUmVuYW1lOiBjYW5SZW5hbWUsXHJcbiAgICAgICAgICAgIGVuYWJsZVJlbmFtZTogZW5hYmxlUmVuYW1lLFxyXG4gICAgICAgICAgICByZW5hbWU6IHJlbmFtZVxyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDaGVjayBpcyB0aGUgaXRlbSBjYW4gYmUgcmVuYW1lZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufG9iamVjdH0gaXRlbVxyXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXRlbS5pc0RpclVwXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2FuUmVuYW1lKGl0ZW0pIHtcclxuICAgICAgICAgICAgaWYgKCFpdGVtKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuICFpdGVtLmlzRGlyVXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBFbmFibGUgaXRlbSByZW5hbWVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbnxvYmplY3R9IGl0ZW1cclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gaXRlbS5pZGVudGlmaWVyXHJcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBpdGVtLnJlbmFtZVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGVuYWJsZVJlbmFtZShpdGVtKSB7XHJcbiAgICAgICAgICAgIGlmICghY2FuUmVuYW1lKGl0ZW0pKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIChpdGVtLnJlbmFtZSA9IHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVuYW1lIGl0ZW1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbnxvYmplY3R9IGl0ZW1cclxuICAgICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBpdGVtLnVwZGF0ZVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHJlbmFtZShpdGVtKSB7XHJcbiAgICAgICAgICAgIGlmICghY2FuUmVuYW1lKGl0ZW0pKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0udXBkYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufSkoYW5ndWxhciwgd2luZG93LmNyaXApOyIsIihmdW5jdGlvbiAobmcsIGNyaXApIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBjcmlwLmZpbGVtYW5hZ2VyXHJcbiAgICAgICAgLnNlcnZpY2UoJ1NlbGVjdFNlcnZpY2UnLCBTZWxlY3RTZXJ2aWNlKTtcclxuXHJcbiAgICBmdW5jdGlvbiBTZWxlY3RTZXJ2aWNlKCkge1xyXG4gICAgICAgIHZhciBzZWxlY3QgPSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkOiBbXSxcclxuICAgICAgICAgICAgc2VsZWN0OiBzZWxlY3RJdGVtLFxyXG4gICAgICAgICAgICBzZWxlY3RTaW5nbGU6IHNlbGVjdFNpbmdsZUl0ZW0sXHJcbiAgICAgICAgICAgIGRlc2VsZWN0OiBkZXNlbGVjdFNlbGVjdGVkSXRlbXMsXHJcbiAgICAgICAgICAgIGlzU2VsZWN0ZWQ6IGlzU2VsZWN0ZWRJdGVtLFxyXG4gICAgICAgICAgICBpc1NlbGVjdGVkT25lOiBpc1NlbGVjdGVkT25lSXRlbSxcclxuICAgICAgICAgICAgaXNTZWxlY3RlZEFueTogaXNTZWxlY3RlZEFueUl0ZW0sXHJcbiAgICAgICAgICAgIGdldFNlbGVjdGVkSXRlbTogZ2V0U2VsZWN0ZWRJdGVtLFxyXG4gICAgICAgICAgICBnZXRTZWxlY3RlZEl0ZW1zOiBnZXRTZWxlY3RlZEl0ZW1zLFxyXG4gICAgICAgICAgICB1cGRhdGVTZWxlY3RlZDogdXBkYXRlU2VsZWN0ZWRJdGVtc1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBzZWxlY3Q7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERldGVybWluZXMgaXMgYW55IGl0ZW0gc2VsZWN0ZWRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGlzU2VsZWN0ZWRBbnlJdGVtKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gISFzZWxlY3Quc2VsZWN0ZWQubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV0ZXJtaW5lcyBpcyBpdGVtIGluIHNlbGVjdGVkIGl0ZW1zIGNvbGxlY3Rpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBpdGVtXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gaXNTZWxlY3RlZEl0ZW0oaXRlbSkge1xyXG4gICAgICAgICAgICBpZiAoIWlzU2VsZWN0ZWRBbnlJdGVtKCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB2YXIgaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgbmcuZm9yRWFjaChzZWxlY3Quc2VsZWN0ZWQsIGZ1bmN0aW9uIChzZWxlY3RlZF9pdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobmcuZXF1YWxzKGl0ZW0sIHNlbGVjdGVkX2l0ZW0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGlzU2VsZWN0ZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlcm1pbmVzIGlzIHNlbGVjdGVkIG9ubHkgb25lIGl0ZW1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGlzU2VsZWN0ZWRPbmVJdGVtKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0LnNlbGVjdGVkLmxlbmd0aCA9PT0gMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBzaW5nbGUgc2VsZWN0ZWQgaXRlbVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge29iamVjdHxib29sZWFufVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGdldFNlbGVjdGVkSXRlbSgpIHtcclxuICAgICAgICAgICAgaWYgKCFpc1NlbGVjdGVkT25lSXRlbSgpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdC5zZWxlY3RlZFswXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBhbGwgc2VsZWN0ZWQgaXRlbXNcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtBcnJheX1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBnZXRTZWxlY3RlZEl0ZW1zKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0LnNlbGVjdGVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQWRkIGl0ZW0gdG8gY29sbGVjdGlvbiBvZiBzZWxlY3RlZCBpdGVtc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGl0ZW1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBzZWxlY3RJdGVtKGl0ZW0pIHtcclxuICAgICAgICAgICAgc2VsZWN0LnNlbGVjdGVkLnB1c2goaXRlbSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXNlbGVjdCBhbGwgc2VsZWN0ZWQgaXRlbXMgYW5kIHVwZGF0ZSBjaGFuZ2VzIGluIHRoZW1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBkZXNlbGVjdFNlbGVjdGVkSXRlbXMoKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZVNlbGVjdGVkSXRlbXMoKTtcclxuICAgICAgICAgICAgc2VsZWN0LnNlbGVjdGVkLnNwbGljZSgwLCBzZWxlY3Quc2VsZWN0ZWQubGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERlc2VsZWN0IGFsbCBzZWxlY3RlZCBpdGVtcyBhbmQgYWRkIHRoaXMgb25lIGFzIHNlbGVjdGVkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gaXRlbVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHNlbGVjdFNpbmdsZUl0ZW0oaXRlbSkge1xyXG4gICAgICAgICAgICBkZXNlbGVjdFNlbGVjdGVkSXRlbXMoKTtcclxuICAgICAgICAgICAgc2VsZWN0SXRlbShpdGVtKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVwZGF0ZSBjaGFuZ2VzIGluIHNlbGVjdGVkIGl0ZW1zXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlU2VsZWN0ZWRJdGVtcygpIHtcclxuICAgICAgICAgICAgbmcuZm9yRWFjaChnZXRTZWxlY3RlZEl0ZW1zKCksIGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLnVwZGF0ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59KShhbmd1bGFyLCB3aW5kb3cuY3JpcCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
