function removeFromArr(e,r,n){for(var t=e.length-1;t>=0;t--)"undefined"==typeof n?e[t]==r&&e.splice(t,1):e[t][n]==r&&e.splice(t,1)}function isDefined(){var e=arguments;if(0===e.length||"undefined"==typeof e[0])return!1;var r=e[0];for(var n in e)if("0"!==n){if(!r.hasOwnProperty(e[n]))return!1;if(r=r[e[n]],"undefined"==typeof r)return!1}return!0}!function(e,r){"use strict";e.module("script.core",[])}(angular,jQuery),function(e){"use strict";e.module("file.manager",["angular-loading-bar","angularFileUpload","ngCookies","ngResource","ngSanitize","ui.bootstrap","ui-notification","io.dennis.contextmenu"])}(angular),function(){"use strict";angular.module("app",["script.core","file.manager"])}(),function(e,r){"use strict";function n(e){var n=r("#settings");e.fireBroadcast=function(r,n){e.$broadcast(r,n)},e.baseUrl=function(){return n.data("base-url")}}e.module("file.manager").run(n),n.$inject=["$rootScope"]}(angular,jQuery),function(e,r){"use strict";function n(){return function(e,r,n){r.bind("keydown keypress",function(r){13===r.which&&(e.$apply(function(){e.$eval(n.cEnter,{event:r})}),r.preventDefault())})}}e.module("script.core").directive("cEnter",n)}(angular,jQuery),function(e,r){"use strict";function n(e){return function(r,n,t){n.on(t.cFocus,function(){e(t.cFocusSelector)}),r.$on("$destroy",function(){n.off(t.cFocus)})}}e.module("script.core").directive("cFocus",n)}(angular,jQuery),function(e,r){"use strict";function n(e,n){return function(e){n(function(){var n=r(e);1===n.length&&n.focus()})}}e.module("script.core").factory("focus",n),n.$inject=["$log","$timeout"]}(angular,jQuery),function(e,r){"use strict";function n(r){var n={support:!(!r.FileReader||!r.CanvasRenderingContext2D),isFile:function(n){return e.isObject(n)&&n instanceof r.File},isImage:function(e){var r="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(r)}};return{restrict:"A",template:"<canvas/>",link:function(e,r,t){function o(e){var r=new Image;r.onload=i,r.src=e.target.result}function i(){var e=a.width||this.width/this.height*a.height,r=a.height||this.height/this.width*a.width;l.attr({width:e,height:r}),l[0].getContext("2d").drawImage(this,0,0,e,r)}if(n.support){var a=e.$eval(t.cThumb);if(!n.isFile(a.file)||!n.isImage(a.file))return void r.hide();var l=r.find("canvas"),d=new FileReader;d.onload=o,d.readAsDataURL(a.file)}}}}e.module("script.core").directive("cThumb",n),n.$inject=["$window"]}(angular,jQuery),function(e,r){"use strict";function n(r,n,t,o,i,a){function l(){n.isDir=d,n.isDirUp=c,n._error=u,n._warning=f,n._success=m,n.manager={path:"/"},a.query(g)}function d(r){return r&&e.isDefined(r.type)&&"dir"===r.type}function c(e){return d(e)&&".."==e.name}function s(n){var t=!1;return e.isDefined(n.notification)&&(t=n.notification),e.isDefined(n.data)&&e.isDefined(n.data.notification)&&(t=n.data.notification),t?{hasMessage:!0,message:t}:(r.error("Cant get user friendly message from response",{response:n}),{hasMessage:!1})}function u(e){n.fireBroadcast("_error");var r=s(e);r.hasMessage&&o.error({message:r.message})}function f(e){n.fireBroadcast("_warning");var r=s(e);r.hasMessage&&o.error({message:r.message})}function m(e){var r=s(e);r.hasMessage&&o.success({message:r.message})}function g(e){r.log("BaseController -> onInitialDirLoaded",{response:e}),i.extend(e),n.fireBroadcast("tree-changed",e.dirs()),n.fireBroadcast("folder-changed",e.items()),r.log("FolderCache",{path:t.get("path")}),"/"!==t.get("path")&&"undefined"!=typeof t.get("path")&&n.fireBroadcast("change-folder",{path:t.get("path")})}r.log("BaseController controller <- started"),l()}e.module("file.manager").controller("BaseController",n),n.$inject=["$log","$scope","$cookies","Notification","DirService","Dir"]}(angular,jQuery),function(e,r){"use strict";function n(r,n,t,o,i,a,l){function d(){n.folder={loading:!0,creating:!1,name:"",items:[],filters:{image:!0,media:!0,document:!0,file:!0},order:{func:h,change:v,by:"name",reverse:!1,name:!0,size:!1,date:!1},enableCreate:w,create:C,refresh:F,isFiltersEnabled:y},n.folderFilter=p}function c(){return n.folder.loading?(r.warn("FolderController -> loading","Previous item still loading"),!1):!0}function s(e){n.folder.loading=!1}function u(e,t){c()&&(r.log("FolderController -> changeFolder",{event:e,folder:t}),n.folder.loading=!0,i.query({path:t.path||"/"},function(e){n._success(e),$(e,t)},n._error))}function f(e,t){r.log("FolderController -> onFolderExternallyChanged",{event:e,items:t}),n.folder.loading=!1,n.folder.items=t}function m(e,t){r.log("FolderController -> addNewFile",{event:e,file:t}),a.extendItem(t,n.folder.items.length),n.folder.items.unshift(t)}function g(e,t){r.log("FolderController -> removeByPath",{event:e,item:t,items:n.folder.items}),removeFromArr(n.folder.items,t.path,"path")}function p(r,t,o){if(e.isDefined(r.type)){if("dir"==r.type)return!0;if(y())return n.folder.filters[r.type];if(l.getType()==r.type)return!0}return!1}function h(e){return"dir"===e.type?".."==e.name?-1:"0 "+e[n.folder.order.by]:"z"+e[n.folder.order.by]}function v(e){n.folder.order.by=e;var r=["name","size","date"];for(var t in r)r.hasOwnProperty(t)&&(n.folder.order[r[t]]=!1);return n.folder.order[e]=!0,!1}function y(){return"file"==l.getType()}function F(){c()&&(r.log("FolderController -> refresh",{manager:n.manager}),n.folder.loading=!0,n.manager.path=n.manager.path.replace(/^\/|\/$/g,""),i.query({path:n.manager.path||"/"},function(e){$(e,n.manager)},n._error))}function $(e,o){r.log("FolderController -> changeFolder -> onFolderChanged",{response:e,folder:o}),a.extend(e),n.folder.items=e.items(),n.folder.loading=!1,n.manager.path="/"+(o.path||""),t.put("path",o.path||"")}function w(){n.folder.creating=!0,o("#create-dir-input")}function C(){c()&&n.folder.name&&""!==n.folder.name&&a.create(n.manager.path,n.folder.name,b,n._error)}function b(e){r.log("FolderController -> create -> onFolderCreated",{response:e}),n._success(e),n.folder.creating=!1,n.folder.name="";var t=e.data;a.extendItem(t,n.folder.items.length),n.folder.items.unshift(t),n.fireBroadcast("folder-created",t)}r.log("FolderController controller <- started"),d(),n.$on("_error",s),n.$on("_warning",s),n.$on("change-folder",u),n.$on("folder-changed",f),n.$on("file-uploaded",m),n.$on("folder-deleted",g),n.$on("file-deleted",g)}e.module("file.manager").controller("FolderController",n),n.$inject=["$log","$scope","$cookies","focus","Dir","DirService","Settings"]}(angular,jQuery),function(e,r,n,t,o){"use strict";function i(r,i,a,l,d,c){function s(){i.click=u,i.canRename=f,i.enableRename=m,i.disableRename=h,i.rename=g,i.select=F,i.hasThumbs=b,i.thumbName=D,i["delete"]=$}function u(e){return i.folder.loading?void r.warn("FolderItemController -> click","Previous item still loading"):(r.log("FolderItemController -> click",{item:e}),i.isDir(e)?void i.fireBroadcast("change-folder",e):void F(e))}function f(e){return!i.isDirUp(e)}function m(e){if(e.rename=!0,i.isDir(e))e.newName=e.name;else{e.ext=e.name.split(".").pop();var r=0;e.ext.length&&(r=e.ext.length+1),e.newName=e.name.substring(0,e.name.length-r)}a("#"+e.id+" input")}function g(){return i.isDir(i.item)?void(".."!=i.item.name&&l.rename(i.manager.path,i.item.name,i.item.newName,v,i._error)):void d.rename(i.manager.path,i.item.name,p(i.item),y,i._error)}function p(r){return e.isDefined(r.ext)&&r.ext.length?r.newName+"."+r.ext:r.newName}function h(e){e.rename=!1}function v(n){r.log("FolderItemController -> onFolderRenamed",{response:n,item:i.item}),i._success(n);var t=e.copy(i.item);i.item.rename=!1,i.item.path=n.data.path,i.item.name=n.data.name,i.item.url=n.data.url,i.fireBroadcast("folder-renamed",{"new":n.data,old:t})}function y(e){r.log("FolderItemController -> onFileRenamed",{response:e}),i._success(e),i.item.rename=!1,i.item.name=e.data.name,i.item.url=e.data.url,i.item.thumbs=e.data.thumbs}function F(e,o){var i=e.url;if(o&&(i=e.thumbs[o]),c.isTarget("tinyMCE"))if(r.info("FolderItemController -> select -> tinymce",{tinymce:n.tinymce}),n.tinymce.majorVersion<4){n.tinymce.activeEditor.windowManager.params.setUrl(i);var a=n.tinymce.activeEditor.windowManager.params.mce_window_id;n.tinymce.activeEditor.windowManager.close(a)}else r.info("FolderItemController -> select -> tinymce4",{params:n.tinymce.activeEditor.windowManager.getParams()}),n.tinymce.activeEditor.windowManager.getParams().setUrl(i),n.tinymce.activeEditor.windowManager.close();if(c.isTarget("callback")){var l=t.filemanager||t.parent.filemanager||{};l&&l.onSelected&&l.onSelected(i,c.getParams())}}function $(e){return i.isDir(e)?void(".."!=e.name&&l["delete"](i.manager.path,e.name,w,i._error)):void d["delete"](i.manager.path,e.name,C,i._error)}function w(e){r.log("FolderItemController -> onFolderDeleted",{response:e}),i._success(e),i.fireBroadcast("folder-deleted",e.data)}function C(e){r.log("FolderItemController -> onFileDeleted",{response:e}),i._success(e),i.fireBroadcast("file-deleted",e.data)}function b(r){return!!r&&e.isDefined(r.thumbs)&&o.keys(r.thumbs).length>1}function D(e,r,n){if(e){var t=c.getThumbSize(e);r=t[0],n=t[1]}var o="({width} x {height})",i={width:r,height:n};return o.supplant(i)}r.log("FolderItemController controller <- started"),s()}e.module("file.manager").controller("FolderItemController",i),i.$inject=["$log","$scope","focus","DirService","FileService","Settings"]}(angular,jQuery,top,window,Object),function(e,r){"use strict";function n(r,n,t,o){function i(){n.isOpen=u,n.isEmpty=f,n.changeFolder=g,n.tree={loading:!0,items:[],root:{name:"/",url:n.baseUrl+"dir"},expand:m}}function a(e){n.tree.loading=!1}function l(e,t){r.log("TreeController -> treeChanged",{event:e,tree:t}),n.tree.items=t,n.tree.loading=!1}function d(e,t){r.log("TreeController -> onFolderCreated",{event:e,folder:t}),-1===t.path.indexOf("/")&&n.tree.items.unshift(t)}function c(e,t){var o=t.old,i=t["new"];r.log("TreeController -> onFolderRenamed",{event:e,newFolder:i,oldFolder:o});for(var a=0;a<n.tree.items.length;a++)n.tree.items[a].path==o.path&&(n.tree.items[a].path=i.path,n.tree.items[a].name=i.name,n.tree.items[a].url=i.url)}function s(e,t){r.log("TreeController -> removeByPath",{event:e,item:t,items:n.tree.items}),removeFromArr(n.tree.items,t.path,"path")}function u(r){return r&&e.isDefined(r.folders)}function f(e){return u(e)?0==e.folders.length:!1}function m(e){return n.tree.loading||f(e)?void r.warn("TreeController -> expand","Previous item still loading"):(r.log("TreeController -> expand",{curr:e}),u(e)?void(e.folders=void 0):(n.tree.loading=!0,void t.query({path:e.path},function(r){o.extend(r),n.tree.loading=!1,e.folders=r.dirs()},n._error)))}function g(e){n.fireBroadcast("change-folder",e)}r.log("TreeController controller <- started"),i(),n.$on("_error",a),n.$on("_warning",a),n.$on("tree-changed",l),n.$on("folder-created",d),n.$on("folder-renamed",c),n.$on("folder-deleted",s)}e.module("file.manager").controller("TreeController",n),n.$inject=["$log","$scope","Dir","DirService"]}(angular,jQuery),function(e,r){"use strict";function n(r,n,t){function o(){n.uploader=new t({url:i})}function i(){return n.baseUrl()+"file/upload"+n.manager.path}r.log("UploadController controller <- started"),o(),n.uploader.onWhenAddingFileFailed=function(e,n,t){r.info("onWhenAddingFileFailed",e,n,t)},n.uploader.onAfterAddingFile=function(e){e.uploader.url=e.url=i(),r.info("onAfterAddingFile",e)},n.uploader.onErrorItem=function(e,n,t,o){r.info("onErrorItem",e,t,o)},n.uploader.onCompleteItem=function(e,t,o,i){200===o&&(r.info("UploadController -> uploader -> onCompleteItem",{fileItem:e,response:t,status:o,headers:i}),n.fireBroadcast("file-uploaded",t),n._success(t))},n.uploader.onCompleteAll=function(){r.info("UploadController -> uploader -> onCompleteAll",{uploader:n.uploader});var t=!1;e.forEach(n.uploader.queue,function(e){e.isReady||e.isUploading||e.isSuccess||(t=!0)}),t||n.uploader.clearQueue()}}e.module("file.manager").controller("UploadController",n),n.$inject=["$log","$scope","FileUploader"]}(angular,jQuery),function(e,r){"use strict";function n(e,r,n){return e.log("Dir resource <- started"),r(n.baseUrl()+"dir/:path",{path:"@path"})}e.module("file.manager").service("Dir",n),n.$inject=["$log","$resource","$rootScope"]}(angular,jQuery),function(e,r){"use strict";function n(r,n,t){function o(r){e.isDefined(r.DirServiceExtended)&&r.DirServiceExtended||(e.extend(r,{dirs:function(){var n=[];return e.forEach(r,function(e,r){"dir"==e.type&&".."!=e.name&&(c(e,r),this.push(e))},n),n},items:function(){var n=[];return e.forEach(r,function(e,r){c(e,r),this.push(e)},n),n}}),r.DirServiceExtended=!0)}function i(e,r,o,i,a){var l=n.baseUrl()+"dir/rename/"+e;t.post(l,{old:r,"new":o}).then(i,a)}function a(e,r,o,i){var a=n.baseUrl()+"dir/create/"+e;t.post(a,{name:r}).then(o,i)}function l(e,r,o,i){var a=n.baseUrl()+"dir/delete/"+e;t.post(a,{name:r}).then(o,i)}function d(e){return"list-item-"+e}function c(e,r){e.id=d(r)}return r.log("DirService service <- started"),{extend:o,extendItem:c,rename:i,create:a,"delete":l,idGen:d}}e.module("file.manager").service("DirService",n),n.$inject=["$log","$rootScope","$http"]}(angular,jQuery),function(e,r){"use strict";function n(e,r,n){function t(t,o,i,a,l){e.log("FileService -> rename",{path:t,oldName:o,newName:i});var d=r.baseUrl()+"file/rename/"+t;n.post(d,{old:o,"new":i}).then(a,l)}function o(t,o,i,a){e.log("FileService -> delete",{path:t,name:o});var l=r.baseUrl()+"file/delete/"+t;n.post(l,{name:o}).then(i,a)}return e.log("FileService service <- started"),{rename:t,"delete":o}}e.module("file.manager").service("FileService",n),n.$inject=["$log","$rootScope","$http"]}(angular,jQuery),function(e,r){"use strict";function n(){function n(e){return a().target.toLowerCase()===e.toLowerCase()}function t(){return(a().type?d.type.toLowerCase():!1)||"file"}function i(r){var n=e.fromJson(l.data("sizes").replace(/\'/g,'"'));return n[r]}function a(){if(!d){var e=l.data("params");if(0===e.length)return{};d=o(e)}return d}var l=r("#settings"),d=!1;return{isTarget:n,getType:t,getThumbSize:i,getParams:a}}function t(e){return e.replace(/\'/g,'"')}function o(r){return e.fromJson(t(r))}e.module("file.manager").service("Settings",n),n.$inject=[]}(angular,jQuery);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9zb3VyY2UvY29yZS9oZWxwZXJzL2FycmF5LmpzIiwiL3NvdXJjZS9jb3JlL21vZHVsZS5qcyIsIi9zb3VyY2UvZmlsZW1hbmFnZXIvbW9kdWxlLmpzIiwiL3NvdXJjZS9hcHAuanMiLCIvc291cmNlL2ZpbGVtYW5hZ2VyL3J1bi5qcyIsIi9zb3VyY2UvY29yZS9lbnRlci9kaXJlY3RpdmUuanMiLCIvc291cmNlL2NvcmUvZm9jdXMvZGlyZWN0aXZlLmpzIiwiL3NvdXJjZS9jb3JlL2ZvY3VzL2ZhY3RvcnkuanMiLCIvc291cmNlL2NvcmUvdGh1bWIvZGlyZWN0aXZlLmpzIiwiL3NvdXJjZS9maWxlbWFuYWdlci9jb250cm9sbGVycy9CYXNlQ29udHJvbGxlci5qcyIsIi9zb3VyY2UvZmlsZW1hbmFnZXIvY29udHJvbGxlcnMvRm9sZGVyQ29udHJvbGxlci5qcyIsIi9zb3VyY2UvZmlsZW1hbmFnZXIvY29udHJvbGxlcnMvRm9sZGVySXRlbUNvbnRyb2xsZXIuanMiLCIvc291cmNlL2ZpbGVtYW5hZ2VyL2NvbnRyb2xsZXJzL1RyZWVDb250cm9sbGVyLmpzIiwiL3NvdXJjZS9maWxlbWFuYWdlci9jb250cm9sbGVycy9VcGxvYWRDb250cm9sbGVyLmpzIiwiL3NvdXJjZS9maWxlbWFuYWdlci9yZXNvdXJjZXMvRGlyLmpzIiwiL3NvdXJjZS9maWxlbWFuYWdlci9zZXJ2aWNlcy9EaXJTZXJ2aWNlLmpzIiwiL3NvdXJjZS9maWxlbWFuYWdlci9zZXJ2aWNlcy9GaWxlU2VydmljZS5qcyIsIi9zb3VyY2UvZmlsZW1hbmFnZXIvc2VydmljZXMvU2V0dGluZ3MuanMiXSwibmFtZXMiOlsicmVtb3ZlRnJvbUFyciIsImFyciIsInZhbCIsImtleSIsImkiLCJsZW5ndGgiLCJzcGxpY2UiLCJpc0RlZmluZWQiLCJhIiwiYXJndW1lbnRzIiwidGFyZ2V0IiwiYXJnIiwiaGFzT3duUHJvcGVydHkiLCJhbmd1bGFyIiwiJCIsIm1vZHVsZSIsImpRdWVyeSIsIm5nIiwiUnVuIiwiJHJvb3RTY29wZSIsIiRzZXR0aW5ncyIsImZpcmVCcm9hZGNhc3QiLCJldmVudE5hbWUiLCJhcmdzIiwiJGJyb2FkY2FzdCIsImJhc2VVcmwiLCJkYXRhIiwicnVuIiwiJGluamVjdCIsImNFbnRlciIsInNjb3BlIiwiZWxlbSIsImF0dHIiLCJiaW5kIiwiZXZlbnQiLCJ3aGljaCIsIiRhcHBseSIsIiRldmFsIiwicHJldmVudERlZmF1bHQiLCJkaXJlY3RpdmUiLCJjRm9jdXMiLCJmb2N1cyIsIm9uIiwiY0ZvY3VzU2VsZWN0b3IiLCIkb24iLCJvZmYiLCIkbG9nIiwiJHRpbWVvdXQiLCJzZWxlY3RvciIsIiRlbGVtZW50IiwiZmFjdG9yeSIsImNUaHVtYiIsIiR3aW5kb3ciLCJoZWxwZXIiLCJzdXBwb3J0IiwiRmlsZVJlYWRlciIsIkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCIsImlzRmlsZSIsIml0ZW0iLCJpc09iamVjdCIsIkZpbGUiLCJpc0ltYWdlIiwiZmlsZSIsInR5cGUiLCJzbGljZSIsImxhc3RJbmRleE9mIiwiaW5kZXhPZiIsInJlc3RyaWN0IiwidGVtcGxhdGUiLCJsaW5rIiwiZWxlbWVudCIsImF0dHJpYnV0ZXMiLCJvbkxvYWRGaWxlIiwiaW1nIiwiSW1hZ2UiLCJvbmxvYWQiLCJvbkxvYWRJbWFnZSIsInNyYyIsInJlc3VsdCIsIndpZHRoIiwicGFyYW1zIiwidGhpcyIsImhlaWdodCIsImNhbnZhcyIsImdldENvbnRleHQiLCJkcmF3SW1hZ2UiLCJoaWRlIiwiZmluZCIsInJlYWRlciIsInJlYWRBc0RhdGFVUkwiLCJCYXNlQ29udHJvbGxlciIsIiRzY29wZSIsIiRjb29raWVzIiwiTm90aWZpY2F0aW9uIiwiRGlyU2VydmljZSIsIkRpciIsImFjdGl2YXRlIiwiaXNEaXIiLCJpc0RpclVwIiwiX2Vycm9yIiwiX3dhcm5pbmciLCJfc3VjY2VzcyIsIm1hbmFnZXIiLCJwYXRoIiwicXVlcnkiLCJvbkluaXRpYWxEaXJMb2FkZWQiLCJuYW1lIiwiX19yZXNvbHZlTWVzc2FnZSIsInJlc3BvbnNlIiwibm90aWZpY2F0aW9uIiwiaGFzTWVzc2FnZSIsIm1lc3NhZ2UiLCJlcnJvciIsImhhbmRsZXIiLCJzdWNjZXNzIiwibG9nIiwiZXh0ZW5kIiwiZGlycyIsIml0ZW1zIiwiZ2V0IiwiY29udHJvbGxlciIsIkZvbGRlckNvbnRyb2xsZXIiLCJTZXR0aW5ncyIsImZvbGRlciIsImxvYWRpbmciLCJjcmVhdGluZyIsImZpbHRlcnMiLCJpbWFnZSIsIm1lZGlhIiwiZG9jdW1lbnQiLCJvcmRlciIsImZ1bmMiLCJjaGFuZ2UiLCJjaGFuZ2VPcmRlciIsImJ5IiwicmV2ZXJzZSIsInNpemUiLCJkYXRlIiwiZW5hYmxlQ3JlYXRlIiwiY3JlYXRlIiwicmVmcmVzaCIsImlzRmlsdGVyc0VuYWJsZWQiLCJmb2xkZXJGaWx0ZXIiLCJfX2NhbkxvYWQiLCJ3YXJuIiwib25FcnJvckhhbmRsZWQiLCJjaGFuZ2VGb2xkZXIiLCJyIiwib25Gb2xkZXJDaGFuZ2VkIiwib25Gb2xkZXJFeHRlcm5hbGx5Q2hhbmdlZCIsImFkZE5ld0ZpbGUiLCJleHRlbmRJdGVtIiwidW5zaGlmdCIsInJlbW92ZUJ5UGF0aCIsInZhbHVlIiwiaW5kZXgiLCJhcnJheSIsImdldFR5cGUiLCJuZXdOYW1lIiwib3B0aW9ucyIsInJlcGxhY2UiLCJwdXQiLCJvbkZvbGRlckNyZWF0ZWQiLCJ0b3AiLCJ3IiwiTyIsIkZvbGRlckl0ZW1Db250cm9sbGVyIiwiRmlsZVNlcnZpY2UiLCJjbGljayIsImNhblJlbmFtZSIsImVuYWJsZVJlbmFtZSIsImRpc2FibGVSZW5hbWUiLCJyZW5hbWUiLCJzZWxlY3QiLCJoYXNUaHVtYnMiLCJ0aHVtYk5hbWUiLCJkZWxldGVJdGVtIiwiZXh0Iiwic3BsaXQiLCJwb3AiLCJjdXQiLCJzdWJzdHJpbmciLCJpZCIsIm9uRm9sZGVyUmVuYW1lZCIsImdldEl0ZW1OZXdOYW1lIiwib25GaWxlUmVuYW1lZCIsImNvcHkiLCJ1cmwiLCJuZXciLCJvbGQiLCJ0aHVtYnMiLCJ0aHVtYkluZGV4IiwiZmlsZV91cmwiLCJpc1RhcmdldCIsImluZm8iLCJ0aW55bWNlIiwibWFqb3JWZXJzaW9uIiwiYWN0aXZlRWRpdG9yIiwid2luZG93TWFuYWdlciIsInNldFVybCIsImVkaXRvcl9pZCIsIm1jZV93aW5kb3dfaWQiLCJjbG9zZSIsImdldFBhcmFtcyIsImZpbGVtYW5hZ2VyIiwicGFyZW50Iiwib25TZWxlY3RlZCIsIm9uRm9sZGVyRGVsZXRlZCIsIm9uRmlsZURlbGV0ZWQiLCJrZXlzIiwiZ2V0VGh1bWJTaXplIiwic3VwcGxhbnQiLCJ3aW5kb3ciLCJPYmplY3QiLCJUcmVlQ29udHJvbGxlciIsImlzT3BlbiIsImlzRW1wdHkiLCJ0cmVlIiwicm9vdCIsImV4cGFuZCIsInRyZWVDaGFuZ2VkIiwiZm9sZGVycyIsIm9sZEZvbGRlciIsIm5ld0ZvbGRlciIsImN1cnJGb2xkZXIiLCJjdXJyIiwidW5kZWZpbmVkIiwiVXBsb2FkQ29udHJvbGxlciIsIkZpbGVVcGxvYWRlciIsInVwbG9hZGVyIiwiX2dldFVwbG9hZFBhdGgiLCJvbldoZW5BZGRpbmdGaWxlRmFpbGVkIiwiZmlsdGVyIiwib25BZnRlckFkZGluZ0ZpbGUiLCJmaWxlSXRlbSIsIm9uRXJyb3JJdGVtIiwic3RhdHVzIiwiaGVhZGVycyIsIm9uQ29tcGxldGVJdGVtIiwib25Db21wbGV0ZUFsbCIsImhhc05vdFVwbG9hZGVkRmlsZXMiLCJmb3JFYWNoIiwicXVldWUiLCJpc1JlYWR5IiwiaXNVcGxvYWRpbmciLCJpc1N1Y2Nlc3MiLCJjbGVhclF1ZXVlIiwiJHJlc291cmNlIiwic2VydmljZSIsIiRodHRwIiwiRGlyU2VydmljZUV4dGVuZGVkIiwicHVzaCIsIm9sZE5hbWUiLCJvblN1Y2Nlc3MiLCJvbkVycm9yIiwicG9zdCIsInRoZW4iLCJkZWxldGVEaXIiLCJpZEdlbiIsImRlbGV0ZSIsImRlbGV0ZUZpbGUiLCJjdXJyX3RhcmdldCIsInRvTG93ZXJDYXNlIiwic2l6ZUtleSIsInNpemVzIiwiZnJvbUpzb24iLCJkYXRhUGFyYW1z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b0UsR0FDQSxNQUFBMUQsS0FBQWpNLE9BQUE0UCxnQkFBQUQsRUFBQUMsY0FHQSxRQUFBekcsS0FDQSxPQUFBOEMsSUFBQTVJLEtBQUFpQixFQUFBakIsS0FBQXVNLGVBQUEsSUFBQSxPQUdBLFFBQUFwRCxHQUFBcUQsR0FDQSxHQUFBQyxHQUFBdlAsRUFBQXdQLFNBQUFyUCxFQUFBTSxLQUFBLFNBQUFzSSxRQUFBLE1BQUEsS0FFQSxPQUFBd0csR0FBQUQsR0FHQSxRQUFBNUQsS0FDQSxJQUFBM0gsRUFBQSxDQUNBLEdBQUEwTCxHQUFBdFAsRUFBQU0sS0FBQSxTQUVBLElBQUEsSUFBQWdQLEVBQUFyUSxPQUNBLFFBRUEyRSxHQUFBMkwsRUFBQUQsR0FFQSxNQUFBMUwsR0FoQ0EsR0FBQTVELEdBQUFOLEVBQUEsYUFBQWtFLEdBQUEsQ0FFQSxRQUNBaUgsU0FBQUEsRUFDQXBDLFFBQUFBLEVBQ0FxRCxhQUFBQSxFQUNBUCxVQUFBQSxHQThCQSxRQUFBaUUsR0FBQUMsR0FDQSxNQUFBQSxHQUFBN0csUUFBQSxNQUFBLEtBR0EsUUFBQTJHLEdBQUFFLEdBQ0EsTUFBQTVQLEdBQUF3UCxTQUFBRyxFQUFBQyxJQWhEQTVQLEVBQ0FGLE9BQUEsZ0JBQ0F5TyxRQUFBLFdBQUE5SCxHQUVBQSxFQUFBOUYsWUE4Q0FmLFFBQUFHIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpZiAoIXJlbW92ZUZyb21BcnIpIHtcclxuICAgIGZ1bmN0aW9uIHJlbW92ZUZyb21BcnIoYXJyLCB2YWwsIGtleSkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSBhcnIubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBrZXkgPT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhcnJbaV0gPT0gdmFsKVxyXG4gICAgICAgICAgICAgICAgICAgIGFyci5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoYXJyW2ldW2tleV0gPT0gdmFsKVxyXG4gICAgICAgICAgICAgICAgYXJyLnNwbGljZShpLCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmlmICghaXNEZWZpbmVkKSB7XHJcbiAgICBmdW5jdGlvbiBpc0RlZmluZWQoKSB7XHJcbiAgICAgICAgdmFyIGEgPSBhcmd1bWVudHM7XHJcblxyXG4gICAgICAgIGlmIChhLmxlbmd0aCA9PT0gMCB8fCB0eXBlb2YgYVswXSA9PT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgdmFyIHRhcmdldCA9IGFbMF07XHJcbiAgICAgICAgZm9yICh2YXIgYXJnIGluIGEpIHtcclxuICAgICAgICAgICAgaWYgKGFyZyA9PT0gJzAnKVxyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRhcmdldC5oYXNPd25Qcm9wZXJ0eShhW2FyZ10pKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0W2FbYXJnXV07XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGFyZ2V0ID09PSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59XHJcbiIsIihmdW5jdGlvbiAoYW5ndWxhciwgJCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdzY3JpcHQuY29yZScsIFtdKTtcclxufSkoYW5ndWxhciwgalF1ZXJ5KTsiLCIoZnVuY3Rpb24obmcpe1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIG5nLm1vZHVsZSgnZmlsZS5tYW5hZ2VyJywgW1xuICAgICAgICAnYW5ndWxhci1sb2FkaW5nLWJhcicsXG4gICAgICAgICdhbmd1bGFyRmlsZVVwbG9hZCcsXG4gICAgICAgICduZ0Nvb2tpZXMnLFxuICAgICAgICAnbmdSZXNvdXJjZScsXG4gICAgICAgICduZ1Nhbml0aXplJyxcbiAgICAgICAgJ3VpLmJvb3RzdHJhcCcsXG4gICAgICAgICd1aS1ub3RpZmljYXRpb24nLFxuICAgICAgICAnaW8uZGVubmlzLmNvbnRleHRtZW51J1xuICAgIF0pO1xuXG59KShhbmd1bGFyKTsiLCIvLyBoZWxsbyBmcm9tIGpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFtcclxuICAgICAgICAnc2NyaXB0LmNvcmUnLFxyXG4gICAgICAgICdmaWxlLm1hbmFnZXInXHJcbiAgICBdKTtcclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uIChhbmd1bGFyLCAkKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2ZpbGUubWFuYWdlcicpXHJcbiAgICAgICAgLnJ1bihSdW4pO1xyXG4gICAgUnVuLiRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRyb290U2NvcGUnXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIFJ1bigkcm9vdFNjb3BlKSB7XHJcbiAgICAgICAgdmFyICRzZXR0aW5ncyA9ICQoJyNzZXR0aW5ncycpO1xyXG5cclxuICAgICAgICAkcm9vdFNjb3BlLmZpcmVCcm9hZGNhc3QgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBhcmdzKSB7XHJcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdChldmVudE5hbWUsIGFyZ3MpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRyb290U2NvcGUuYmFzZVVybCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRzZXR0aW5ncy5kYXRhKCdiYXNlLXVybCcpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn0pKGFuZ3VsYXIsIGpRdWVyeSk7IiwiKGZ1bmN0aW9uIChhbmd1bGFyLCAkKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ3NjcmlwdC5jb3JlJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdjRW50ZXInLCBjRW50ZXIpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNFbnRlcigpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCBlbGVtLCBhdHRyKSB7XHJcbiAgICAgICAgICAgIGVsZW0uYmluZChcImtleWRvd24ga2V5cHJlc3NcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGV2YWwoYXR0ci5jRW50ZXIsIHsnZXZlbnQnOiBldmVudH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59KShhbmd1bGFyLCBqUXVlcnkpOyIsIihmdW5jdGlvbiAoYW5ndWxhciwgJCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdzY3JpcHQuY29yZScpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnY0ZvY3VzJywgY0ZvY3VzKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjRm9jdXMoZm9jdXMpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCBlbGVtLCBhdHRyKSB7XHJcbiAgICAgICAgICAgIGVsZW0ub24oYXR0ci5jRm9jdXMsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGZvY3VzKGF0dHIuY0ZvY3VzU2VsZWN0b3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZXMgYm91bmQgZXZlbnRzIGluIHRoZSBlbGVtZW50IGl0c2VsZlxyXG4gICAgICAgICAgICAvLyB3aGVuIHRoZSBzY29wZSBpcyBkZXN0cm95ZWRcclxuICAgICAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGVsZW0ub2ZmKGF0dHIuY0ZvY3VzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KShhbmd1bGFyLCBqUXVlcnkpOyIsIihmdW5jdGlvbiAoYW5ndWxhciwgJCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdzY3JpcHQuY29yZScpXHJcbiAgICAgICAgLmZhY3RvcnkoJ2ZvY3VzJywgZm9jdXMpO1xyXG5cclxuICAgIGZvY3VzLiRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRsb2cnLCAnJHRpbWVvdXQnXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIGZvY3VzKCRsb2csICR0aW1lb3V0KSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNlbGVjdG9yKSB7XHJcbiAgICAgICAgICAgIC8vIHRpbWVvdXQgbWFrZXMgc3VyZSB0aGF0IGl0IGlzIGludm9rZWQgYWZ0ZXIgYW55IG90aGVyIGV2ZW50IGhhcyBiZWVuIHRyaWdnZXJlZC5cclxuICAgICAgICAgICAgLy8gZS5nLiBjbGljayBldmVudHMgdGhhdCBuZWVkIHRvIHJ1biBiZWZvcmUgdGhlIGZvY3VzIG9yXHJcbiAgICAgICAgICAgIC8vIGlucHV0cyBlbGVtZW50cyB0aGF0IGFyZSBpbiBhIGRpc2FibGVkIHN0YXRlIGJ1dCBhcmUgZW5hYmxlZCB3aGVuIHRob3NlIGV2ZW50c1xyXG4gICAgICAgICAgICAvLyBhcmUgdHJpZ2dlcmVkLlxyXG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciAkZWxlbWVudCA9ICQoc2VsZWN0b3IpO1xyXG4gICAgICAgICAgICAgICAgaWYoJGVsZW1lbnQubGVuZ3RoID09PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgICRlbGVtZW50LmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn0pKGFuZ3VsYXIsIGpRdWVyeSk7IiwiKGZ1bmN0aW9uIChhbmd1bGFyLCAkKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ3NjcmlwdC5jb3JlJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdjVGh1bWInLCBjVGh1bWIpO1xyXG5cclxuICAgIGNUaHVtYi4kaW5qZWN0ID0gW1xyXG4gICAgICAgICckd2luZG93J1xyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBjVGh1bWIoJHdpbmRvdykge1xyXG4gICAgICAgIHZhciBoZWxwZXIgPSB7XHJcbiAgICAgICAgICAgIHN1cHBvcnQ6ICEhKCR3aW5kb3cuRmlsZVJlYWRlciAmJiAkd2luZG93LkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCksXHJcbiAgICAgICAgICAgIGlzRmlsZTogZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhbmd1bGFyLmlzT2JqZWN0KGl0ZW0pICYmIGl0ZW0gaW5zdGFuY2VvZiAkd2luZG93LkZpbGU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGlzSW1hZ2U6IGZ1bmN0aW9uIChmaWxlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9ICd8JyArIGZpbGUudHlwZS5zbGljZShmaWxlLnR5cGUubGFzdEluZGV4T2YoJy8nKSArIDEpICsgJ3wnO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICd8anBnfHBuZ3xqcGVnfGJtcHxnaWZ8Jy5pbmRleE9mKHR5cGUpICE9PSAtMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPGNhbnZhcy8+JyxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhlbHBlci5zdXBwb3J0KSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHNjb3BlLiRldmFsKGF0dHJpYnV0ZXMuY1RodW1iKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWhlbHBlci5pc0ZpbGUocGFyYW1zLmZpbGUpIHx8ICFoZWxwZXIuaXNJbWFnZShwYXJhbXMuZmlsZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGVsZW1lbnQuZmluZCgnY2FudmFzJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gb25Mb2FkRmlsZTtcclxuICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKHBhcmFtcy5maWxlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBvbkxvYWRGaWxlKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGltZy5vbmxvYWQgPSBvbkxvYWRJbWFnZTtcclxuICAgICAgICAgICAgICAgICAgICBpbWcuc3JjID0gZXZlbnQudGFyZ2V0LnJlc3VsdDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBvbkxvYWRJbWFnZSgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSBwYXJhbXMud2lkdGggfHwgdGhpcy53aWR0aCAvIHRoaXMuaGVpZ2h0ICogcGFyYW1zLmhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gcGFyYW1zLmhlaWdodCB8fCB0aGlzLmhlaWdodCAvIHRoaXMud2lkdGggKiBwYXJhbXMud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzLmF0dHIoe3dpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHR9KTtcclxuICAgICAgICAgICAgICAgICAgICBjYW52YXNbMF0uZ2V0Q29udGV4dCgnMmQnKS5kcmF3SW1hZ2UodGhpcywgMCwgMCwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59KShhbmd1bGFyLCBqUXVlcnkpOyIsIihmdW5jdGlvbiAoYW5ndWxhciwgJCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdmaWxlLm1hbmFnZXInKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdCYXNlQ29udHJvbGxlcicsIEJhc2VDb250cm9sbGVyKTtcclxuXHJcbiAgICBCYXNlQ29udHJvbGxlci4kaW5qZWN0ID0gW1xyXG4gICAgICAgICckbG9nJywgJyRzY29wZScsICckY29va2llcycsICdOb3RpZmljYXRpb24nLCAnRGlyU2VydmljZScsICdEaXInXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIEJhc2VDb250cm9sbGVyKCRsb2csICRzY29wZSwgJGNvb2tpZXMsIE5vdGlmaWNhdGlvbiwgRGlyU2VydmljZSwgRGlyKSB7XHJcbiAgICAgICAgJGxvZy5sb2coJ0Jhc2VDb250cm9sbGVyIGNvbnRyb2xsZXIgPC0gc3RhcnRlZCcpO1xyXG5cclxuICAgICAgICBhY3RpdmF0ZSgpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmlzRGlyID0gaXNEaXI7XHJcbiAgICAgICAgICAgICRzY29wZS5pc0RpclVwID0gaXNEaXJVcDtcclxuXHJcbiAgICAgICAgICAgIC8vIG9ubHkgZm9yIHN1YmNvbnRyb2xsZXIgdXNhZ2VcclxuICAgICAgICAgICAgJHNjb3BlLl9lcnJvciA9IF9lcnJvcjtcclxuICAgICAgICAgICAgJHNjb3BlLl93YXJuaW5nID0gX3dhcm5pbmc7XHJcbiAgICAgICAgICAgICRzY29wZS5fc3VjY2VzcyA9IF9zdWNjZXNzO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLm1hbmFnZXIgPSB7XHJcbiAgICAgICAgICAgICAgICBwYXRoOiAnLydcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8vIFRPRE86IGFkZCBjYWNoaW5nIGFuZCBsb2FkIGxhc3Qgb3BlbmVkIGRpciBmb3IgJHNjb3BlLmZvbGRlci5pdGVtc1xyXG4gICAgICAgICAgICBEaXIucXVlcnkob25Jbml0aWFsRGlyTG9hZGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrIGlzIHBhc3NlZCBpdGVtIGlzIGZvbGRlclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGl0ZW1cclxuICAgICAgICAgKiBAcmV0dXJucyB7Knxib29sZWFufVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGlzRGlyKGl0ZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0gJiYgYW5ndWxhci5pc0RlZmluZWQoaXRlbS50eXBlKSAmJiBpdGVtLnR5cGUgPT09ICdkaXInO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2hlY2sgaXMgcGFzc2VkIGl0ZW0gaXMgZGlyIHRvIGdvIHVwXHJcbiAgICAgICAgICogQHBhcmFtIGl0ZW1cclxuICAgICAgICAgKiBAcmV0dXJucyB7Knxib29sZWFufGJvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gaXNEaXJVcChpdGVtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpc0RpcihpdGVtKSAmJiBpdGVtLm5hbWUgPT0gJy4uJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIF9fcmVzb2x2ZU1lc3NhZ2UocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgdmFyIG5vdGlmaWNhdGlvbiA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHJlc3BvbnNlLm5vdGlmaWNhdGlvbikpXHJcbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb24gPSByZXNwb25zZS5ub3RpZmljYXRpb247XHJcblxyXG4gICAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQocmVzcG9uc2UuZGF0YSkgJiYgYW5ndWxhci5pc0RlZmluZWQocmVzcG9uc2UuZGF0YS5ub3RpZmljYXRpb24pKVxyXG4gICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uID0gcmVzcG9uc2UuZGF0YS5ub3RpZmljYXRpb247XHJcblxyXG4gICAgICAgICAgICBpZiAobm90aWZpY2F0aW9uKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtoYXNNZXNzYWdlOiB0cnVlLCBtZXNzYWdlOiBub3RpZmljYXRpb259O1xyXG5cclxuICAgICAgICAgICAgJGxvZy5lcnJvcignQ2FudCBnZXQgdXNlciBmcmllbmRseSBtZXNzYWdlIGZyb20gcmVzcG9uc2UnLCB7cmVzcG9uc2U6IHJlc3BvbnNlfSk7XHJcbiAgICAgICAgICAgIHJldHVybiB7aGFzTWVzc2FnZTogZmFsc2V9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gX2Vycm9yKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5maXJlQnJvYWRjYXN0KCdfZXJyb3InKTtcclxuICAgICAgICAgICAgdmFyIGhhbmRsZXIgPSBfX3Jlc29sdmVNZXNzYWdlKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgaWYgKGhhbmRsZXIuaGFzTWVzc2FnZSlcclxuICAgICAgICAgICAgICAgIE5vdGlmaWNhdGlvbi5lcnJvcih7bWVzc2FnZTogaGFuZGxlci5tZXNzYWdlfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBfd2FybmluZyhyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZmlyZUJyb2FkY2FzdCgnX3dhcm5pbmcnKTtcclxuICAgICAgICAgICAgdmFyIGhhbmRsZXIgPSBfX3Jlc29sdmVNZXNzYWdlKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgaWYgKGhhbmRsZXIuaGFzTWVzc2FnZSlcclxuICAgICAgICAgICAgICAgIE5vdGlmaWNhdGlvbi5lcnJvcih7bWVzc2FnZTogaGFuZGxlci5tZXNzYWdlfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBfc3VjY2VzcyhyZXNwb25zZSkge1xyXG4gICAgICAgICAgICB2YXIgaGFuZGxlciA9IF9fcmVzb2x2ZU1lc3NhZ2UocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICBpZiAoaGFuZGxlci5oYXNNZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgTm90aWZpY2F0aW9uLnN1Y2Nlc3Moe21lc3NhZ2U6IGhhbmRsZXIubWVzc2FnZX0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSW5pdGlhbCBkaXIgbG9hZCBmb3IgZm9sZGVyIGFuZCB0cmVlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcmVzcG9uc2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBvbkluaXRpYWxEaXJMb2FkZWQocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgJGxvZy5sb2coJ0Jhc2VDb250cm9sbGVyIC0+IG9uSW5pdGlhbERpckxvYWRlZCcsIHtyZXNwb25zZTogcmVzcG9uc2V9KTtcclxuXHJcbiAgICAgICAgICAgIERpclNlcnZpY2UuZXh0ZW5kKHJlc3BvbnNlKTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5maXJlQnJvYWRjYXN0KCd0cmVlLWNoYW5nZWQnLCByZXNwb25zZS5kaXJzKCkpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZmlyZUJyb2FkY2FzdCgnZm9sZGVyLWNoYW5nZWQnLCByZXNwb25zZS5pdGVtcygpKTtcclxuXHJcbiAgICAgICAgICAgICRsb2cubG9nKCdGb2xkZXJDYWNoZScsIHtwYXRoOiAkY29va2llcy5nZXQoJ3BhdGgnKX0pO1xyXG4gICAgICAgICAgICBpZiAoISgkY29va2llcy5nZXQoJ3BhdGgnKSA9PT0gJy8nIHx8IHR5cGVvZiAkY29va2llcy5nZXQoJ3BhdGgnKSA9PT0gJ3VuZGVmaW5lZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZmlyZUJyb2FkY2FzdCgnY2hhbmdlLWZvbGRlcicsIHtwYXRoOiAkY29va2llcy5nZXQoJ3BhdGgnKX0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KShhbmd1bGFyLCBqUXVlcnkpOyIsIihmdW5jdGlvbiAoYW5ndWxhciwgJCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdmaWxlLm1hbmFnZXInKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdGb2xkZXJDb250cm9sbGVyJywgRm9sZGVyQ29udHJvbGxlcik7XHJcblxyXG4gICAgRm9sZGVyQ29udHJvbGxlci4kaW5qZWN0ID0gW1xyXG4gICAgICAgICckbG9nJywgJyRzY29wZScsICckY29va2llcycsICdmb2N1cycsICdEaXInLCAnRGlyU2VydmljZScsICdTZXR0aW5ncydcclxuICAgIF07XHJcblxyXG4gICAgZnVuY3Rpb24gRm9sZGVyQ29udHJvbGxlcigkbG9nLCAkc2NvcGUsICRjb29raWVzLCBmb2N1cywgRGlyLCBEaXJTZXJ2aWNlLCBTZXR0aW5ncykge1xyXG4gICAgICAgICRsb2cubG9nKCdGb2xkZXJDb250cm9sbGVyIGNvbnRyb2xsZXIgPC0gc3RhcnRlZCcpO1xyXG5cclxuICAgICAgICBhY3RpdmF0ZSgpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmZvbGRlciA9IHtcclxuICAgICAgICAgICAgICAgIGxvYWRpbmc6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGluZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnJyxcclxuICAgICAgICAgICAgICAgIGl0ZW1zOiBbXSxcclxuICAgICAgICAgICAgICAgIGZpbHRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBtZWRpYTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBmaWxlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICBmdW5jOiBvcmRlcixcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2U6IGNoYW5nZU9yZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ5OiAnbmFtZScsXHJcbiAgICAgICAgICAgICAgICAgICAgcmV2ZXJzZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBzaXplOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVuYWJsZUNyZWF0ZTogZW5hYmxlQ3JlYXRlLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlOiBjcmVhdGUsXHJcbiAgICAgICAgICAgICAgICByZWZyZXNoOiByZWZyZXNoLFxyXG4gICAgICAgICAgICAgICAgaXNGaWx0ZXJzRW5hYmxlZDogaXNGaWx0ZXJzRW5hYmxlZFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAkc2NvcGUuZm9sZGVyRmlsdGVyID0gZm9sZGVyRmlsdGVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gX19jYW5Mb2FkKCkge1xyXG4gICAgICAgICAgICAvLyBkbyBub3RoaW5nIGlmIGZvbGRlciBzdGlsbCBsb2FkaW5nXHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuZm9sZGVyLmxvYWRpbmcpIHtcclxuICAgICAgICAgICAgICAgICRsb2cud2FybignRm9sZGVyQ29udHJvbGxlciAtPiBsb2FkaW5nJywgJ1ByZXZpb3VzIGl0ZW0gc3RpbGwgbG9hZGluZycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJHNjb3BlLiRvbignX2Vycm9yJywgb25FcnJvckhhbmRsZWQpO1xyXG4gICAgICAgICRzY29wZS4kb24oJ193YXJuaW5nJywgb25FcnJvckhhbmRsZWQpO1xyXG4gICAgICAgIGZ1bmN0aW9uIG9uRXJyb3JIYW5kbGVkKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICRzY29wZS5mb2xkZXIubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJHNjb3BlLiRvbignY2hhbmdlLWZvbGRlcicsIGNoYW5nZUZvbGRlcik7XHJcbiAgICAgICAgZnVuY3Rpb24gY2hhbmdlRm9sZGVyKGV2ZW50LCBmb2xkZXIpIHtcclxuICAgICAgICAgICAgaWYgKCFfX2NhbkxvYWQoKSlcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICRsb2cubG9nKCdGb2xkZXJDb250cm9sbGVyIC0+IGNoYW5nZUZvbGRlcicsIHtldmVudDogZXZlbnQsIGZvbGRlcjogZm9sZGVyfSk7XHJcbiAgICAgICAgICAgICRzY29wZS5mb2xkZXIubG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIERpci5xdWVyeSh7cGF0aDogZm9sZGVyLnBhdGggfHwgJy8nfSwgZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5fc3VjY2VzcyhyKTtcclxuICAgICAgICAgICAgICAgIG9uRm9sZGVyQ2hhbmdlZChyLCBmb2xkZXIpO1xyXG4gICAgICAgICAgICB9LCAkc2NvcGUuX2Vycm9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJ2ZvbGRlci1jaGFuZ2VkJywgb25Gb2xkZXJFeHRlcm5hbGx5Q2hhbmdlZCk7XHJcbiAgICAgICAgZnVuY3Rpb24gb25Gb2xkZXJFeHRlcm5hbGx5Q2hhbmdlZChldmVudCwgaXRlbXMpIHtcclxuICAgICAgICAgICAgJGxvZy5sb2coJ0ZvbGRlckNvbnRyb2xsZXIgLT4gb25Gb2xkZXJFeHRlcm5hbGx5Q2hhbmdlZCcsIHtldmVudDogZXZlbnQsIGl0ZW1zOiBpdGVtc30pO1xyXG4gICAgICAgICAgICAkc2NvcGUuZm9sZGVyLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgJHNjb3BlLmZvbGRlci5pdGVtcyA9IGl0ZW1zO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJHNjb3BlLiRvbignZmlsZS11cGxvYWRlZCcsIGFkZE5ld0ZpbGUpO1xyXG4gICAgICAgIGZ1bmN0aW9uIGFkZE5ld0ZpbGUoZXZlbnQsIGZpbGUpIHtcclxuICAgICAgICAgICAgJGxvZy5sb2coJ0ZvbGRlckNvbnRyb2xsZXIgLT4gYWRkTmV3RmlsZScsIHtldmVudDogZXZlbnQsIGZpbGU6IGZpbGV9KTtcclxuICAgICAgICAgICAgRGlyU2VydmljZS5leHRlbmRJdGVtKGZpbGUsICRzY29wZS5mb2xkZXIuaXRlbXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgJHNjb3BlLmZvbGRlci5pdGVtcy51bnNoaWZ0KGZpbGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJHNjb3BlLiRvbignZm9sZGVyLWRlbGV0ZWQnLCByZW1vdmVCeVBhdGgpO1xyXG4gICAgICAgICRzY29wZS4kb24oJ2ZpbGUtZGVsZXRlZCcsIHJlbW92ZUJ5UGF0aCk7XHJcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlQnlQYXRoKGV2ZW50LCBpdGVtKSB7XHJcbiAgICAgICAgICAgICRsb2cubG9nKCdGb2xkZXJDb250cm9sbGVyIC0+IHJlbW92ZUJ5UGF0aCcsIHtldmVudDogZXZlbnQsIGl0ZW06IGl0ZW0sIGl0ZW1zOiAkc2NvcGUuZm9sZGVyLml0ZW1zfSk7XHJcbiAgICAgICAgICAgIHJlbW92ZUZyb21BcnIoJHNjb3BlLmZvbGRlci5pdGVtcywgaXRlbS5wYXRoLCAncGF0aCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRmlsdGVycyBmb2xkZXIgaXRlbXNcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB2YWx1ZVxyXG4gICAgICAgICAqIEBwYXJhbSBpbmRleFxyXG4gICAgICAgICAqIEBwYXJhbSBhcnJheVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGZvbGRlckZpbHRlcih2YWx1ZSwgaW5kZXgsIGFycmF5KSB7XHJcbiAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZS50eXBlKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlLnR5cGUgPT0gJ2RpcicpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGlzRmlsdGVyc0VuYWJsZWQoKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmZvbGRlci5maWx0ZXJzW3ZhbHVlLnR5cGVdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChTZXR0aW5ncy5nZXRUeXBlKCkgPT0gdmFsdWUudHlwZSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb3JkZXIoaXRlbSkge1xyXG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnZGlyJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0ubmFtZSA9PSAnLi4nKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwICsgJyAnICsgaXRlbVskc2NvcGUuZm9sZGVyLm9yZGVyLmJ5XTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuICd6JyArIGl0ZW1bJHNjb3BlLmZvbGRlci5vcmRlci5ieV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBjaGFuZ2VPcmRlcihuZXdOYW1lKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5mb2xkZXIub3JkZXIuYnkgPSBuZXdOYW1lO1xyXG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IFsnbmFtZScsICdzaXplJywgJ2RhdGUnXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShpKSlcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZm9sZGVyLm9yZGVyW29wdGlvbnNbaV1dID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLmZvbGRlci5vcmRlcltuZXdOYW1lXSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBpc0ZpbHRlcnNFbmFibGVkKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gU2V0dGluZ3MuZ2V0VHlwZSgpID09ICdmaWxlJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlZnJlc2goKSB7XHJcbiAgICAgICAgICAgIGlmICghX19jYW5Mb2FkKCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICRsb2cubG9nKCdGb2xkZXJDb250cm9sbGVyIC0+IHJlZnJlc2gnLCB7bWFuYWdlcjogJHNjb3BlLm1hbmFnZXJ9KTtcclxuICAgICAgICAgICAgJHNjb3BlLmZvbGRlci5sb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgJHNjb3BlLm1hbmFnZXIucGF0aCA9ICRzY29wZS5tYW5hZ2VyLnBhdGgucmVwbGFjZSgvXlxcL3xcXC8kL2csICcnKTtcclxuICAgICAgICAgICAgRGlyLnF1ZXJ5KHtwYXRoOiAkc2NvcGUubWFuYWdlci5wYXRoIHx8ICcvJ30sIGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICBvbkZvbGRlckNoYW5nZWQociwgJHNjb3BlLm1hbmFnZXIpO1xyXG4gICAgICAgICAgICB9LCAkc2NvcGUuX2Vycm9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhbGxiYWNrIGZvciBmb2xkZXIgZGF0YSBsb2FkIGNvbXBsZXRpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSByZXNwb25zZVxyXG4gICAgICAgICAqIEBwYXJhbSBmb2xkZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBvbkZvbGRlckNoYW5nZWQocmVzcG9uc2UsIGZvbGRlcikge1xyXG4gICAgICAgICAgICAkbG9nLmxvZygnRm9sZGVyQ29udHJvbGxlciAtPiBjaGFuZ2VGb2xkZXIgLT4gb25Gb2xkZXJDaGFuZ2VkJyxcclxuICAgICAgICAgICAgICAgIHtyZXNwb25zZTogcmVzcG9uc2UsIGZvbGRlcjogZm9sZGVyfSk7XHJcbiAgICAgICAgICAgIERpclNlcnZpY2UuZXh0ZW5kKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgJHNjb3BlLmZvbGRlci5pdGVtcyA9IHJlc3BvbnNlLml0ZW1zKCk7XHJcbiAgICAgICAgICAgICRzY29wZS5mb2xkZXIubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkc2NvcGUubWFuYWdlci5wYXRoID0gJy8nICsgKGZvbGRlci5wYXRoIHx8ICcnKTtcclxuICAgICAgICAgICAgJGNvb2tpZXMucHV0KCdwYXRoJywgKGZvbGRlci5wYXRoIHx8ICcnKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBlbmFibGVDcmVhdGUoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5mb2xkZXIuY3JlYXRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICBmb2N1cygnI2NyZWF0ZS1kaXItaW5wdXQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZSgpIHtcclxuICAgICAgICAgICAgaWYgKCFfX2NhbkxvYWQoKSlcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5mb2xkZXIubmFtZSAmJiAkc2NvcGUuZm9sZGVyLm5hbWUgIT09ICcnKVxyXG4gICAgICAgICAgICAgICAgRGlyU2VydmljZS5jcmVhdGUoJHNjb3BlLm1hbmFnZXIucGF0aCwgJHNjb3BlLmZvbGRlci5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIG9uRm9sZGVyQ3JlYXRlZCwgJHNjb3BlLl9lcnJvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBvbkZvbGRlckNyZWF0ZWQocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgJGxvZy5sb2coJ0ZvbGRlckNvbnRyb2xsZXIgLT4gY3JlYXRlIC0+IG9uRm9sZGVyQ3JlYXRlZCcsIHtyZXNwb25zZTogcmVzcG9uc2V9KTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5fc3VjY2VzcyhyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICRzY29wZS5mb2xkZXIuY3JlYXRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgJHNjb3BlLmZvbGRlci5uYW1lID0gJyc7XHJcbiAgICAgICAgICAgIHZhciBmb2xkZXIgPSByZXNwb25zZS5kYXRhO1xyXG4gICAgICAgICAgICBEaXJTZXJ2aWNlLmV4dGVuZEl0ZW0oZm9sZGVyLCAkc2NvcGUuZm9sZGVyLml0ZW1zLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICRzY29wZS5mb2xkZXIuaXRlbXMudW5zaGlmdChmb2xkZXIpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZmlyZUJyb2FkY2FzdCgnZm9sZGVyLWNyZWF0ZWQnLCBmb2xkZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoYW5ndWxhciwgalF1ZXJ5KTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIsICQsIHRvcCwgdywgTykge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdmaWxlLm1hbmFnZXInKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdGb2xkZXJJdGVtQ29udHJvbGxlcicsIEZvbGRlckl0ZW1Db250cm9sbGVyKTtcclxuXHJcbiAgICBGb2xkZXJJdGVtQ29udHJvbGxlci4kaW5qZWN0ID0gW1xyXG4gICAgICAgICckbG9nJywgJyRzY29wZScsICdmb2N1cycsICdEaXJTZXJ2aWNlJywgJ0ZpbGVTZXJ2aWNlJywgJ1NldHRpbmdzJ1xyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBGb2xkZXJJdGVtQ29udHJvbGxlcigkbG9nLCAkc2NvcGUsIGZvY3VzLCBEaXJTZXJ2aWNlLCBGaWxlU2VydmljZSwgU2V0dGluZ3MpIHtcclxuICAgICAgICAkbG9nLmxvZygnRm9sZGVySXRlbUNvbnRyb2xsZXIgY29udHJvbGxlciA8LSBzdGFydGVkJyk7XHJcblxyXG4gICAgICAgIGFjdGl2YXRlKCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuY2xpY2sgPSBjbGljaztcclxuICAgICAgICAgICAgJHNjb3BlLmNhblJlbmFtZSA9IGNhblJlbmFtZTtcclxuICAgICAgICAgICAgJHNjb3BlLmVuYWJsZVJlbmFtZSA9IGVuYWJsZVJlbmFtZTtcclxuICAgICAgICAgICAgJHNjb3BlLmRpc2FibGVSZW5hbWUgPSBkaXNhYmxlUmVuYW1lO1xyXG4gICAgICAgICAgICAkc2NvcGUucmVuYW1lID0gcmVuYW1lO1xyXG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0ID0gc2VsZWN0O1xyXG4gICAgICAgICAgICAkc2NvcGUuaGFzVGh1bWJzID0gaGFzVGh1bWJzO1xyXG4gICAgICAgICAgICAkc2NvcGUudGh1bWJOYW1lID0gdGh1bWJOYW1lO1xyXG4gICAgICAgICAgICAkc2NvcGVbJ2RlbGV0ZSddID0gZGVsZXRlSXRlbTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERldGVybWluZXMgaXRlbSB0eXBlIGFuZCBkb2VzIGFjdGlvbiBmb3IgdGhhdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrKGl0ZW0pIHtcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5mb2xkZXIubG9hZGluZykge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogYWRkIHdhcm5pbmcgYWJvdXQgbG9hZGluZ1xyXG4gICAgICAgICAgICAgICAgJGxvZy53YXJuKCdGb2xkZXJJdGVtQ29udHJvbGxlciAtPiBjbGljaycsICdQcmV2aW91cyBpdGVtIHN0aWxsIGxvYWRpbmcnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJGxvZy5sb2coJ0ZvbGRlckl0ZW1Db250cm9sbGVyIC0+IGNsaWNrJywge2l0ZW06IGl0ZW19KTtcclxuXHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuaXNEaXIoaXRlbSkpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5maXJlQnJvYWRjYXN0KCdjaGFuZ2UtZm9sZGVyJywgaXRlbSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNlbGVjdChpdGVtKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNhblJlbmFtZShpdGVtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhJHNjb3BlLmlzRGlyVXAoaXRlbSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBPbiByZW5hbWUgaXRlbVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGVuYWJsZVJlbmFtZShpdGVtKSB7XHJcbiAgICAgICAgICAgIGl0ZW0ucmVuYW1lID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5pc0RpcihpdGVtKSkge1xyXG4gICAgICAgICAgICAgICAgaXRlbS5uZXdOYW1lID0gaXRlbS5uYW1lO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaXRlbS5leHQgPSBpdGVtLm5hbWUuc3BsaXQoJy4nKS5wb3AoKTtcclxuICAgICAgICAgICAgICAgIHZhciBjdXQgPSAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uZXh0Lmxlbmd0aClcclxuICAgICAgICAgICAgICAgICAgICBjdXQgPSBpdGVtLmV4dC5sZW5ndGggKyAxO1xyXG5cclxuICAgICAgICAgICAgICAgIGl0ZW0ubmV3TmFtZSA9IGl0ZW0ubmFtZS5zdWJzdHJpbmcoMCwgaXRlbS5uYW1lLmxlbmd0aCAtIGN1dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9jdXMoJyMnICsgaXRlbS5pZCArICcgaW5wdXQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlbmFtZSgpIHtcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5pc0Rpcigkc2NvcGUuaXRlbSkpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuaXRlbS5uYW1lICE9ICcuLicpXHJcbiAgICAgICAgICAgICAgICAgICAgRGlyU2VydmljZS5yZW5hbWUoJHNjb3BlLm1hbmFnZXIucGF0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLml0ZW0ubmFtZSwgJHNjb3BlLml0ZW0ubmV3TmFtZSwgb25Gb2xkZXJSZW5hbWVkLCAkc2NvcGUuX2Vycm9yKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgRmlsZVNlcnZpY2UucmVuYW1lKCRzY29wZS5tYW5hZ2VyLnBhdGgsXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXRlbS5uYW1lLCBnZXRJdGVtTmV3TmFtZSgkc2NvcGUuaXRlbSksIG9uRmlsZVJlbmFtZWQsICRzY29wZS5fZXJyb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0SXRlbU5ld05hbWUoaXRlbSkge1xyXG4gICAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoaXRlbS5leHQpICYmIGl0ZW0uZXh0Lmxlbmd0aClcclxuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLm5ld05hbWUgKyAnLicgKyBpdGVtLmV4dDtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubmV3TmFtZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGRpc2FibGVSZW5hbWUoaXRlbSkge1xyXG4gICAgICAgICAgICBpdGVtLnJlbmFtZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25Gb2xkZXJSZW5hbWVkKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICRsb2cubG9nKCdGb2xkZXJJdGVtQ29udHJvbGxlciAtPiBvbkZvbGRlclJlbmFtZWQnLCB7cmVzcG9uc2U6IHJlc3BvbnNlLCBpdGVtOiAkc2NvcGUuaXRlbX0pO1xyXG4gICAgICAgICAgICAkc2NvcGUuX3N1Y2Nlc3MocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB2YXIgY29weSA9IGFuZ3VsYXIuY29weSgkc2NvcGUuaXRlbSk7XHJcbiAgICAgICAgICAgICRzY29wZS5pdGVtLnJlbmFtZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAvLyBUT0RPOiBjcmVhdGUgaXRlbSBhdXRvbWFwcGVyXHJcbiAgICAgICAgICAgICRzY29wZS5pdGVtLnBhdGggPSByZXNwb25zZS5kYXRhLnBhdGg7XHJcbiAgICAgICAgICAgICRzY29wZS5pdGVtLm5hbWUgPSByZXNwb25zZS5kYXRhLm5hbWU7XHJcbiAgICAgICAgICAgICRzY29wZS5pdGVtLnVybCA9IHJlc3BvbnNlLmRhdGEudXJsO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmZpcmVCcm9hZGNhc3QoJ2ZvbGRlci1yZW5hbWVkJywgeyduZXcnOiByZXNwb25zZS5kYXRhLCBvbGQ6IGNvcHl9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9uRmlsZVJlbmFtZWQocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgJGxvZy5sb2coJ0ZvbGRlckl0ZW1Db250cm9sbGVyIC0+IG9uRmlsZVJlbmFtZWQnLCB7cmVzcG9uc2U6IHJlc3BvbnNlfSk7XHJcbiAgICAgICAgICAgICRzY29wZS5fc3VjY2VzcyhyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICRzY29wZS5pdGVtLnJlbmFtZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkc2NvcGUuaXRlbS5uYW1lID0gcmVzcG9uc2UuZGF0YS5uYW1lO1xyXG4gICAgICAgICAgICAkc2NvcGUuaXRlbS51cmwgPSByZXNwb25zZS5kYXRhLnVybDtcclxuICAgICAgICAgICAgJHNjb3BlLml0ZW0udGh1bWJzID0gcmVzcG9uc2UuZGF0YS50aHVtYnM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZWxlY3QoaXRlbSwgdGh1bWJJbmRleCkge1xyXG4gICAgICAgICAgICB2YXIgZmlsZV91cmwgPSBpdGVtLnVybDtcclxuICAgICAgICAgICAgaWYgKCEhdGh1bWJJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgZmlsZV91cmwgPSBpdGVtLnRodW1ic1t0aHVtYkluZGV4XTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gaWYgc2VsZWN0IGZvciB0aW55TUNFXHJcbiAgICAgICAgICAgIGlmIChTZXR0aW5ncy5pc1RhcmdldCgndGlueU1DRScpKSB7XHJcbiAgICAgICAgICAgICAgICAkbG9nLmluZm8oJ0ZvbGRlckl0ZW1Db250cm9sbGVyIC0+IHNlbGVjdCAtPiB0aW55bWNlJywge3RpbnltY2U6IHRvcC50aW55bWNlfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodG9wLnRpbnltY2UubWFqb3JWZXJzaW9uIDwgNCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcC50aW55bWNlLmFjdGl2ZUVkaXRvci53aW5kb3dNYW5hZ2VyLnBhcmFtcy5zZXRVcmwoZmlsZV91cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlZGl0b3JfaWQgPSB0b3AudGlueW1jZS5hY3RpdmVFZGl0b3Iud2luZG93TWFuYWdlci5wYXJhbXMubWNlX3dpbmRvd19pZDtcclxuICAgICAgICAgICAgICAgICAgICB0b3AudGlueW1jZS5hY3RpdmVFZGl0b3Iud2luZG93TWFuYWdlci5jbG9zZShlZGl0b3JfaWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGxvZy5pbmZvKCdGb2xkZXJJdGVtQ29udHJvbGxlciAtPiBzZWxlY3QgLT4gdGlueW1jZTQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7cGFyYW1zOiB0b3AudGlueW1jZS5hY3RpdmVFZGl0b3Iud2luZG93TWFuYWdlci5nZXRQYXJhbXMoKX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcC50aW55bWNlLmFjdGl2ZUVkaXRvci53aW5kb3dNYW5hZ2VyLmdldFBhcmFtcygpLnNldFVybChmaWxlX3VybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9wLnRpbnltY2UuYWN0aXZlRWRpdG9yLndpbmRvd01hbmFnZXIuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKFNldHRpbmdzLmlzVGFyZ2V0KCdjYWxsYmFjaycpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmlsZW1hbmFnZXIgPSB3LmZpbGVtYW5hZ2VyIHx8IHcucGFyZW50LmZpbGVtYW5hZ2VyIHx8IHt9O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKGZpbGVtYW5hZ2VyICYmIGZpbGVtYW5hZ2VyLm9uU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlbWFuYWdlci5vblNlbGVjdGVkKGZpbGVfdXJsLCBTZXR0aW5ncy5nZXRQYXJhbXMoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGRlbGV0ZUl0ZW0oaXRlbSkge1xyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLmlzRGlyKGl0ZW0pKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5uYW1lICE9ICcuLicpXHJcbiAgICAgICAgICAgICAgICAgICAgRGlyU2VydmljZS5kZWxldGUoJHNjb3BlLm1hbmFnZXIucGF0aCwgaXRlbS5uYW1lLCBvbkZvbGRlckRlbGV0ZWQsICRzY29wZS5fZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIEZpbGVTZXJ2aWNlLmRlbGV0ZSgkc2NvcGUubWFuYWdlci5wYXRoLCBpdGVtLm5hbWUsIG9uRmlsZURlbGV0ZWQsICRzY29wZS5fZXJyb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25Gb2xkZXJEZWxldGVkKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICRsb2cubG9nKCdGb2xkZXJJdGVtQ29udHJvbGxlciAtPiBvbkZvbGRlckRlbGV0ZWQnLCB7cmVzcG9uc2U6IHJlc3BvbnNlfSk7XHJcbiAgICAgICAgICAgICRzY29wZS5fc3VjY2VzcyhyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICRzY29wZS5maXJlQnJvYWRjYXN0KCdmb2xkZXItZGVsZXRlZCcsIHJlc3BvbnNlLmRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25GaWxlRGVsZXRlZChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAkbG9nLmxvZygnRm9sZGVySXRlbUNvbnRyb2xsZXIgLT4gb25GaWxlRGVsZXRlZCcsIHtyZXNwb25zZTogcmVzcG9uc2V9KTtcclxuICAgICAgICAgICAgJHNjb3BlLl9zdWNjZXNzKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgJHNjb3BlLmZpcmVCcm9hZGNhc3QoJ2ZpbGUtZGVsZXRlZCcsIHJlc3BvbnNlLmRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaGFzVGh1bWJzKGl0ZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuICEhaXRlbSAmJiBhbmd1bGFyLmlzRGVmaW5lZChpdGVtLnRodW1icykgJiYgTy5rZXlzKGl0ZW0udGh1bWJzKS5sZW5ndGggPiAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gdGh1bWJOYW1lKHRodW1iSW5kZXgsIHdpZHRoLCBoZWlnaHQpIHtcclxuICAgICAgICAgICAgaWYgKHRodW1iSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzaXplID0gU2V0dGluZ3MuZ2V0VGh1bWJTaXplKHRodW1iSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgd2lkdGggPSBzaXplWzBdO1xyXG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gc2l6ZVsxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSAnKHt3aWR0aH0geCB7aGVpZ2h0fSknLFxyXG4gICAgICAgICAgICAgICAgcGFyYW1zID0ge3dpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHR9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlLnN1cHBsYW50KHBhcmFtcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KShhbmd1bGFyLCBqUXVlcnksIHRvcCwgd2luZG93LCBPYmplY3QpOyIsIihmdW5jdGlvbiAoYW5ndWxhciwgJCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdmaWxlLm1hbmFnZXInKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdUcmVlQ29udHJvbGxlcicsIFRyZWVDb250cm9sbGVyKTtcclxuXHJcbiAgICBUcmVlQ29udHJvbGxlci4kaW5qZWN0ID0gW1xyXG4gICAgICAgICckbG9nJywgJyRzY29wZScsICdEaXInLCAnRGlyU2VydmljZSdcclxuICAgIF07XHJcblxyXG4gICAgZnVuY3Rpb24gVHJlZUNvbnRyb2xsZXIoJGxvZywgJHNjb3BlLCBEaXIsIERpclNlcnZpY2UpIHtcclxuICAgICAgICAkbG9nLmxvZygnVHJlZUNvbnRyb2xsZXIgY29udHJvbGxlciA8LSBzdGFydGVkJyk7XHJcblxyXG4gICAgICAgIGFjdGl2YXRlKCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuaXNPcGVuID0gaXNPcGVuO1xyXG4gICAgICAgICAgICAkc2NvcGUuaXNFbXB0eSA9IGlzRW1wdHk7XHJcbiAgICAgICAgICAgICRzY29wZS5jaGFuZ2VGb2xkZXIgPSBjaGFuZ2VGb2xkZXI7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUudHJlZSA9IHtcclxuICAgICAgICAgICAgICAgIGxvYWRpbmc6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpdGVtczogW10sXHJcbiAgICAgICAgICAgICAgICByb290OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJy8nLCAvLyBUT0RPOiBnZXQgdHJhbnNsYXRpb24gZm9yIHRoaXMgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJHNjb3BlLmJhc2VVcmwgKyAnZGlyJ1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGV4cGFuZDogZXhwYW5kXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBUT0RPOiBhZGQgdHJlZSByZWZyZXNoXHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJ19lcnJvcicsIG9uRXJyb3JIYW5kbGVkKTtcclxuICAgICAgICAkc2NvcGUuJG9uKCdfd2FybmluZycsIG9uRXJyb3JIYW5kbGVkKTtcclxuICAgICAgICBmdW5jdGlvbiBvbkVycm9ySGFuZGxlZChldmVudCkge1xyXG4gICAgICAgICAgICAkc2NvcGUudHJlZS5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUuJG9uKCd0cmVlLWNoYW5nZWQnLCB0cmVlQ2hhbmdlZCk7XHJcbiAgICAgICAgZnVuY3Rpb24gdHJlZUNoYW5nZWQoZXZlbnQsIHRyZWUpIHtcclxuICAgICAgICAgICAgJGxvZy5sb2coJ1RyZWVDb250cm9sbGVyIC0+IHRyZWVDaGFuZ2VkJywge2V2ZW50OiBldmVudCwgdHJlZTogdHJlZX0pO1xyXG4gICAgICAgICAgICAkc2NvcGUudHJlZS5pdGVtcyA9IHRyZWU7XHJcbiAgICAgICAgICAgICRzY29wZS50cmVlLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJ2ZvbGRlci1jcmVhdGVkJywgb25Gb2xkZXJDcmVhdGVkKTtcclxuICAgICAgICBmdW5jdGlvbiBvbkZvbGRlckNyZWF0ZWQoZXZlbnQsIGZvbGRlcikge1xyXG4gICAgICAgICAgICAkbG9nLmxvZygnVHJlZUNvbnRyb2xsZXIgLT4gb25Gb2xkZXJDcmVhdGVkJywge2V2ZW50OiBldmVudCwgZm9sZGVyOiBmb2xkZXJ9KTtcclxuICAgICAgICAgICAgaWYgKGZvbGRlci5wYXRoLmluZGV4T2YoJy8nKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNyZWF0ZWQgZm9sZGVyIGlzIGluIHJvb3QsIHNvIHdlZSBuZWVkIGFkZCBpdCB0byB0cmVlIG1lbnVcclxuICAgICAgICAgICAgICAgICRzY29wZS50cmVlLml0ZW1zLnVuc2hpZnQoZm9sZGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJHNjb3BlLiRvbignZm9sZGVyLXJlbmFtZWQnLCBvbkZvbGRlclJlbmFtZWQpO1xyXG4gICAgICAgIGZ1bmN0aW9uIG9uRm9sZGVyUmVuYW1lZChldmVudCwgZm9sZGVycykge1xyXG4gICAgICAgICAgICB2YXIgb2xkRm9sZGVyID0gZm9sZGVycy5vbGQsXHJcbiAgICAgICAgICAgICAgICBuZXdGb2xkZXIgPSBmb2xkZXJzLm5ldztcclxuICAgICAgICAgICAgJGxvZy5sb2coJ1RyZWVDb250cm9sbGVyIC0+IG9uRm9sZGVyUmVuYW1lZCcsIHtldmVudDogZXZlbnQsIG5ld0ZvbGRlcjogbmV3Rm9sZGVyLCBvbGRGb2xkZXI6IG9sZEZvbGRlcn0pO1xyXG5cclxuICAgICAgICAgICAgLy8gVE9ETzogcmVjdXJzaXZlbHkgY2hlY2sgYWxsIGNoaWxkIGZvbGRlcnNcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUudHJlZS5pdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS50cmVlLml0ZW1zW2ldLnBhdGggPT0gb2xkRm9sZGVyLnBhdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBjcmVhdGUgaXRlbSBhdXRvbWFwcGVyXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRyZWUuaXRlbXNbaV0ucGF0aCA9IG5ld0ZvbGRlci5wYXRoO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50cmVlLml0ZW1zW2ldLm5hbWUgPSBuZXdGb2xkZXIubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudHJlZS5pdGVtc1tpXS51cmwgPSBuZXdGb2xkZXIudXJsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUuJG9uKCdmb2xkZXItZGVsZXRlZCcsIHJlbW92ZUJ5UGF0aCk7XHJcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlQnlQYXRoKGV2ZW50LCBpdGVtKSB7XHJcbiAgICAgICAgICAgICRsb2cubG9nKCdUcmVlQ29udHJvbGxlciAtPiByZW1vdmVCeVBhdGgnLCB7ZXZlbnQ6IGV2ZW50LCBpdGVtOiBpdGVtLCBpdGVtczogJHNjb3BlLnRyZWUuaXRlbXN9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFRPRE86IHJlY3Vyc2l2ZWx5IGNoZWNrIGFsbCBjaGlsZCBmb2xkZXJzXHJcbiAgICAgICAgICAgIHJlbW92ZUZyb21BcnIoJHNjb3BlLnRyZWUuaXRlbXMsIGl0ZW0ucGF0aCwgJ3BhdGgnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrIGlzIGZvbGRlciBvcGVuIGZvciB0cmVlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZm9sZGVyXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gaXNPcGVuKGZvbGRlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gZm9sZGVyICYmIGFuZ3VsYXIuaXNEZWZpbmVkKGZvbGRlci5mb2xkZXJzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrIGlzIGZvbGRlciBoYXMgYW55IG90aGVyIGZvbGRlclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGZvbGRlclxyXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGlzRW1wdHkoZm9sZGVyKSB7XHJcbiAgICAgICAgICAgIGlmIChpc09wZW4oZm9sZGVyKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmb2xkZXIuZm9sZGVycy5sZW5ndGggPT0gMDtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZXhwYW5kKGN1cnJGb2xkZXIpIHtcclxuICAgICAgICAgICAgLy8gZG8gbm90aGluZyBpZiB0cmVlIHN0aWxsIGxvYWRpbmcgb3IgZG9uYHQgaGF2ZSBzdWIgZm9sZGVyc1xyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLnRyZWUubG9hZGluZyB8fCBpc0VtcHR5KGN1cnJGb2xkZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAkbG9nLndhcm4oJ1RyZWVDb250cm9sbGVyIC0+IGV4cGFuZCcsICdQcmV2aW91cyBpdGVtIHN0aWxsIGxvYWRpbmcnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJGxvZy5sb2coJ1RyZWVDb250cm9sbGVyIC0+IGV4cGFuZCcsIHtjdXJyOiBjdXJyRm9sZGVyfSk7XHJcblxyXG4gICAgICAgICAgICAvLyByZW1vdmUgYWxsIHN1YiBmb2xkZXJzIGlmIGl0IGlzIGFscmVhZHkgb3BlbmVkXHJcbiAgICAgICAgICAgIGlmIChpc09wZW4oY3VyckZvbGRlcikpIHtcclxuICAgICAgICAgICAgICAgIGN1cnJGb2xkZXIuZm9sZGVycyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLnRyZWUubG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIERpci5xdWVyeSh7cGF0aDogY3VyckZvbGRlci5wYXRofSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBEaXJTZXJ2aWNlLmV4dGVuZChyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudHJlZS5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBjdXJyRm9sZGVyLmZvbGRlcnMgPSByZXNwb25zZS5kaXJzKCk7XHJcbiAgICAgICAgICAgIH0sICRzY29wZS5fZXJyb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2hhbmdlRm9sZGVyKGZvbGRlcikge1xyXG4gICAgICAgICAgICAkc2NvcGUuZmlyZUJyb2FkY2FzdCgnY2hhbmdlLWZvbGRlcicsIGZvbGRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KShhbmd1bGFyLCBqUXVlcnkpOyIsIihmdW5jdGlvbiAoYW5ndWxhciwgJCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdmaWxlLm1hbmFnZXInKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdVcGxvYWRDb250cm9sbGVyJywgVXBsb2FkQ29udHJvbGxlcik7XHJcblxyXG4gICAgVXBsb2FkQ29udHJvbGxlci4kaW5qZWN0ID0gW1xyXG4gICAgICAgICckbG9nJywgJyRzY29wZScsICdGaWxlVXBsb2FkZXInXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIFVwbG9hZENvbnRyb2xsZXIoJGxvZywgJHNjb3BlLCBGaWxlVXBsb2FkZXIpIHtcclxuICAgICAgICAkbG9nLmxvZygnVXBsb2FkQ29udHJvbGxlciBjb250cm9sbGVyIDwtIHN0YXJ0ZWQnKTtcclxuXHJcbiAgICAgICAgYWN0aXZhdGUoKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS51cGxvYWRlciA9IG5ldyBGaWxlVXBsb2FkZXIoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiBfZ2V0VXBsb2FkUGF0aFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIF9nZXRVcGxvYWRQYXRoKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHNjb3BlLmJhc2VVcmwoKSArICdmaWxlL3VwbG9hZCcgKyAkc2NvcGUubWFuYWdlci5wYXRoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJHNjb3BlLnVwbG9hZGVyLm9uV2hlbkFkZGluZ0ZpbGVGYWlsZWQgPSBmdW5jdGlvbiAoaXRlbSAvKntGaWxlfEZpbGVMaWtlT2JqZWN0fSovLCBmaWx0ZXIsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgJGxvZy5pbmZvKCdvbldoZW5BZGRpbmdGaWxlRmFpbGVkJywgaXRlbSwgZmlsdGVyLCBvcHRpb25zKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUudXBsb2FkZXIub25BZnRlckFkZGluZ0ZpbGUgPSBmdW5jdGlvbiAoZmlsZUl0ZW0pIHtcclxuICAgICAgICAgICAgLy8gZml4IHVybCB0byB1cGxvYWQgYXMgd2UgY2FuIGNoYW5nZSBpdCBhdCBhbnkgbW9tZW50XHJcbiAgICAgICAgICAgIGZpbGVJdGVtLnVwbG9hZGVyLnVybCA9IGZpbGVJdGVtLnVybCA9IF9nZXRVcGxvYWRQYXRoKCk7XHJcbiAgICAgICAgICAgICRsb2cuaW5mbygnb25BZnRlckFkZGluZ0ZpbGUnLCBmaWxlSXRlbSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnVwbG9hZGVyLm9uRXJyb3JJdGVtID0gZnVuY3Rpb24gKGZpbGVJdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IGFkZCBlcnJvciBoYW5kbGluZ1xyXG4gICAgICAgICAgICAkbG9nLmluZm8oJ29uRXJyb3JJdGVtJywgZmlsZUl0ZW0sIC8qcmVzcG9uc2UsKi8gc3RhdHVzLCBoZWFkZXJzKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUudXBsb2FkZXIub25Db21wbGV0ZUl0ZW0gPSBmdW5jdGlvbiAoZmlsZUl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcclxuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAkbG9nLmluZm8oJ1VwbG9hZENvbnRyb2xsZXIgLT4gdXBsb2FkZXIgLT4gb25Db21wbGV0ZUl0ZW0nLFxyXG4gICAgICAgICAgICAgICAgICAgIHtmaWxlSXRlbTogZmlsZUl0ZW0sIHJlc3BvbnNlOiByZXNwb25zZSwgc3RhdHVzOiBzdGF0dXMsIGhlYWRlcnM6IGhlYWRlcnN9KTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5maXJlQnJvYWRjYXN0KCdmaWxlLXVwbG9hZGVkJywgcmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLl9zdWNjZXNzKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS51cGxvYWRlci5vbkNvbXBsZXRlQWxsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkbG9nLmluZm8oJ1VwbG9hZENvbnRyb2xsZXIgLT4gdXBsb2FkZXIgLT4gb25Db21wbGV0ZUFsbCcsIHt1cGxvYWRlcjogJHNjb3BlLnVwbG9hZGVyfSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgaGFzTm90VXBsb2FkZWRGaWxlcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goJHNjb3BlLnVwbG9hZGVyLnF1ZXVlLCBmdW5jdGlvbiAoZmlsZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFmaWxlLmlzUmVhZHkgJiYgIWZpbGUuaXNVcGxvYWRpbmcgJiYgIWZpbGUuaXNTdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFzTm90VXBsb2FkZWRGaWxlcyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFoYXNOb3RVcGxvYWRlZEZpbGVzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDbGVhciBsaXMgZnJvbSBpdGVtcyBhbmQgaGlkZSBpdFxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnVwbG9hZGVyLmNsZWFyUXVldWUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn0pKGFuZ3VsYXIsIGpRdWVyeSk7IiwiKGZ1bmN0aW9uIChhbmd1bGFyLCAkKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2ZpbGUubWFuYWdlcicpXHJcbiAgICAgICAgLnNlcnZpY2UoJ0RpcicsIERpcik7XHJcblxyXG4gICAgRGlyLiRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRsb2cnLCAnJHJlc291cmNlJywgJyRyb290U2NvcGUnXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIERpcigkbG9nLCAkcmVzb3VyY2UsICRyb290U2NvcGUpIHtcclxuICAgICAgICAkbG9nLmxvZygnRGlyIHJlc291cmNlIDwtIHN0YXJ0ZWQnKTtcclxuXHJcbiAgICAgICAgcmV0dXJuICRyZXNvdXJjZSgkcm9vdFNjb3BlLmJhc2VVcmwoKSArICdkaXIvOnBhdGgnLCB7XHJcbiAgICAgICAgICAgIHBhdGg6ICdAcGF0aCdcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSkoYW5ndWxhciwgalF1ZXJ5KTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIsICQpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnZmlsZS5tYW5hZ2VyJylcclxuICAgICAgICAuc2VydmljZSgnRGlyU2VydmljZScsIERpclNlcnZpY2UpO1xyXG5cclxuICAgIERpclNlcnZpY2UuJGluamVjdCA9IFtcclxuICAgICAgICAnJGxvZycsICckcm9vdFNjb3BlJywgJyRodHRwJ1xyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBEaXJTZXJ2aWNlKCRsb2csICRyb290U2NvcGUsICRodHRwKSB7XHJcbiAgICAgICAgJGxvZy5sb2coJ0RpclNlcnZpY2Ugc2VydmljZSA8LSBzdGFydGVkJyk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGV4dGVuZDogZXh0ZW5kLFxyXG4gICAgICAgICAgICBleHRlbmRJdGVtOiBleHRlbmRJdGVtLFxyXG4gICAgICAgICAgICByZW5hbWU6IHJlbmFtZSxcclxuICAgICAgICAgICAgY3JlYXRlOiBjcmVhdGUsXHJcbiAgICAgICAgICAgICdkZWxldGUnOiBkZWxldGVEaXIsXHJcbiAgICAgICAgICAgIGlkR2VuOiBpZEdlblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGV4dGVuZChkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChkYXRhLkRpclNlcnZpY2VFeHRlbmRlZCkgJiYgZGF0YS5EaXJTZXJ2aWNlRXh0ZW5kZWQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChkYXRhLCB7XHJcbiAgICAgICAgICAgICAgICBkaXJzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvbGRlcnMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goZGF0YSwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLnR5cGUgPT0gJ2RpcicgJiYgdmFsdWUubmFtZSAhPSAnLi4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlbmRJdGVtKHZhbHVlLCBrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIGZvbGRlcnMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9sZGVycztcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBpdGVtczogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpdGVtcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChkYXRhLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRlbmRJdGVtKHZhbHVlLCBrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIGl0ZW1zKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1zO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGRhdGEuRGlyU2VydmljZUV4dGVuZGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlbmFtZXMgcGF0aCBsYXN0IHBhcnQgbnRvIG5ldyBuYW1lXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcGF0aCBcInBhdGggdG8gcmVuYW1lXCJcclxuICAgICAgICAgKiBAcGFyYW0gb2xkTmFtZVxyXG4gICAgICAgICAqIEBwYXJhbSBuZXdOYW1lIFwibmV3IG5hbWUgZm9yIHBhdGggbGFzdCBlbGVtZW50XCJcclxuICAgICAgICAgKiBAcGFyYW0gb25TdWNjZXNzIFwiY2FsbGJhY2sgZm9yIHN1Y2Nlc3NmdWwgcmVuYW1lXCJcclxuICAgICAgICAgKiBAcGFyYW0gb25FcnJvciBcImNhbGxiYWNrIGZvciBlcnJvclwiXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gcmVuYW1lKHBhdGgsIG9sZE5hbWUsIG5ld05hbWUsIG9uU3VjY2Vzcywgb25FcnJvcikge1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gJHJvb3RTY29wZS5iYXNlVXJsKCkgKyAnZGlyL3JlbmFtZS8nICsgcGF0aDtcclxuICAgICAgICAgICAgJGh0dHAucG9zdCh1cmwsIHtcclxuICAgICAgICAgICAgICAgICdvbGQnOiBvbGROYW1lLFxyXG4gICAgICAgICAgICAgICAgJ25ldyc6IG5ld05hbWVcclxuICAgICAgICAgICAgfSkudGhlbihvblN1Y2Nlc3MsIG9uRXJyb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlKHBhdGgsIG5hbWUsIG9uU3VjY2Vzcywgb25FcnJvcikge1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gJHJvb3RTY29wZS5iYXNlVXJsKCkgKyAnZGlyL2NyZWF0ZS8nICsgcGF0aDtcclxuICAgICAgICAgICAgJGh0dHAucG9zdCh1cmwsIHtcclxuICAgICAgICAgICAgICAgICduYW1lJzogbmFtZVxyXG4gICAgICAgICAgICB9KS50aGVuKG9uU3VjY2Vzcywgb25FcnJvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBkZWxldGVEaXIocGF0aCwgbmFtZSwgb25TdWNjZXNzLCBvbkVycm9yKSB7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSAkcm9vdFNjb3BlLmJhc2VVcmwoKSArICdkaXIvZGVsZXRlLycgKyBwYXRoO1xyXG4gICAgICAgICAgICAkaHR0cC5wb3N0KHVybCwge1xyXG4gICAgICAgICAgICAgICAgJ25hbWUnOiBuYW1lXHJcbiAgICAgICAgICAgIH0pLnRoZW4ob25TdWNjZXNzLCBvbkVycm9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGlkR2VuKGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2xpc3QtaXRlbS0nICsga2V5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZXh0ZW5kSXRlbShpdGVtLCBrZXkpIHtcclxuICAgICAgICAgICAgaXRlbS5pZCA9IGlkR2VuKGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KShhbmd1bGFyLCBqUXVlcnkpOyIsIihmdW5jdGlvbiAoYW5ndWxhciwgJCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdmaWxlLm1hbmFnZXInKVxyXG4gICAgICAgIC5zZXJ2aWNlKCdGaWxlU2VydmljZScsIEZpbGVTZXJ2aWNlKTtcclxuXHJcbiAgICBGaWxlU2VydmljZS4kaW5qZWN0ID0gW1xyXG4gICAgICAgICckbG9nJywgJyRyb290U2NvcGUnLCAnJGh0dHAnXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIEZpbGVTZXJ2aWNlKCRsb2csICRyb290U2NvcGUsICRodHRwKSB7XHJcbiAgICAgICAgJGxvZy5sb2coJ0ZpbGVTZXJ2aWNlIHNlcnZpY2UgPC0gc3RhcnRlZCcpO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZW5hbWU6IHJlbmFtZSxcclxuICAgICAgICAgICAgJ2RlbGV0ZSc6IGRlbGV0ZUZpbGVcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByZW5hbWUocGF0aCwgb2xkTmFtZSwgbmV3TmFtZSwgb25TdWNjZXNzLCBvbkVycm9yKSB7XHJcbiAgICAgICAgICAgICRsb2cubG9nKCdGaWxlU2VydmljZSAtPiByZW5hbWUnLCB7cGF0aDogcGF0aCwgb2xkTmFtZTogb2xkTmFtZSwgbmV3TmFtZTogbmV3TmFtZX0pO1xyXG5cclxuICAgICAgICAgICAgdmFyIHVybCA9ICRyb290U2NvcGUuYmFzZVVybCgpICsgJ2ZpbGUvcmVuYW1lLycgKyBwYXRoO1xyXG4gICAgICAgICAgICAkaHR0cC5wb3N0KHVybCwge1xyXG4gICAgICAgICAgICAgICAgJ29sZCc6IG9sZE5hbWUsXHJcbiAgICAgICAgICAgICAgICAnbmV3JzogbmV3TmFtZVxyXG4gICAgICAgICAgICB9KS50aGVuKG9uU3VjY2Vzcywgb25FcnJvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBkZWxldGVGaWxlKHBhdGgsIG5hbWUsIG9uU3VjY2Vzcywgb25FcnJvcikge1xyXG4gICAgICAgICAgICAkbG9nLmxvZygnRmlsZVNlcnZpY2UgLT4gZGVsZXRlJywge3BhdGg6IHBhdGgsIG5hbWU6IG5hbWV9KTtcclxuXHJcbiAgICAgICAgICAgIHZhciB1cmwgPSAkcm9vdFNjb3BlLmJhc2VVcmwoKSArICdmaWxlL2RlbGV0ZS8nICsgcGF0aDtcclxuICAgICAgICAgICAgJGh0dHAucG9zdCh1cmwsIHtcclxuICAgICAgICAgICAgICAgICduYW1lJzogbmFtZVxyXG4gICAgICAgICAgICB9KS50aGVuKG9uU3VjY2Vzcywgb25FcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KShhbmd1bGFyLCBqUXVlcnkpOyIsIihmdW5jdGlvbiAobmcsICQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBuZ1xuICAgICAgICAubW9kdWxlKCdmaWxlLm1hbmFnZXInKVxuICAgICAgICAuc2VydmljZSgnU2V0dGluZ3MnLCBTZXR0aW5ncyk7XG5cbiAgICBTZXR0aW5ncy4kaW5qZWN0ID0gW107XG5cbiAgICBmdW5jdGlvbiBTZXR0aW5ncygpIHtcbiAgICAgICAgdmFyICRzZXR0aW5ncyA9ICQoJyNzZXR0aW5ncycpLCBwYXJhbXMgPSBmYWxzZTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaXNUYXJnZXQ6IGlzVGFyZ2V0LFxuICAgICAgICAgICAgZ2V0VHlwZTogZ2V0VHlwZSxcbiAgICAgICAgICAgIGdldFRodW1iU2l6ZTogZ2V0VGh1bWJTaXplLFxuICAgICAgICAgICAgZ2V0UGFyYW1zOiBnZXRQYXJhbXNcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBpc1RhcmdldChjdXJyX3RhcmdldCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldFBhcmFtcygpLnRhcmdldC50b0xvd2VyQ2FzZSgpID09PSBjdXJyX3RhcmdldC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0VHlwZSgpIHtcbiAgICAgICAgICAgIHJldHVybiAoZ2V0UGFyYW1zKCkudHlwZSA/IHBhcmFtcy50eXBlLnRvTG93ZXJDYXNlKCkgOiBmYWxzZSkgfHwgJ2ZpbGUnO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0VGh1bWJTaXplKHNpemVLZXkpIHtcbiAgICAgICAgICAgIHZhciBzaXplcyA9IG5nLmZyb21Kc29uKCRzZXR0aW5ncy5kYXRhKCdzaXplcycpLnJlcGxhY2UoL1xcJy9nLCAnXCInKSk7XG5cbiAgICAgICAgICAgIHJldHVybiBzaXplc1tzaXplS2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFBhcmFtcygpIHtcbiAgICAgICAgICAgIGlmICghcGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGFQYXJhbXMgPSAkc2V0dGluZ3MuZGF0YSgncGFyYW1zJyk7XG4gICAgICAgICAgICAgICAgLy8gaWYgcGFyYW1zIGlzIGVtcHR5IGFycmF5LCBpdCBhbHJlYWR5IGNvbnZlcnRlZCB0byBlbXB0eSBhcnJheVxuICAgICAgICAgICAgICAgIGlmIChkYXRhUGFyYW1zLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xuXG4gICAgICAgICAgICAgICAgcGFyYW1zID0gc3RyRnJvbUpzb24oZGF0YVBhcmFtcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGFyYW1zO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZml4U2VyaWFsaXphYmxlU3RyKHN0cikge1xuICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1xcJy9nLCAnXCInKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdHJGcm9tSnNvbihzdHIpIHtcbiAgICAgICAgcmV0dXJuIG5nLmZyb21Kc29uKGZpeFNlcmlhbGl6YWJsZVN0cihzdHIpKTtcbiAgICB9XG59KShhbmd1bGFyLCBqUXVlcnkpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
